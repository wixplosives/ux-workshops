(self.webpackChunk_wixc3_component_playground=self.webpackChunk_wixc3_component_playground||[]).push([[4416],{51607:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDependencyResolver=void 0;const{hasOwnProperty:n}=Object.prototype;t.createDependencyResolver=function({extractRequests:e,resolveRequest:t}){return(o,i)=>{const r=Object.create(null),s=Array.isArray(o)?[...o]:[o];for(;s.length>0;){const o=s.shift();if(r[o])continue;const c=Object.create(null);r[o]=c;const a=e(o);for(const e of a){if(n.call(c,e))continue;const r=t(o,e);c[e]=r,i&&void 0!==r&&!1!==r&&s.push(r)}}return r}}},26315:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(51607),t),i(n(48522),t),i(n(20096),t)},48522:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRequestResolver=void 0;const n="browser",o=["node_modules"],i=[".js",".json"],r=e=>"."===e||".."===e||e.startsWith("./")||e.startsWith("../"),s={throwIfNoEntry:!1};function c(e){const t=new Map;let n=!1;for(const[o,i]of Object.entries(e)){let e=o,r=i;o.endsWith("/*")&&(n=!0,e={prefix:o.slice(0,-1)},"string"==typeof i&&i.endsWith("/*")&&(r={prefix:i.slice(0,-1)})),t.set(e,r)}return[t,n]}t.createRequestResolver=function(e){const{fs:{statSync:t,readFileSync:a,realpathSync:l,dirname:d,join:u,resolve:f,isAbsolute:p},packageRoots:y=o,extensions:v=i,target:g=n,resolvedPacakgesCache:h=new Map,alias:m={},fallback:_={}}=e,E=function(e,t=new Map){return n=>{if(t.has(n))return t.get(n);{const o=e(n);return t.set(n,o),o}}}((function(e){const t=u(e,"package.json"),n=function(e){const{stackTraceLimit:t}=Error;try{return Error.stackTraceLimit=0,JSON.parse(a(e,"utf8"))}catch{return}finally{Error.stackTraceLimit=t}}(t);if("object"!=typeof n||null===n)return;const o=function({main:e,browser:t}){return"browser"===g&&"string"==typeof t?t:"string"==typeof e?e:void 0}(n),{browser:i}=n;let s;if("browser"===g&&"object"==typeof i&&null!==i){s=Object.create(null);for(const[t,n]of Object.entries(i)){const o=r(t)?M(u(e,t)):t;if(o){const t=D(e,n);void 0!==t&&(s[o]=t)}}}return{filePath:t,directoryPath:e,mainPath:o,browserMappings:s}}),h),[b,w]=c(m),[R,P]=c(_);return function(e,t){var n,o;const i=new Set;for(const r of function*(e,t,n){var o;const i=w?x(b,t):b.get(t);let r=!1;if(void 0!==i&&(r=!0,yield i),!r&&"browser"===g){const i=C(e);if(i){n.add(i.filePath);const e=null===(o=i.browserMappings)||void 0===o?void 0:o[t];void 0!==e&&(r=!0,yield e)}}r||(yield t);const s=P?x(R,t):R.get(t);void 0!==s&&(yield s)}(e,t,i)){if(!1===r)return{resolvedFile:r,visitedPaths:i};for(const t of j(e,r)){if(i.add(t),!(null===(n=k(t))||void 0===n?void 0:n.isFile()))continue;if("browser"===g){const e=C(d(t));if(e){i.add(e.filePath);const n=null===(o=e.browserMappings)||void 0===o?void 0:o[t];if(void 0!==n)return!1!==n&&i.add(n),{resolvedFile:n,originalFilePath:t,visitedPaths:i}}}const e=q(t);return i.add(e),{resolvedFile:e,visitedPaths:i}}}return{resolvedFile:void 0,visitedPaths:i}};function*j(e,t){if(r(t)||p(t)){const n=f(e,t);yield*F(n),yield*O(n)}else yield*function*(e,t){var n;for(const o of function*(e){for(const t of y)for(const n of I(e))yield u(n,t)}(e)){if(!(null===(n=k(o))||void 0===n?void 0:n.isDirectory()))continue;const e=u(o,t);yield*F(e),yield*O(e)}}(e,t)}function*F(e){yield e;for(const t of v)yield e+t}function*S(e){yield*F(e),yield*F(u(e,"index"))}function*O(e){var t;if(!(null===(t=k(e))||void 0===t?void 0:t.isDirectory()))return;const n=E(e),o=null==n?void 0:n.mainPath;void 0!==o?yield*S(u(e,o)):yield*F(u(e,"index"))}function x(e,t){for(const[n,o]of e){const e=typeof n;if("string"===e){if(t===n)return o}else if("object"===e){const{prefix:e}=n;if(t.startsWith(e)&&t.length>e.length)return"object"==typeof o?o.prefix+t.slice(e.length):o}}}function C(e){for(const t of I(e)){const e=E(t);if(e)return e}}function D(e,t){return!1===t?t:"string"==typeof t?r(t)?M(u(e,t)):t:void 0}function M(e){var t;for(const n of S(e))if(null===(t=k(n))||void 0===t?void 0:t.isFile())return q(n)}function k(e){const{stackTraceLimit:n}=Error;try{return Error.stackTraceLimit=0,t(e,s)}catch{return}finally{Error.stackTraceLimit=n}}function q(e){const{stackTraceLimit:t}=Error;try{return Error.stackTraceLimit=0,l(e)}catch{return e}finally{Error.stackTraceLimit=t}}function*I(e){let t;for(;t!==e;)yield e,t=e,e=d(e)}}},20096:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},43450:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(5163),i=n(93849),r=o.__importStar(n(32510)),s=o.__importDefault(n(60456)),c=o.__importDefault(n(25447)),a=o.__importStar(n(2206)),l=n(5689),d=o.__importDefault(n(93208)),u=o.__importDefault(n(1529)),f=(0,r.defineComputedResource)().defineEntity(a.processingEnv),p=(0,r.defineComputedResource)().defineEntity(a.processingEnv),y=(0,r.defineComputedResource)().defineEntity(a.processingEnv),v=(0,r.defineQueryResource)().defineEntity(a.processingEnv),g=(0,r.defineComputedResource)().defineEntity(a.processingEnv),h=new i.Feature({id:"codeExecution",dependencies:[a.default.asEntity,c.default.asEntity,i.COM.asEntity,d.default.asEntity,u.default.asEntity,r.default.asEntity,s.default.asEntity],api:{requestsExtractors:i.Slot.withType().defineEntity(a.processingEnv),requestResolvers:i.Slot.withType().defineEntity(a.processingEnv),bundlePlugins:i.Slot.withType().defineEntity(a.processingEnv),resolveNodeRequest:i.Service.withType().defineEntity(a.processingEnv),resolver:i.Service.withType().defineEntity(a.processingEnv).allowRemoteAccess(),deepDependencies:g,deepDependenciesMain:g.defineConsumer(l.mainEnv),dependencyResourceFactory:f,fileDependencyResourceFactory:p,executionResourceFactory:v,fileDependencyGraphResourceFactory:y,resolveConfig:a.default.api.pluggableProjectConfig.entry({},"resolve")}});t.default=h},73555:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(5163),i=n(26315),r=n(2206),s=n(91570),c=n(47951),a=o.__importDefault(n(43450)),l=n(60814),d=n(74161),{hasOwnProperty:u}=Object.prototype;a.default.setup(r.processingEnv,(({requestsExtractors:e,requestResolvers:t,dependencyResourceFactory:n,fileDependencyResourceFactory:o,executionResourceFactory:a,deepDependencies:f,fileDependencyGraphResourceFactory:p,resolveConfig:y,bundlePlugins:v},{compilation:{compiledFilesManager:g},project:{fs:h,projectService:m,fileManager:_,pluggableProjectConfig:E,virtualFs:b},analytics:{analyticsService:{track:w}}})=>{let R=0;const P=E.get(r.PROJECT_CONFIG_NAME).get(y),j=(0,i.createRequestResolver)({fs:h,extensions:s.resolveExtensions,packageRoots:P.packageRoots,alias:P.alias,fallback:P.fallback});function F(e,n){for(const o of t){const{resolvedRequest:t,originalFilePath:i}=o(e,n);if(void 0!==t)return{resolvedRequest:t,originalFilePath:i}}return{resolvedRequest:void 0}}t.register(((e,t)=>{const{resolvedFile:n,originalFilePath:o}=j(h.dirname(e),t);return{resolvedRequest:n,originalFilePath:o}}));const S=async(t,n,o,i)=>{const r=g.get((0,c.compiledFileId)(t));r.isReady()||await r.ready;const s=r.getLatest();i.add(r);for(const{test:r,extractRequests:c}of e)if(r(t)){const e=c(t,s);for(const r of e){const{resolvedRequest:e}=F(t,r);!e||o.has(e)||n.find((t=>e.includes(t)))||(o.add(e),await S(e,n,o,i))}}},O=(t,n,o)=>{const i={};for(const{test:r,extractRequests:s}of e)if(r(o?".js":t)){const e=s(t,n);for(const n of e){if(u.call(i,n))continue;const{resolvedRequest:e}=F(t,n);i[n]=e}return i}return i},x=async e=>{const t=await g.getReady((0,c.compiledFileId)(e)),n=t.getLatest(),o=new Set([t]);return{value:O(e,n,!0),dependencies:o,status:{valid:!0}}},C=n.provide({dependencies:[g],handler:{compute:x,recompute:async(e,t,n,o)=>{const{value:i}=await x(e.getId());return{changes:JSON.stringify(i)!==JSON.stringify(e.getLatest())?[(0,l.fullChange)(i)]:[],dependencies:o,status:(0,l.getDefaultStatusHandling)(e.getSerializedId(),o)}}}}),D=async e=>{const t=await _.getReady(e),n=t.getLatest(),o=new Set([t]);return{value:O(e,n),dependencies:o,status:{valid:!0}}},M=o.provide({dependencies:[_],handler:{compute:D,recompute:async(e,t,n,o)=>{const{value:i}=await D(e.getId());return{changes:JSON.stringify(i)!==JSON.stringify(e.getLatest())?[(0,l.fullChange)(i)]:[],dependencies:o,status:(0,l.getDefaultStatusHandling)(e.getSerializedId(),o)}}}}),k=a.provide({dependencies:[C,g,_],results:[C,g],handler:{async query(e,t){var n;const o={compiledFileCount:0},i=new Set,r={},s=[],a=[],l={};for(const t of e.entries){const{resolvedFile:e}=j(m.getProjectPath(),t);e?s.push(e):(i.add(_.get(t)),a.push(t))}for(;s.length>0;){const a=s.filter((e=>void 0===r[e]));s.length=0;const d=await Promise.all(a.filter((e=>!l[e])).map((n=>g.getReady((0,c.compiledFileId)(n,e.excludeEditingTransformers),t))));for(const e of d)e&&(e.isValid()||(l[e.getId().filePath]=`Compilation error: ${e.getStatus().message}`),o.compiledFileCount++,i.add(e));const u=await Promise.all(a.filter((e=>!l[e])).map((e=>C.getReady(e,t))));for(const e of u)e.isValid()||(l[e.getId()]=`Request extraction error: ${null!==(n=e.getStatus().message)&&void 0!==n?n:"Failed to extract requests"}`),i.add(e);for(let e=0;e<u.length;e++){const t=u[e].getLatest();r[a[e]]=t;for(const e of Object.values(t))e&&s.push(e)}}const d=0===a.length&&0===Object.keys(l).length,u=["Compilation errors:"];d||(a.length>0&&u.push(`Couldn't resolve following paths for execution: ${a.join(",")} `),Object.keys(l).length>0&&u.push(JSON.stringify(l,null,2)));const f=await async function({bundlePlugins:e,id:t,dependencies:n,virtualFs:o,fs:i,compiledFilesManager:r,resource:s,dependencyResourceFactoryImpl:a,projectPath:l,runningBundleId:d}){const u={beforeEntry:[],afterEntry:[]};for(const f of e){const e=f.process(t,n);for(const[t,p]of Object.entries(e)){if(!p)continue;const e=`/code-execution-plugin-${d}-${f.id}-${t}.js`,y=i.join(l,e.slice(1));o.writeFileSync(e,p);const v=await r.getReady((0,c.compiledFileId)(y),s),g=await a.getReady(y,s);o.removeSync(e),n.add(v),n.add(g),u["before"===t?"beforeEntry":"afterEntry"].push(y)}}return u}({id:e,bundlePlugins:v,dependencies:i,virtualFs:b,fs:h,compiledFilesManager:g,resource:t,dependencyResourceFactoryImpl:C,projectPath:m.getProjectPath(),runningBundleId:R++});return w("executionRunMeta",o),{dependencies:i,results:i,status:{valid:d,message:d?void 0:u.join("\n")},metaData:f}}}}),q=async e=>{const t=new Set,n=new Set;return await S(e.filePath,e.exclude,t,n),t.add(e.filePath),{dependencies:n,value:[...t]}},I=f.provide({dependencies:[C],handler:{compute:q,async recompute(e){const{dependencies:t,value:n}=await q(e.getId());return{dependencies:t,changes:[(0,l.fullChange)(n)],status:(0,l.getDefaultStatusHandling)(e.getSerializedId(),t)}}}}),T=p.provide({dependencies:[M],handler:new d.DependencyGraphComputer(M)});return{resolver:{resolveFromFile:F,getLocalPackageVersion:function(e){const t=h.join(m.getProjectPath(),"package.json"),{resolvedRequest:n}=F(t,`${e}/package.json`);if(n)try{const{version:e}=h.readJsonFileSync(n);if("string"==typeof e)return e}catch{}}},resolveNodeRequest:j,dependencyResourceFactory:C,fileDependencyResourceFactory:M,executionResourceFactory:k,deepDependencies:I,fileDependencyGraphResourceFactory:T}}))},74161:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DependencyGraphComputer=void 0;const o=n(60814);t.DependencyGraphComputer=class{constructor(e){this.fileDependencyResourceFactory=e}async compute(e){const t=[],n={};for(const n of e)t.push(n);const o=new Set;for(;t.length>0;){const e=t.shift();if(!n[e]){n[e]={};const i=await this.fileDependencyResourceFactory.getReady(e);for(const[o,r]of Object.entries(i.getLatest()))n[e][o]=r,r&&t.push(r);o.add(i)}}return{value:n,dependencies:o,status:{valid:!0}}}async recompute(e){const{value:t,dependencies:n}=await this.compute(e.getId());return{changes:[(0,o.fullChange)(t)],dependencies:n,status:(0,o.getDefaultStatusHandling)(e.getSerializedId(),n)}}}},37024:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dependencyManipulator=void 0;const o=n(60814);t.dependencyManipulator={reducer:(e,t)=>({value:t.value,invertingChanges:[(0,o.fullChange)(e)]}),squasher:e=>[e[e.length-1]]}},47951:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(5163);o.__exportStar(n(37024),t),o.__exportStar(n(65084),t)},65084:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compiledFileId=void 0,t.compiledFileId=(e,t=!1)=>({filePath:e,outputLang:"javascript",excludeEditingTransformers:t})},80134:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCompiledFileExtention=void 0;const o=n(5163),i=n(93849),r=o.__importStar(n(32510)),s=o.__importDefault(n(93208)),c=o.__importStar(n(2206)),a=o.__importDefault(n(19608));t.defaultCompiledFileExtention=".compiled";const l=c.default.api.pluggableProjectConfig.entry({compiledFilesExtention:t.defaultCompiledFileExtention},"compilation");t.default=new i.Feature({id:"compilation",dependencies:[s.default.asEntity,c.default.asEntity,r.default.asEntity,a.default.asEntity],api:{compilationSlot:i.Slot.withType().defineEntity(c.processingEnv),compilationStore:i.Service.withType().defineEntity(c.processingEnv).allowRemoteAccess(),compiledFilesManager:(0,r.defineComputedResource)().defineEntity(c.processingEnv),compilationConfig:l}})},97569:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(80134);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(i).default}})},25447:(e,t,n)=>{e.exports=n(97569)},43934:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const o=n(5163);o.__exportStar(n(31434),t);var i=n(31434);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.__importDefault(i).default}})},2206:(e,t,n)=>{e.exports=n(43934)},60814:(e,t,n)=>{e.exports=n(73858)},73837:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(89102);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(i).default}})},89102:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(93849),i=n(2206);t.default=new o.Feature({id:"userApplicationServer",dependencies:[],api:{userApplicationServerInterface:o.Service.withType().defineEntity(i.processingEnv).allowRemoteAccess(),serverRootSlot:o.Slot.withType().defineEntity(i.processingEnv),applicationHandlerSlot:o.Slot.withType().defineEntity(i.processingEnv)},context:{serverInitializer:i.processingEnv.withContext()}})},19608:(e,t,n)=>{e.exports=n(73837)}}]);