(self.webpackChunk_wixc3_component_playground=self.webpackChunk_wixc3_component_playground||[]).push([[8538],{44943:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o229",a={root:"s1224",header:"s1225",headerActions:"s1226",actionIconButton:"s1227"},o={},i={},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},63553:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o290",a={root:"s1398"},o={},i={},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},82513:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o470",a={root:"s1396",singleScope:"s1853",breadcrumbsSep:"s1854",icon:"s1397",instanceNumber:"s1855"},o={},i={},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},50031:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o45",a={root:"s443",actionMenuComponentIcon:"s442"},o={},i={},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},99476:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o86",a={root:"s439",ellipsis:"s440",ellipsisIcon:"s441",actionMenuComponentIcon:"s442",chevronIcon:"s661"},o={},i={},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},74158:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o291",a={root:"s1399"},o={},i={},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},83788:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o33",a={root:"s336",lane:"s337",element:"s338",indentedNode:"s351",drillInTarget:"s339",nodeContainer:"s340",appearances:"s341",status:"s352",actions:"s342",actionIcon:"s343",editIcon:"s353",moreIcon:"s354",leftIcon:"s344",title:"s345",actionMenu:"s355",moreActions:"s356",iconButton:"s346",expandIcon:"s347",spaceNoExpand:"s348",errorPimple:"s349",descendantErrorPimple:"s350",contextMenuDropPanel:"s357"},o={},i={},l={markerHeight:"--elementstreenode856597527-markerHeight",indentValue:"--elementstreenode856597527-indentValue",draggedAfterIndent:"--elementstreenode856597527-draggedAfterIndent",indentWidth:"--elementstreenode856597527-indentWidth"},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},35819:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o399",a={root:"s1699",divider:"s1700",backIcon:"s1701",editPreviewToggle:"s1702"},o={},i={"toggle-width":"30px","toggle-height":"17px","toggle-circle-size":"13px"},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},46216:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o292",a={root:"s1400",selectionBackground:"s669"},o={},i={},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},14134:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o87",a={root:"s662",line:"s663",hatLabels:"s664",hats:"s665",hat:"s666",hatContent:"s667",selectionIndication:"s668",selectionBackground:"s669",selectionBorder:"s670",markerName:"s671",endOfMarker:"s672",endOfLane:"s673"},o={},i={},l={selectionWidth:"--lane1078281264-selectionWidth",laneWidth:"--lane1078281264-laneWidth",hatGap:"--lane1078281264-hatGap",hatSize:"--lane1078281264-hatSize",hatIndex:"--lane1078281264-hatIndex",markerNameWidth:"--lane1078281264-markerNameWidth"},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},83774:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o46",a={root:"s444",lane:"s337"},o={},i={},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},60553:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o147",a={root:"s905"},o={},i={},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},24186:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o47",a={root:"s446"},o={},i={},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},73359:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o88",a={root:"s445",switch:"s674"},o={},i={},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},32215:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o293",a={root:"s1401"},o={},i={},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},36459:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o203",a={root:"s1117",showDetailsButton:"s1118"},o={},i={},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},78631:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o471",a={root:"s1856"},o={},i={},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},6378:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o89",a={root:"s678",draggedInto:"s675",childRect:"s677"},o={},i={},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},98125:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o294",a={root:"s1402"},o={},i={},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},3351:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o204",a={root:"s1119",title:"s1120",message:"s1121",showDetailsButton:"s1122"},o={},i={},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},48760:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o472",a={root:"s1857"},o={},i={},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},28637:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o124",a={root:"s846"},o={},i={},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},12491:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o148",a={root:"s844",title:"s767",titleContent:"s906",chevron:"s845",status:"s907",parentsContainer:"s768",actions:"s908",actionIcons:"s909",drillIntoScopeIcon:"s910",actionsMenuDropPanel:"s911"},o={},i={},l={tagHeight:"--highlight4036581385-tagHeight","border-width":"--highlighttitle4170237045-border-width"},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},31939:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o113",a={root:"s763",highlightFrame:"s676",content:"s764",titleContainer:"s765",highlightTitle:"s766",dimensions:"s769",dimensionsXIcon:"s770",width:"s771",height:"s772"},o={},i={},l={height:"--highlight4036581385-height",width:"--highlight4036581385-width","border-width":"--highlight4036581385-border-width",tagHeight:"--highlight4036581385-tagHeight"},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},86301:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o295",a={root:"s1403"},o={},i={},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},1890:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o48",a={root:"s447",croppedOverlay:"s448",uncroppedOverlay:"s449",scopeSelectionFrame:"s450",errorDetailsPopup:"s451"},o={},i={},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},53167:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>a,cssStates:()=>r,keyframes:()=>o,namespace:()=>n,st:()=>c,stVars:()=>i,style:()=>d,vars:()=>l});const n="o296",a={root:"s1407"},o={},i={},l={},r=s.stc.bind(null,n),d=s.sts.bind(null,n),c=d},30419:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(5163),a=n.__importStar(s(87363)),o=s(5689),i=s(60814),l=s(70268),r=n.__importDefault(s(89706)),d=s(70960),c=s(92613),u=s(17109),m=s(46342),p=s(4653),g=s(35819),h=s(95689),f=s(91647),v=s(350),S=s(81862),I=s(16042),E=s(9029),P=s(83135),T=s(69202),y=s(16107),b=s(54560),C=s(31037),N=s(93849),M=s(43189),w=s(48856),_=s(91727),x=s(44943),k=s(95874),D=s(75739),A=s(27051),O=s(56416),R=s(99003),F=s(68484),L=s(9255),V=s(9234),H=s(27941),B=s(94389),j=s(94796),W=s(91996),G=s(72447),z=s(84084),K=s(81156),Z=s(270);s(53167);const U=s(64196),J=s(98427);r.default.setup(o.mainEnv,(({run:e,onDispose:t,componentOutlineRenderer:s,treeItemRenderer:n,domPositions:o,panelHeaderSlot:$,panelHeaderActionsSlot:X,panelHeaderActionsSlotOrdering:q,domStructure:Q,elementsTreeConfig:Y,jsxTreeVisualizerSlot:ee,elementsSchemasManager:te,domPositionsManager:se,domStructureManager:ne,structureFilePathsManager:ae,elementsScopesResource:oe,elementsTreeManager:ie,treeViewStateResource:le,elementsScopesManager:re,elementsSelectionManager:de,simulatedComponentOwnerManager:ce,treeConfigManager:ue,stageOverlaySlot:me,panelHeaderSlotOrdering:pe,simulationElementRectsManager:ge,scopeSchemasManager:he,openScopeSchemas:fe,elementsTreeContextMenuSlot:ve,elementHatContextMenuSlot:Se},{gui:{dragManager:Ie,overlayPanelFactory:Ee},shortcuts:{actionService:Pe},simulation:{simulationTopBarSlot:Te,stageHeaderSlot:ye,leftBarMainViewSlot:be,windowOverlaySlot:Ce,fixedStageOverlaysSlot:Ne,simulationDrawerController:Me},reactResources:{createStateResource:we},simulationLog:{simulationLogController:_e},simpleAST:{idGenerator:xe,simpleASTMain:ke,simpleASTPluginRepo:De,remoteIdService:Ae},codeExecution:{deepDependenciesMain:Oe},simulationPreview:{simulationElementRects:Re},projectUI:{fileIconService:{getFileIconByFilePath:Fe}}})=>{const Le=he.consume({resourceConstructor:V.SchemasResource});ge.init((({previewId:e})=>({value:Re.consume({resourceConstructor:i.JSONResource},{id:e})}))),$.setSortingOrder(pe),X.setSortingOrder(q),se.init((({previewId:e})=>({value:o.consume({},{id:e})}))),ne.init((({previewId:e})=>({value:Q.consume({},{id:e})})));const Ve=ae.provide({handler:new h.StructureFilePathsComputer(Q),dependencies:[Q]}),He=we(u.StageMode.selection),Be=we(b.EditingDndResourceDefault),je=new b.EditingDndService(Ie,Be.resource);je.init(),t((()=>je.dispose()));const We=()=>{const[e,t]=He();return a.default.createElement(l.IconSwitch,{className:g.classes.editPreviewToggle,options:c.SELECTION_PREVIEW_TOGGLE_OPTIONS,selectedOption:e,onChange:t})};Pe.addAction({...y.actions.toggleEditPreview,handler:()=>{const e=(c.SELECTION_PREVIEW_TOGGLE_OPTIONS.findIndex((e=>e.id===He.resource.getLatest()))+1)%c.SELECTION_PREVIEW_TOGGLE_OPTIONS.length;He.resource.applyChange((0,i.fullChange)(c.SELECTION_PREVIEW_TOGGLE_OPTIONS[e].id))}}),t((()=>Pe.removeAction(y.actions.toggleEditPreview.name))),ye.register({Component:e=>a.default.createElement(We,{...e}),placement:"right"});const Ge=re.provide({handler:new O.ElementsScopesComputer(Q,Oe,ke,De),resourceConstructor:f.ElementsScopesResource,dependencies:[o,Q,ke]}),ze=de.provide({handler:new R.ElementsSelectionComputer(Q,Oe,ke,De),resourceConstructor:v.ElementsSelectionResource,dependencies:[o,Q]});oe.init((({compExportName:e,compFilePath:t,previewId:s,simulationFilePath:n})=>{const a={},o=n?Ge.get({compExportName:e,compFilePath:t,previewId:s,simulationFilePath:n,simulationScopeEnabled:Y.simulationScope},a):void 0;return{value:o,dispose(){null==o||o.release(a)}}})),le.init((()=>{const e=(0,H.createJSONResource)(F.defaultTreeViewsState);return e.use(r.default),{value:e,dispose:()=>e.release(r.default)}})),fe.init((({simulationFilePath:e,compFilePath:t,compExportName:s,previewId:n},{editing:{scopeSchemasManagerMain:a}})=>({value:{use:()=>{const o=(0,I.useVisibility)(),i=(0,H.useResourceValue)({resourceManager:Ge,defaultValue:[],resourceId:e?{compExportName:s,compFilePath:t,previewId:n,simulationFilePath:e,simulationScopeEnabled:Y.simulationScope}:void 0,enabled:o}),{schemas:l}=(0,H.useResources)({schemas:{defaultValue:{},resourceManager:a,ids:i.map((e=>({astNodeId:e.astId,filePath:e.astFilePath})))}});return i.reduce(((e,t)=>(e[t.astFilePath+"#"+t.astId]=l.getResource({astNodeId:t.astId,filePath:t.astFilePath}),e)),{})||{}}}})));const Ke=[...u.parsers];s.stream((e=>{e.extraParsers&&Ke.push(...e.extraParsers)}));const Ze=({dragData:e,dropData:t})=>{const s=ke.get({filePath:t.filePath,parsers:Ke}),n=De.getASTInfo(s.getLatest());(0,C.moveNodeToDropPoint)(t,n,e,xe.generateId,s).then((e=>{e&&je.dropSucceeded({filePath:t.filePath,nodeId:e})})).catch(N.reportError)};je.on("drop",Ze),t((()=>je.off("drop",Ze)));const Ue=te.consume({resourceConstructor:V.SchemasResource}),Je=we(Y.showOnlyActiveLayersDefault),$e=we([]),Xe=ce.provide({handler:new B.SimulatedComponentOwnerComputer(Q,Oe,ke,Ke,De),dependencies:[Q,Oe,ke]}),qe=ue.provide({handler:new j.TreeConfigComputer(ke,Ke),dependencies:[ke]}),Qe=ie.provide({handler:new W.ElementsTreeComputer(Q,Ge,ke,Ke,De,qe,Ve,Y.simulationScope),dependencies:[Q,Ge,ke,qe,Ve]});if(be.register({id:c.ELEMENTS_TREE_SECTION_ID,Header:function(){return a.default.createElement(p.ElementsTreeHeader,{panelHeaderSlot:$})},Content:function(e){const t=(0,a.useMemo)((()=>[...s].reverse()),[]);return a.default.createElement(M.ElementsTreeContainer,{...e,visualizers:t})}}),Y.enableShowOnlyActiveLayersSwitch){const e=()=>{const{editing:{useShowHiddenElements:e}}=(0,E.useMainContext)(),{close:t}=(0,P.useOverlay)(D.SHOW_ACTIVE_ELEMENTS_ID,D.SHOW_ACTIVE_ELEMENTS_ID),[s,n]=e();return a.default.createElement(w.ShowActiveElementsSwitch,{onClose:t,toggled:s,onToggle:n})};Ee.register({id:D.SHOW_ACTIVE_ELEMENTS_ID,factory:function(){return a.default.createElement(e,null)}}),$.register({id:D.SHOW_ACTIVE_ELEMENTS_ID,component:function(){const e=(0,a.useRef)(null),{open:t}=(0,P.useOverlay)(D.SHOW_ACTIVE_ELEMENTS_ID,D.SHOW_ACTIVE_ELEMENTS_ID,e,{},"anchor-overlay-config");return a.default.createElement(l.Tooltip,{content:k.content.showOnlyActiveLayers.actions},a.default.createElement(_.IconButton,{onClick:e=>{e.stopPropagation(),t()},className:x.classes.actionIconButton,buttonRef:e},a.default.createElement(T.MoreSmallIcon,null)))}})}Te.register((()=>{const e=(0,I.useVisibility)(),{scannedStructure:t}=(0,Z.useScannedStructure)({enabled:e}),{scopes:s,resource:n}=(0,S.useElementsTreeScopes)({enabled:e}),o=(0,a.useCallback)((e=>{((e,t)=>{t.exitToScope(e)})(e,n)}),[n]),l=(0,a.useCallback)(((e,s)=>{(async(e,t,s,n)=>{t||s.exitToScope(e);const{getResourceLatestValue:a,release:o}=(0,i.getResourceLatestValueFactory)(ke),l=s.getScopes(),r=l[l.length-1],d=l[l.length-2],c=d.domNodeId,u=void 0!==c?n.structuresByStructureIds[c]:void 0,p=await(0,m.getAllInstancesOfOwner)(u,{astNodeId:r.astId,astFilePath:r.astFilePath},{astNodeId:d.astId,astFilePath:d.astFilePath},(e=>a({filePath:e,parsers:Ke})),De);s.changesScopeIndex(p[(r.instanceIndex+1)%p.length].id),o()})(e,s,n,t)}),[n,t]);return s.length?a.default.createElement(A.ElementsBreadcrumbs,{getFileIconByPath:Fe,onInstanceClick:l,onScopeClick:o,elementsScopes:s}):null}));const Ye=({previewId:e,drawerId:t,error:s})=>{Me.open(t,K.LOG_ID),(s?(0,G.safeModeErrorToStrings)(s):[]).forEach((t=>{t&&_e.showMessage(e,z.CodeExecutionMessageType.consoleError,t)}))};return Ce.register({Component:()=>a.default.createElement(d.StageOverlays,{overlaySlot:me,onShowErrorDetails:Ye})}),Ne.register((()=>a.default.createElement(L.CircularRenderingWarning,{onShowErrorDetails:Ye}))),(0,U.registerElementsTreeContextMenuActions)(ve,Ae,xe,ke,Ke),(0,J.registerElementHatContextMenuActions)(Se,Ae),e((()=>{const e=(0,m.elementsTreeVisualizers)(ee);for(const t of e)s.register(t);for(const t of e)n.register(t)})),{scopeSchemasManagerMain:Le,elementsSchemasManagerMain:Ue,elementsScopesManager:Ge,elementsScopesResource:oe,elementsSelectionManager:ze,elementsTreeManager:Qe,simulatedComponentOwnerManager:Xe,treeConfigManager:qe,structureFilePathsManager:Ve,useEditingDndResource:Be,editingDndService:je,simpleASTParsers:{get:()=>Ke},useStageMode:He,useShowHiddenElements:Je,useCurrentHighlights:$e}}))},43189:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementsTreeContainer=void 0;const n=s(5163).__importStar(s(87363)),a=s(69202),o=s(86153),i=s(18413),l=s(53778),r=s(46342),d=s(8777);t.ElementsTreeContainer=({simManager:e,previewEnvId:t,visualizers:s})=>{const c=(0,n.useRef)(new Set),{simpleAST:{simpleASTPluginRepo:u,idGenerator:m,simpleASTMain:p},editing:{domStructureManager:g,domPositionsManager:h,editingDndService:f,useCurrentHighlights:v}}=(0,i.useSimulationTabContext)(),{resource:S}=(0,r.useElementsTreeSelection)({enabled:!0}),[,I]=v(!1),E=(0,n.useCallback)((()=>I([])),[I]),P=(0,l.useHighlightNodeById)(),T=null==e?void 0:e.getSimulationPath();(0,a.usePreviousValueEffect)(T,(0,n.useCallback)((()=>{T&&E()}),[E,T]));const y=(0,d.useSelectCodeInDrawer)();return t&&e&&g&&h&&S?n.default.createElement(o.ElementsTree,{visualizers:s,selectCodeById:y,highlightNodeById:P,clearHighlights:E,generateID:m.generateId,simpleAST:p,domPositions:h,pluginRepo:u,editingDndService:f,visitedScopesRef:c}):null}},4653:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementsTreeHeader=void 0;const n=s(5163),a=s(16042),o=n.__importDefault(s(87363)),i=s(81862),l=s(95874),r=s(44943);t.ElementsTreeHeader=e=>{const{className:t,panelHeaderSlot:s}=e,{lastSelectionScope:n}=(0,i.useElementsSelection)({enabled:(0,a.useVisibility)()}),d=null==n?void 0:n.scope;return o.default.createElement("div",{className:(0,r.style)(r.classes.root,t)},o.default.createElement("span",{className:r.classes.header},l.content.panel.header),o.default.createElement("div",{className:r.classes.headerActions},d&&[...s].map((({component:e},t)=>o.default.createElement(e,{key:t,filePath:d.astFilePath,functionId:d.astId,displayName:d.displayName})))))}},89194:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Breadcrumb=void 0;const n=s(5163).__importStar(s(87363)),a=s(82513),o=s(69202);s(63553);const i=s(70268),l=s(9240);t.Breadcrumb=(0,n.memo)((function({scope:e,className:t,onInstanceClick:s,onScopeClick:r,isLast:d,GetFileIconByPath:c}){const u=(0,n.useMemo)((()=>c&&c(e.astFilePath)),[c,e.astFilePath]),m=e.displayName||(0,l.deriveComponentNameFromPath)(e.astFilePath);return n.default.createElement("div",{className:(0,a.style)(a.classes.root,t)},n.default.createElement("div",{className:a.classes.singleScope,title:e.displayName,onClick:()=>{r(e)}},u&&n.default.createElement(u,{className:a.classes.icon}),n.default.createElement(i.EllipsisWithTooltip,null,m),e.instanceAmount>1&&n.default.createElement("span",{className:a.classes.instanceNumber,onClick:t=>{t.stopPropagation(),s(e,d)}}," ","(",e.instanceIndex+1,"/",e.instanceAmount,")")),n.default.createElement("div",{className:a.classes.breadcrumbsSep}," ",!d&&n.default.createElement(o.ChevronRightWixUiIcon,null)," "))}))},27051:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementsBreadcrumbs=void 0;const n=s(5163).__importStar(s(87363)),a=s(89194),o=s(99476),i=s(83135),l=s(16042),r=s(69202),d=s(70268);s(50031);const c=s(36150),u=s(39906);t.ElementsBreadcrumbs=(0,n.memo)((function({elementsScopes:e,className:t,onInstanceClick:s,onScopeClick:m,getFileIconByPath:p}){const g=(0,l.useVisibility)(),[h,f]=(0,n.useState)(!1),[v,S]=(0,n.useState)(0),[I,E]=(0,n.useState)(0);(0,n.useLayoutEffect)((()=>{h&&e.length<v&&f(!1),S(e.length)}),[h,v,e.length]);const P=(0,i.useResizeObserver)((({clientWidth:e,scrollWidth:t})=>{(!h||e>I)&&(E(e),f(e<t))}),g),T=(0,n.useMemo)((()=>{if(h&&e.length>3){const[t]=e,s=e.slice(1,-2),[n,a]=e.slice(-2);return{firstBreadcrumb:t,restOfTheBreadcrumbs:s,oneBeforeLastBreadcrumb:n,lastBreadcrumb:a}}}),[h,e]),y=(0,n.useMemo)((()=>T?T.restOfTheBreadcrumbs.map((e=>({data:{item:e.displayName,icon:n.default.createElement(u.ThemedComponentIcon,{className:o.classes.actionMenuComponentIcon}),action:()=>m(e)}}))):[]),[m,T]),b=(0,n.useCallback)((({data:e})=>{var t;null===(t=e.action)||void 0===t||t.call(e)}),[]);return n.default.createElement("div",{ref:P,className:(0,o.style)(o.classes.root,t)},h&&T?n.default.createElement(n.default.Fragment,null,n.default.createElement(a.Breadcrumb,{scope:T.firstBreadcrumb,isLast:!1,onInstanceClick:s,onScopeClick:m,GetFileIconByPath:p}),n.default.createElement(d.ActionMenu,{menuItems:y,onAction:b},n.default.createElement("div",{className:o.classes.ellipsis},n.default.createElement(r.MoreSmallIcon,{className:o.classes.ellipsisIcon}))),n.default.createElement(r.ChevronRightWixUiIcon,{className:o.classes.chevronIcon}),n.default.createElement(a.Breadcrumb,{scope:T.oneBeforeLastBreadcrumb,isLast:!1,onInstanceClick:s,onScopeClick:m,GetFileIconByPath:p}),n.default.createElement(a.Breadcrumb,{scope:T.lastBreadcrumb,isLast:!0,onInstanceClick:s,onScopeClick:m,GetFileIconByPath:p})):e.map(((t,o)=>n.default.createElement(a.Breadcrumb,{key:(0,c.createNodeAstKey)(t.astFilePath,t.astId),scope:t,isLast:o===e.length-1,onInstanceClick:s,onScopeClick:m,GetFileIconByPath:p}))))}))},54837:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementsTreeNodeContainer=void 0;const n=s(5163),a=n.__importStar(s(87363)),o=s(54560),i=s(69202),l=n.__importDefault(s(75300)),r=s(53030),d=s(16042),c=s(58383),u=s(58464),m=s(17109),p=s(58172),g=s(31163),h=s(15719),f=s(43192),v=s(93225),S=s(9029),I=s(54917),E=s(16107),P=s(81862),T=s(18413),y=s(74765);t.ElementsTreeNodeContainer=({actions:e,appearances:t,dataItem:s,dataItemId:n,deleteNode:C,isExpanded:N,ItemRenderer:M,dropHighlight:w,parentTreeItem:_,root:x,startDragNode:k,visualizers:D,stageMode:A,treeHats:O,dragData:R})=>{const{editing:{useShowHiddenElements:F,elementsTreeConfig:L,jsxTreeStatusVisualizerSlot:V,elementsTreeContextMenuSlot:H}}=(0,S.useMainContext)(),B=(0,a.useRef)(null),j=(0,i.useIsMountedRef)(),W=(0,d.useVisibility)(),G=(0,g.useToggleExpanded)(),z=(0,g.useSetCurrentItemId)(),[K]=F(W),{selectionResource:Z}=(0,P.useElementsSelection)({enabled:W}),{editing:{useCurrentHighlights:U},simulation:{simulationData:{simulationFilePath:J,eventEmitter:$}}}=(0,T.useSimulationTabContext)(),[X]=U(W),q=x.filePath,Q=J,Y=(0,a.useMemo)((()=>X.some((e=>{var t;return e.nodeId===(null===(t=s.node)||void 0===t?void 0:t.astNodeId)&&e.domNodeId===s.domNodeId&&e.filePath===q}))),[X,s,q]),ee=s.node,te=!!s.definedAt,se=_?D.find((e=>e.kind===(null==_?void 0:_.kind))):void 0,ne=(0,a.useMemo)((()=>function(e,t,s,n,a,o,i){const l={item:t,parent:n,filePath:s,drawerId:a,config:o,eventEmitter:i};return(0,y.convertSlotEntriesToActions)([...e],l)}(H,s,q,_,Q,L,$)),[H,s,q,_,Q,L,$]);(0,c.useEffectOnSelectionChanged)((0,a.useCallback)((e=>{B.current&&ee&&(null==e?void 0:e.astFilePath)===q&&(null==e?void 0:e.astId)===ee.astNodeId&&requestAnimationFrame((()=>{j.current&&B.current&&(0,l.default)(B.current,{behavior:"smooth",block:"nearest",inline:"nearest"})}))}),[ee,q,j]),{filter:e=>"elements-tree"!==e,enabled:W});const ae=(0,h.useNodeSelectionState)(W,s),oe=(0,a.useCallback)((()=>{var e,t;const s=null===(e=null==Z?void 0:Z.getSelection())||void 0===e?void 0:e.selection;ae===h.SelectionStates.Active&&s&&C&&!(0,u.isSimulationEntityNode)({id:null!==(t=s.id)&&void 0!==t?t:"",kind:s.kind})&&C(s.astId)}),[C,Z,ae]);(0,I.useShortcut)(E.shortcuts.deleteNode,oe,{scope:E.ELEMENTS_TREE_SCOPE});const ie=(0,a.useCallback)((()=>{if(!R&&(z(n),A===m.StageMode.selection))if(ee)e.outlineNode(q,ee.astNodeId,s.domNodeId);else if(s.definedAt){const t=s.definedAt.selection||s.definedAt.scope;e.outlineNode(t.astFilePath,t.astId,s.domNodeId)}}),[R,z,n,A,ee,s,e,q]),le=(0,a.useCallback)((()=>{R||(z(""),e.clearNodeOutline())}),[e,R,z]),re=(0,a.useCallback)((()=>{if(s.node)e.selectNode({kind:"in-scope",astFilePath:q,astId:ee?ee.astNodeId:s.id,domNodeId:s.domNodeId,id:s.id});else{const t=s.generatedAtAstId;t&&e.selectNode({kind:"out-of-scope",astFilePath:q,astId:t,domNodeId:s.domNodeId,id:s.id})}}),[e,s,ee,q]),de=(0,a.useCallback)((e=>{L.editMode&&ee&&(0,f.canDetachFromParent)(ee,null==_?void 0:_.node)&&k(e.nativeEvent,(0,o.draggedExistingNode)({nodeId:ee.astNodeId,filePath:q,itemId:n.toString()}))}),[L.editMode,ee,null==_?void 0:_.node,k,q,n]),ce=(0,a.useCallback)((e=>{de(e),re()}),[re,de]),ue=(0,a.useCallback)((e=>{e.stopPropagation(),G(n)}),[n,G]),me=(0,a.useCallback)((t=>{var n;t.stopPropagation(),s.definedAt&&e.enterScope(null===(n=s.definedAt)||void 0===n?void 0:n.scope,s.definedAt.selection)}),[e,s.definedAt]),pe=(0,a.useCallback)((t=>{var n,a;t.stopPropagation(),s.instanceDefinedAt&&e.exitToScope(null===(n=s.instanceDefinedAt)||void 0===n?void 0:n.scope,null===(a=s.definedAt)||void 0===a?void 0:a.selection)}),[e,s]),ge=(0,a.useCallback)((()=>(null==se?void 0:se.relationRenderer)&&_?a.default.createElement(se.relationRenderer,{parentNode:_,child:s,root:x}):null),[se,s,_,x]),he=(0,a.useCallback)((()=>a.default.createElement(M,{item:s,root:x,exitScope:pe})),[M,s,x,pe]),fe=(0,u.shouldHideTreeNode)(s,K),{lanes:ve,hats:Se}=(0,p.useElementItemLanes)(s,!fe,O),Ie=!!ee&&(null==w?void 0:w.parentId)===ee.astNodeId,Ee=(null==w?void 0:w.afterItemId)===s.id,Pe=Ie&&Ee?ve.length:(null==w?void 0:w.ident)?ve.length-(null==w?void 0:w.ident):ve.length-1;b(Ie,N,n,G);const Te=(0,a.useMemo)((()=>0!==(0,v.getFirstVisibleChildren)(s).length),[s]);return fe?null:a.default.createElement(r.ElementsTreeNode,{hasMarker:Se[0]&&(0,u.isPropItem)(Se[0]),itemRef:B,dataItem:s,filePath:q,nodeId:n.toString(),isExpanded:N,onEnterScope:me,onMouseEnter:ie,onMouseDown:ce,onMouseLeave:le,draggedInto:Ie,draggedAfter:Ee,draggedAfterIndent:Pe,hasScope:te,hasChildren:Te,isSelected:ae===h.SelectionStates.Active,isPassivelySelected:ae===h.SelectionStates.Passive,isHighlighted:Y,ParentRenderer:ge,onToggle:ue,actions:ne,appearances:t,ItemRenderer:he,hats:Se,lanes:ve,jsxTreeStatusVisualizerSlot:V})};const b=(e,t,s,n,o=1e3)=>{(0,i.usePreviousValueEffect)(e,(0,a.useCallback)((a=>{const i=a||!e||t?void 0:window.setTimeout((()=>n(s)),o);return()=>{i&&window.clearTimeout(i)}}),[o,e,t,n,s]))}},53030:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementsTreeNode=void 0;const n=s(5163),a=s(69202),o=s(15707),i=s(38819),l=s(30896),r=s(70268),d=n.__importDefault(s(87363)),c=s(17109),u=s(95874),m=s(14929),p=s(55708),g=s(39503),h=s(83788);s(74158),t.ElementsTreeNode=({nodeId:e,actions:t,itemRef:s,hasScope:n,isExpanded:f,isSelected:v,isPassivelySelected:S,isHighlighted:I,hasChildren:E,appearances:P,dataItem:T,ItemRenderer:y,ParentRenderer:b,jsxTreeStatusVisualizerSlot:C,onToggle:N,onMouseLeave:M,onMouseDown:w,onMouseEnter:_,onEnterScope:x,lanes:k,hats:D,hasMarker:A=!1,draggedInto:O,draggedAfter:R,draggedAfterIndent:F})=>d.default.createElement(l.TreeViewItemRoot,{className:(0,h.style)(h.classes.root,{selected:v,passiveSelected:S,notOnStage:0===P,draggedInto:O,draggedAfter:R,hasMarker:A,isHighlighted:I}),"data-dragged-after-indent":F,style:{[h.vars.draggedAfterIndent]:(F+.5)*m.LANE_WIDTH+"px"},onMouseEnter:_,onMouseLeave:M,onMouseDown:w,interactionTriggeringEvent:i.ListViewItemInteractionTriggeringEvent.Click,"aria-selected":v},d.default.createElement("div",{ref:s,className:h.classes.indentedNode,"data-indent":k.length},d.default.createElement(r.ActionMenu,{behaviours:(0,o.dropPanelOpenerCreateContextMenuBehaviours)(),menuItems:t,dropPanelClassName:h.classes.contextMenuDropPanel},d.default.createElement(d.default.Fragment,null,d.default.createElement(p.Lanes,{hats:D,item:T,itemRef:s,lanes:k}),d.default.createElement("div",{"data-node-id":e,"data-has-scope":n,className:h.classes.element},E?d.default.createElement(a.ChevronDownWixUiIcon,{className:(0,h.style)(h.classes.expandIcon,{expanded:f}),onClick:N}):d.default.createElement("div",{className:(0,h.style)(h.classes.spaceNoExpand)}),d.default.createElement("div",{className:h.classes.nodeContainer},d.default.createElement(y,null)),d.default.createElement(g.ErrorPimple,{treeItemData:T,treeItemIsExpanded:f,treeItemHasChildren:E}),d.default.createElement("div",{className:h.classes.status},T.node&&C&&[...C].map((({renderer:e},t)=>d.default.createElement(e,{key:t,value:{node:T.node},origin:c.ElementTreeVisualizerOrigin.ElementTree})))),b?d.default.createElement(b,null):null,d.default.createElement("div",{className:(0,h.style)(h.classes.actions)},n&&d.default.createElement(r.Tooltip,{content:u.content.nodeActions.editComponent},d.default.createElement(r.IconButton,{className:h.classes.iconButton},d.default.createElement(a.EditSmallIcon,{className:(0,h.style)(h.classes.actionIcon,h.classes.editIcon),onClick:x}))),d.default.createElement(r.ActionMenu,{onClick:e=>e.stopPropagation(),menuItems:t,className:h.classes.moreActions},d.default.createElement(r.IconButton,{className:h.classes.iconButton},d.default.createElement(a.MoreSmallIcon,{className:(0,h.style)(h.classes.actionIcon,h.classes.moreIcon)})))))))))},39503:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorPimple=void 0;const n=s(5163),a=s(70268),o=n.__importDefault(s(87363)),i=s(95874),l=s(86808),r=s(83788);t.ErrorPimple=({treeItemData:e,treeItemIsExpanded:t,treeItemHasChildren:s})=>e.error?o.default.createElement(a.Tooltip,{content:(0,l.getSafeModeErrorTooltip)(e.error)},o.default.createElement("div",{className:r.classes.errorPimple})):!e.hasErrorInDescendants||s&&t?null:o.default.createElement(a.Tooltip,{content:i.content.safeModeTooltips.descendantError},o.default.createElement("div",{className:r.classes.descendantErrorPimple}))},1746:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementsTreeView=void 0;const n=s(5163),a=s(91570),o=s(38819),i=s(30896),l=n.__importStar(s(87363)),r=s(35819);t.ElementsTreeView=(0,l.memo)((({treeViewState:e,treeRef:t,renderItem:s,treeNodes:n,rootRef:d})=>l.default.createElement("div",{className:r.classes.root,ref:d},l.default.createElement(i.TreeView,{ref:t,toggledTreeViewItemState:i.ToggledTreeViewItemState.Collapsed,renderItem:s,selectionType:o.ListViewSelectionType.Single,treeViewState:e,onChange:a.noop},n)))),t.ElementsTreeView.displayName="ElementsTreeView"},86153:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementsTree=void 0;const n=s(5163).__importStar(s(87363)),a=s(54837),o=s(30896),i=s(83135),l=s(58464),r=s(81862),d=s(1746),c=s(99610),u=s(69202),m=s(36150),p=s(49642),g=s(16107),h=s(5487),f=s(44210),v=s(16042),S=s(18413),I=s(27941),E=s(34383),P=s(60982),T=s(77410),y=s(24657),b=s(23766);t.ElementsTree=({editingDndService:e,pluginRepo:t,highlightNodeById:s,selectCodeById:C,generateID:N,visualizers:M,clearHighlights:w,simpleAST:_,visitedScopesRef:x})=>{var k;const{editing:{useStageMode:D,useEditingDndResource:A,treeViewStateResource:O,useCurrentHighlights:R}}=(0,S.useSimulationTabContext)(),F=(0,v.useVisibility)(),[{dragData:L}]=A(F),[V]=(0,I.useResourceState)({resource:O,enabled:F}),{selection:H,resource:B,manager:j}=(0,r.useElementsTreeSelection)({enabled:F}),{resource:W}=(0,r.useElementsTreeScopes)({enabled:F}),G=W.getCurrentScope(),[,z]=R(!1),[K]=D(F),Z=(0,u.useDisposableSet)(),U=(0,p.useGetAstResId)(),{shortcutService:J}=(0,n.useContext)(i.AreasContext);(0,n.useEffect)((()=>{const e=()=>null==B?void 0:B.clearSelection();return J.on(g.shortcuts.clearSelection,e),()=>J.off(g.shortcuts.clearSelection,e)}),[B,J]);const $=(0,n.useMemo)((()=>G?U(G.astFilePath):void 0),[U,G]),X=(0,T.useStructureFilePaths)(),{sourceAST:q}=(0,I.useResources)((0,n.useMemo)((()=>({sourceAST:{resourceManager:_,defaultValue:{resources:[]},ids:[...X].map(U)}})),[X,U,_])),Q=(0,n.useCallback)(((e,t,s)=>{q.getResource($).applyModification(e,t,s)}),[$,q]),Y=(0,n.useMemo)((()=>({change:Q,clearNodeOutline:w,generateId:N,outlineNode:s,selectCodeById:C,selectNode:e=>{(function(e,t){const s=null==e?void 0:e.selection;return(null==s?void 0:s.astId)===(null==t?void 0:t.astId)&&(null==s?void 0:s.astFilePath)===(null==t?void 0:t.astFilePath)&&(null==s?void 0:s.domNodeId)===(null==t?void 0:t.domNodeId)})(H,e)||(z([]),null==B||B.setSelection(e,"elements-tree"))},enterScope:e=>{W.addInternalScope(e)},exitToScope:(e,t)=>{W.exitToScope(e),j.get({scopeAstNodeId:e.astId,scopeFilePath:e.astFilePath,scopePreviewId:W.getId().previewId}).setSelection(t)}})),[Q,w,N,s,C,W,H,B,j,z]),ee=(0,n.useMemo)((()=>({item:e,root:t})=>{const s=M.find((t=>t.kind===e.kind));return s?n.default.createElement(s.renderer,{value:e,actions:Y,RenderChild:ee,root:t,origin:m.ElementTreeVisualizerOrigin.ElementTree,filePath:t.filePath}):n.default.createElement("div",{key:e.id},(0,l.getTreeItemTitle)(e))}),[Y,M]),{rootNodes:te,parentMapping:se}=(0,b.useElementsTree)({enabled:F});(0,E.useDefaultToggledState)({currentScope:G,rootNodeId:null===(k=te[0])||void 0===k?void 0:k.id,treeParentMapping:se,visitedScopesRef:x});const ne=(0,n.useCallback)((()=>{J.removeScope(g.ELEMENTS_TREE_SCOPE)}),[J]),ae=(0,n.useCallback)((()=>{J.setScope(g.ELEMENTS_TREE_SCOPE)}),[J]),oe=(0,i.useClickInArea)({onClickInside:ae,onClickOutside:ne}),ie=(0,n.useRef)(null),le=(0,n.useCallback)((e=>{var t;return null===(t=ie.current.getDataItemById(e))||void 0===t?void 0:t.treeNodeDataItem}),[]),{dropHighlight:re}=(0,P.useTreeDragAndDrop)({dropTargetRef:oe,getTreeItemById:le,rootNodes:te,astFilePath:null==G?void 0:G.astFilePath,astInfo:t.getASTInfo(q.getValue($))});(0,f.useExpandSelectedTreeItemBranch)(null==H?void 0:H.selection);const de=(0,n.useMemo)((()=>{if(te)return o.TreeViewSlots.renderItem().provide(a.ElementsTreeNodeContainer,{props:s=>{const n=s.dataItem,a=q.getResource($)&&G?{filePath:G.astFilePath,scannedInfo:t.getASTInfo(q.getValue($))}:{},o=se.get(n);let i;const l=null==o?void 0:o.node,r=G&&(()=>N(G.astFilePath));return o&&l&&r&&(i=e=>{const t=(0,h.getModificationToRemoveChild)(l,e,r)[0];Q(l,t.modification,t.modificationArgs)}),{...s,actions:Y,ItemRenderer:ee,currentScope:G,appearances:n.appearances,dataItem:s.dataItem,dataItemId:n.id,selectedNodeId:"",dropHighlight:re,treeHats:Z,startDragNode:(t,s)=>e.startDrag(t,s),deleteNode:i,visualizers:M,root:a,parentTreeItem:o,stageMode:K,dragData:L}}})}),[L,N,te,q,$,G,t,se,Y,ee,re,Z,M,K,Q,e]);return 0===te.length?n.default.createElement(y.TreeShimmer,null):n.default.createElement(c.LaneContextProvider,null,n.default.createElement(d.ElementsTreeView,{treeNodes:te,treeRef:ie,renderItem:de,treeViewState:V,rootRef:oe}))}},58172:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useElementItemLanes=void 0;const n=s(87363),a=s(91570),o=s(92613),i=s(23335),l=s(9029);t.useElementItemLanes=(e,t,s)=>{const{editing:{useShowHiddenElements:r}}=(0,l.useMainContext)(),[d]=r(t);return(0,n.useMemo)((()=>{if(!t)return{hats:[],lanes:[]};const n=(0,i.resolveItemLanes)(e).map((e=>e.filter((e=>o.LANE_KINDS.has((0,i.resolveLaneKind)(e))))));return{lanes:n,hats:(0,i.hatsToShow)(e,(0,a.last)(n)||[],s,d)}}),[s,t,e,d])}},14929:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lane=t.LANE_WIDTH=void 0;const n=s(5163).__importStar(s(87363)),a=s(70268),o=s(23335),i=s(99610),l=s(14134);s(46216);const r=s(91570),d=s(9029),c=s(81862),u=s(16042),m=s(89562);t.LANE_WIDTH=18,t.Lane=(0,n.memo)((({laneTypes:e,hats:s,isClosestLane:p=!1,item:g,itemRef:h,className:f})=>{var v,S;const{highlightLane:I,highlightedLane:E,treeState:{toggledItemsIds:P}}=(0,n.useContext)(i.LaneContext),{editing:{useShowHiddenElements:T}}=(0,d.useMainContext)(),y=(0,u.useVisibility)(),{selectionResource:b,lastSelectionScope:C}=(0,c.useElementsSelection)({enabled:y}),N=(0,n.useMemo)((()=>e.find((e=>{var t;return e.id===(null===(t=null==C?void 0:C.selection)||void 0===t?void 0:t.id)}))),[e,null===(v=null==C?void 0:C.selection)||void 0===v?void 0:v.id]),[M]=T(),[w,_]=(0,n.useState)(0),x=(0,n.useRef)(null),k=(0,n.useRef)(null),D=(0,r.last)(e),A=!(!N||!e.some((e=>e.id===N.id))),O=!(!E||!e.some((e=>e.id===E.id))),R=E&&s.find((e=>e.id===E.id)),F=N&&s.find((e=>e.id===N.id));(0,n.useEffect)((()=>{if(x.current&&h.current&&A){const{x:e,width:t}=h.current.getBoundingClientRect(),{x:s}=x.current.getBoundingClientRect();_(e+t-s)}}),[x,h,A]);const L=(0,n.useMemo)((()=>!!A&&(0,o.isLastItemInLane)({item:g,predicate:e=>!!N&&N.id===e.id,toggledItemsIds:P,showActiveElements:M})),[A,g,N,M,P]),V=(0,n.useMemo)((()=>e.find((e=>(0,o.isLastItemInLane)({item:g,predicate:t=>e.id===t.id,toggledItemsIds:P,showActiveElements:M})))),[g,e,M,P]),H=(0,n.useMemo)((()=>(0,o.isLastItemInLane)({item:g,toggledItemsIds:P,predicate:e=>(0,m.isPropItem)(e)&&e===D,showActiveElements:M})),[g,P,M,D]),B=e=>t=>{var s;t.stopPropagation(),(null==N?void 0:N.id)!==e.id&&(null===(s=e.node)||void 0===s?void 0:s.astNodeId)&&(null==C?void 0:C.scope.astFilePath)&&(null==b||b.setSelection({astFilePath:C.scope.astFilePath,astId:e.node.astNodeId,kind:"in-scope",id:e.id}))},j=D?(0,o.resolveLaneKind)(D):"default",W=F?(0,o.resolveLaneKind)(F):"",G=E?(0,o.resolveLaneKind)(E):"",z=N?(0,o.resolveLaneKind)(N):"",K=p&&F&&!(0,m.isPropItem)(F),Z=p&&R&&!A&&E&&!(0,m.isPropItem)(E),U=s[0]&&(0,m.isPropItem)(s[0]),J=(null===(S=k.current)||void 0===S?void 0:S.getBoundingClientRect().width)||0,$=p&&!!s.length&&D&&U,X=D&&(0,m.isPropItem)(D)&&H;return n.default.createElement("div",{ref:x,className:(0,l.style)(l.classes.root,{hatsVisible:p&&!!s.length},f),"data-lane-kind":j,style:{[l.vars.selectionWidth]:w+"px",[l.vars.laneWidth]:t.LANE_WIDTH+"px"},onMouseEnter:()=>{(null==D?void 0:D.id)&&I(D)},onMouseLeave:()=>{I()},onMouseDown:D&&B(D),onContextMenuCapture:e=>{e.stopPropagation()}},n.default.createElement("div",{className:(0,l.style)(l.classes.line,{highlighted:O||A,kind:O?G:A?z:j}),onClick:E&&B(E)}),n.default.createElement("div",{className:l.classes.hatLabels},K?n.default.createElement("div",{className:(0,l.style)(l.classes.hatContent,{kind:W}),onClick:B(F)},n.default.createElement(a.EllipsisWithTooltip,null,(0,o.resolveLaneLabel)(F))):Z?n.default.createElement("div",{className:(0,l.style)(l.classes.hatContent,{kind:G}),onClick:B(E)},n.default.createElement(a.EllipsisWithTooltip,null,(0,o.resolveLaneLabel)(E))):$?n.default.createElement("div",{ref:k,className:(0,l.style)(l.classes.markerName,{isHighlighted:R===s[0],isSelected:F===s[0]})},s[0].name):null),n.default.createElement("div",{className:(0,l.style)(l.classes.hats,{hasMarker:D&&(0,m.isPropItem)(D)})},p&&s.map(((e,t)=>{return n.default.createElement("div",{className:(0,l.style)(l.classes.hat,{kind:(0,o.resolveLaneKind)(e),hasParent:!!e.parent,highlighted:R===e}),style:{[l.vars.hatIndex]:t},key:t,onMouseEnter:(s=e,()=>{E&&E.id!==s.id&&I(s)}),onClick:B(e)});var s}))),X&&n.default.createElement("div",{className:(0,l.style)(l.classes.endOfMarker,{isHighlighted:O,isSelected:A,hasMarker:U})}),V&&!X&&n.default.createElement("div",{className:(0,l.style)(l.classes.endOfLane,{isHighlighted:O,isSelected:(null==N?void 0:N.id)===V.id,kind:(0,o.resolveLaneKind)(V)})}),A&&n.default.createElement("div",{style:{[l.vars.markerNameWidth]:J+"px"},className:(0,l.style)(l.classes.selectionIndication,{kind:(0,o.resolveLaneKind)(N),hatsVisible:p&&!!s.length,isLast:L,hasMarker:s[0]&&U})}),X&&n.default.createElement("div",{className:(0,l.style)(l.classes.endOfMarker,{isHighlighted:O,isSelected:A,hasMarker:U})}),A&&n.default.createElement("div",{style:{[l.vars.markerNameWidth]:J+"px"},className:(0,l.style)(l.classes.selectionIndication,{kind:(0,o.resolveLaneKind)(N),hatsVisible:p&&!!s.length,isLast:L,hasMarker:s[0]&&U})},n.default.createElement("div",{className:(0,l.style)(l.classes.selectionBorder,{hasMarker:s[0]&&U})},n.default.createElement("div",{className:l.classes.selectionBackground}))))})),t.Lane.displayName="Lane"},55708:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lanes=void 0;const n=s(5163).__importStar(s(87363)),a=s(14929),o=s(83774),i=s(16042),l=s(9029);t.Lanes=(0,n.memo)((({className:e,lanes:t,hats:s,item:r,itemRef:d})=>{const c=(0,i.useVisibility)(),{editing:{useShowHiddenElements:u}}=(0,l.useMainContext)(),[m]=u(c);return n.default.createElement("div",{className:(0,o.style)(o.classes.root,e)},t.map(((e,i)=>n.default.createElement(a.Lane,{showActiveElements:m,key:i,className:o.classes.lane,laneTypes:e,item:r,itemRef:d,hats:s,isClosestLane:i===t.length-1}))))})),t.Lanes.displayName="Lanes"},21001:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElementsTreeDropData=t.getDragOverItemsData=void 0;const n=s(91570),a=s(83135),o=s(54560),i=s(23335),l=s(31037),r=s(43192),d=s(14929),c=({dropAfterItem:e,itemParent:t,astInfo:s,filePath:n})=>{const a=function(e,t,s){const n=p(e,t,(e=>e.parent)),a=n.node===e.node?t:n,o=a.inlinedParents.length?a.inlinedParents[0]:a.node,i=null==e?void 0:e.node;if(!i||!o)return;return{parentNode:i,childNode:p(i,o,(e=>s.byChild(e)))}}(t,e,s);if(a)return(0,o.dropAfterTarget)({filePath:n,parentId:a.parentNode.astNodeId,nodeId:a.childNode.astNodeId})},u=e=>{if(e)return e.node?e:u(e.parent)};function m({upperItemLanes:e,lowerItemLanes:t}){if(!e.length||!t.length)return;let s=Math.min(e.length,t.length)-1;for(;s>-1&&e[s]!=e[s];)s--;return e[s]}function p(e,t,s){const n=t&&s(t);if(!n)throw new Error("Not a descendant of parent");return n===e?t:p(e,n,s)}function g(e,t){if(!t.parent)throw new Error(`Tree item: ${t.id} id not a descendant of tree item: ${e.id}`);const s=t.parent;return!((0,n.last)(s.children)!==t)&&(t.parent===e||g(e,s))}t.getDragOverItemsData=(e,t,s)=>{const a=t();if(!a.length)return;const o=e.y<a[0].box.y,i=e.x<a[0].box.x||e.x>a[0].box.x+a[0].box.width;if(o||i)return;const r=(0,n.last)(a).box,c=e.y>r.y+r.height,m=c?a.length-1:(0,l.verticallyFindNodeIndexByPoint)(a,e);if(-1===m)return;const p=a[m],g=s(p.id),h=u(g);if(!(null==h?void 0:h.node))return;const f=!c&&e.y<p.box.y+1/3*p.box.height,v=f?a[m-1]:p,S=f?p:a[m+1],I=s(null==v?void 0:v.id),E=s(null==S?void 0:S.id);return{draggedOverTreeItem:g,draggedOverLaneIndex:Math.max(0,Math.round(.5+(p.box.x-e.x)/d.LANE_WIDTH)),upperTreeItem:I,lowerTreeItem:E}},t.getElementsTreeDropData=({dragData:e,isTreeItemCollapsed:t,astFilePath:s,astInfo:n,dragOverItemsData:{draggedOverTreeItem:l,draggedOverLaneIndex:d,upperTreeItem:u,lowerTreeItem:p}})=>{const h=l.node,f=t=>{const s=(0,a.isDragDataOfKind)("existing-node",e)?n.byId(e.nodeId):void 0;return s?s!==t&&(0,r.canAttachToParent)(s,n.nodeToParent.get(s),t):(0,r.isNodeAttachable)(t)},v=t(l.id),S=l.children.length>0;if(0===d&&(v||!S)&&f(h))return(0,o.dropInTarget)({filePath:s,parentId:h.astNodeId});const I=u?(0,i.resolveItemLanes)(u):void 0,E=p?(0,i.resolveItemLanes)(p):void 0;if(u&&I&&p&&E){if(I.length===E.length){const e=I.length-(d||1);let t,a=!0,o=e;for(;a&&o<I.length;){const s=m({upperItemLanes:I[o],lowerItemLanes:E[o]});a=!!s&&f(s.node)&&(o===e||g(s,u)),a&&(t=s,o++)}if(!a||!t)return;return c({itemParent:t,dropAfterItem:u,filePath:s,astInfo:n})}if(I.length>E.length){const e=I[I.length-(d||1)][0];if(!e||!f(e.node))return;return c({itemParent:e,dropAfterItem:u,filePath:s,astInfo:n})}if(I.length+1===E.length){if(!u.node||!f(u.node))return;return(0,o.dropInTarget)({filePath:s,parentId:u.node.astNodeId})}throw new Error("There should not be a 4th case of drag-over between 2 tree items")}if(u&&I){if(!p||!E){if(!I.length)return;const e=I[I.length-(d||1)][0];if(!f(e.node))return;return c({itemParent:e,dropAfterItem:u,filePath:s,astInfo:n})}throw new Error("last drag-over did not mach any case in `getElementsTreeDropData`")}}},24657:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TreeShimmer=void 0;const n=s(5163),a=s(70268),o=n.__importDefault(s(87363)),i=s(60553);t.TreeShimmer=function(){return o.default.createElement("div",{className:i.classes.root},o.default.createElement(a.Shimmer.Rect,null),o.default.createElement(a.Shimmer.Rect,null),o.default.createElement(a.Shimmer.Rect,null),o.default.createElement(a.Shimmer.Rect,null),o.default.createElement(a.Shimmer.Rect,null))}},60982:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTreeDragAndDrop=void 0;const n=s(87363),a=s(16042),o=s(83135),i=s(27941),l=s(31163),r=s(18413),d=s(21001),c=s(54560);t.useTreeDragAndDrop=({dropTargetRef:e,getTreeItemById:t,rootNodes:s,astFilePath:o,astInfo:l})=>{const{editing:{editingDndService:p,useEditingDndResource:g,treeViewStateResource:h}}=(0,r.useSimulationTabContext)(),f=(0,a.useVisibility)(),[v]=(0,i.useResourceState)({resource:h,enabled:f}),[{dragData:S,dropData:I}]=g(f),E=(0,n.useCallback)((e=>h.getLatest().toggledItemsIds.includes(e)),[h]);(0,c.useSelectDroppedNode)(),u(S,E);const P=(0,n.useMemo)((()=>{let t=[];return()=>(e.current&&!t.length&&(t=m(e.current)),t)}),[s,v]),T=(0,n.useRef)();(0,n.useEffect)((()=>{!I&&T.current&&(T.current=void 0)}),[I]);const y=(0,n.useMemo)((()=>{let e;return({dragOverItemsData:t,dragData:s})=>{const{current:n}=T;return n&&n.draggedOverTreeItem===t.draggedOverTreeItem&&n.draggedOverLaneIndex===t.draggedOverLaneIndex&&n.upperTreeItem===t.upperTreeItem&&n.lowerTreeItem===t.lowerTreeItem||!o||(T.current=t,e=(0,d.getElementsTreeDropData)({dragData:s,isTreeItemCollapsed:E,dragOverItemsData:t,astFilePath:o,astInfo:l})),e}}),[o,l,E]),b=(0,n.useCallback)((e=>{const s=(0,d.getDragOverItemsData)(e,P,t);if(s)return y({dragData:e.content,dragOverItemsData:s})}),[P,y,t]);return(0,c.useRegisterDropTargetToDndService)(p,e,b),{dropHighlight:(0,n.useMemo)((()=>{var e;const{current:t}=T;if(!I||!t)return null;const s={parentId:I.parentId,relation:"in"},{upperTreeItem:n,draggedOverLaneIndex:a}=t;if("ast-drop-after-target"===I.kind)return n?{...s,afterNodeId:I.nodeId,afterItemId:n.id,ident:a,relation:"after"}:null;const{draggedOverTreeItem:o}=t;return(null===(e=o.node)||void 0===e?void 0:e.astNodeId)!==I.parentId||!E(o.id)&&0!==o.children.length?(null==n?void 0:n.node)?{...s,afterNodeId:n.node.astNodeId,afterItemId:n.id,relation:"after"}:s:{...s,relation:"in"}}),[I,E,v])}};const u=(e,t)=>{const s=(0,l.useToggleExpanded)();(0,n.useEffect)((()=>{if((0,o.isDragDataOfKind)("existing-node",e)){const n=e.itemId;t(e.itemId)||s(n)}}),[e,t,s])},m=e=>[...e.querySelectorAll("[data-node-id]")].map((e=>({id:e.getAttribute("data-node-id"),box:e.getBoundingClientRect()}))).sort(((e,t)=>e.box.top-t.box.top))},48856:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShowActiveElementsSwitch=void 0;const n=s(5163).__importStar(s(87363)),a=s(83135),o=s(61955),i=s(95874),l=s(73359);s(24186),t.ShowActiveElementsSwitch=(0,n.memo)((({onClose:e,toggled:t,onToggle:s})=>{const r=(0,n.useCallback)(((e,t)=>!t.current||!t.current.contains(e)),[]),d=(0,a.useClickOutside)(r,e),c=(0,n.useCallback)((()=>{s(!t)}),[s,t]);return n.default.createElement("div",{className:(0,l.style)(l.classes.root),ref:d},n.default.createElement(o.Switch,{className:(0,l.style)(l.classes.switch),toggled:t,onToggle:c}),n.default.createElement("span",null,i.content.showOnlyActiveLayers.title))})),t.ShowActiveElementsSwitch.displayName="ShowActiveElementsSwitch"},9255:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CircularRenderingWarning=void 0;const n=s(5163).__importDefault(s(87363)),a=s(95874),o=s(270),i=s(57025),l=s(36459),r=s(63372);s(32215);const d=s(16042),c=s(18413),u=s(68036);t.CircularRenderingWarning=e=>{const{structure:t}=(0,o.useStructureResource)({enabled:(0,d.useVisibility)()}),{simulation:s}=(0,c.useSimulationTabContext)(),{previewId:m,simulationFilePath:p}=s.simulationData,g=t&&(0,i.findElementLimitErrorInDomStructures)(t),h=p;return g?n.default.createElement("div",{className:l.classes.root},n.default.createElement("div",null,a.content.circularRenderingWarning.message),n.default.createElement(u.Button,{className:(0,l.style)(r.classes.linkButton,l.classes.showDetailsButton),onClick:()=>e.onShowErrorDetails({previewId:m,error:g,drawerId:h})},a.content.circularRenderingWarning.showDetailsButtonText)):null}},55752:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClickableFrames=void 0;const n=s(5163).__importStar(s(87363)),a=s(60814),o=s(64835),i=s(58464),l=s(27673),r=s(54560),d=s(69202),c=s(78631),u=s(270),m=s(16042),p=s(81862),g=s(18413),h=s(53778);t.ClickableFrames=(0,n.memo)((({clickableFrames:e})=>{const{editing:{useCurrentHighlights:t}}=(0,g.useSimulationTabContext)(),[,s]=t(!1),f=function(e){const t=(0,m.useVisibility)(),{scannedStructure:s,structure:l}=(0,u.useScannedStructure)({enabled:t}),{selectionScopes:c}=(0,p.useElementsSelection)({enabled:t}),{resource:f}=(0,p.useElementsTreeScopes)({enabled:t}),{selection:v,resource:S,manager:I}=(0,p.useElementsTreeSelection)({enabled:t}),{editing:{useCurrentHighlights:E,editingDndService:P,simpleASTParsers:T},simpleAST:{simpleASTMain:y,simpleASTPluginRepo:b}}=(0,g.useSimulationTabContext)(),[,C]=E(!1),N=(0,h.useHighlightNodeById)(),M=(0,d.useIsMountedRef)();return(0,n.useMemo)((()=>e.map((e=>({clickableFrame:e,onMouseDown:t=>{P.startDrag(t.nativeEvent,(0,r.draggedExistingNode)({itemId:e.id,nodeId:e.astId,filePath:e.astFilePath}))},onDoubleClick:async t=>{t.stopPropagation(),C([]);const{getResourceLatestValue:n,release:r}=(0,a.getResourceLatestValueFactory)(y),d=await(0,i.findAllScopes)(l,e.domNodeId,(e=>n({filePath:e,parsers:T.get()})),b),{domNodeId:u}=e;(0,i.drillIntoScope)({scopes:d,domNodeId:u,isMounted:M.current,selectionData:c,selectionManager:I,scopesResource:f,getNodeDisplayName:o.getNodeDisplayName,scannedStructure:s}),r()},onClick:async t=>{t.stopPropagation(),C([]);const{getResourceLatestValue:n,release:r}=(0,a.getResourceLatestValueFactory)(y),u=e=>n({filePath:e,parsers:T.get()});if((0,d.isCtrlKeyPressed)(t)){const t=await(0,i.findAllScopes)(l,e.domNodeId,u,b);(0,i.drillIntoScope)({scopes:t,domNodeId:e.domNodeId,isMounted:M.current,selectionData:c,selectionManager:I,scopesResource:f,getNodeDisplayName:o.getNodeDisplayName,scannedStructure:s})}null==S||S.setSelection({kind:"in-scope",astFilePath:e.astFilePath,astId:e.astId,domNodeId:e.domNodeId,id:e.id},"stage"),r()},onMouseOver:()=>{const t=null==v?void 0:v.selection;t&&t.astId===e.astId&&t.astFilePath===e.astFilePath&&t.domNodeId===e.domNodeId||N(e.astFilePath,e.astId,e.domNodeId)}})))),[T,l,M,c,C,b,e,y,P,v,S,f,I,s,N])}(e),v=(0,n.useCallback)((()=>s([])),[s]);return n.default.createElement(n.default.Fragment,null,f.map((({clickableFrame:e,onClick:t,onMouseDown:s,onMouseOver:a,onDoubleClick:o},i)=>n.default.createElement(l.HighlightFrame,{key:i+"clickableHighlight",rect:e.rect,className:c.classes.root,onClick:t,onMouseDown:s,onMouseOver:a,onMouseOut:v,onDoubleClick:o}))))})),t.ClickableFrames.displayName="ClickableFrames"},44213:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DropTargets=void 0;const n=s(5163).__importStar(s(87363)),a=s(76796),o=s(58464),i=s(58930),l=s(6378);function r(e,t){return`drop_${e}${void 0!==t?`_${t}`:""}`}t.DropTargets=(0,n.memo)((({targetHighlights:e,className:t,resolveRect:s})=>{const{windowZoom:d}=(0,n.useContext)(a.SimulationDisplayContext);return n.default.createElement(n.default.Fragment,null,e.map(((e,a)=>n.default.createElement("div",{className:(0,l.style)(l.classes.root,t),key:r(a)},n.default.createElement(i.Highlight,{highlight:s(e.parent.parentRect,d),windowZoom:d,title:`Draginto: ${(0,o.getNodeTitle)(e.parent.parent)}`,className:l.classes.draggedInto}),e.rects.map(((e,t)=>n.default.createElement("div",{className:l.classes.childRect,key:r(a,t),style:{left:e.x+"px",top:e.y+"px",width:e.width+"px",height:e.height+"px"}})))))))})),t.DropTargets.displayName="DropTarget"},97587:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorDetailsPopup=void 0;const n=s(5163).__importDefault(s(87363)),a=s(68036),o=s(63372),i=s(95874),l=s(3351);s(98125),t.ErrorDetailsPopup=n.default.forwardRef(((e,t)=>n.default.createElement("div",{className:(0,l.style)(l.classes.root,e.className),ref:t,style:e.style},n.default.createElement("div",{className:l.classes.title},e.title),n.default.createElement("div",{className:l.classes.message},e.message),n.default.createElement(a.Button,{className:(0,l.style)(o.classes.linkButton,l.classes.showDetailsButton),onClick:e.onShowDetailsClick},i.content.errorPopup.showDetails)))),t.ErrorDetailsPopup.displayName="ErrorDetailsPopup"},27673:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HighlightFrame=void 0;const n=s(5163),a=n.__importStar(s(87363)),o=n.__importDefault(s(75300)),i=s(48760);t.HighlightFrame=(0,a.memo)((({rect:e,className:t,onClick:s,onMouseOver:n,onMouseOut:l,onMouseDown:r,onDoubleClick:d,scrollIntoView:c,children:u})=>{const m=(0,a.useRef)(null);return(0,a.useEffect)((()=>{c&&m.current&&(0,o.default)(m.current,{behavior:"smooth",block:"nearest"})}),[c]),e.width||e.height?a.default.createElement("div",{ref:m,className:(0,i.style)(i.classes.root,t),onClick:s,onMouseOver:n,onMouseOut:l,onMouseDown:r,onDoubleClick:d,style:{position:"absolute",top:e.y+"px",left:e.x+"px",width:`${e.width+1}px`,height:`${e.height+1}px`}},u):null})),t.HighlightFrame.displayName="HighlightFrame"},19732:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HighlightContainer=void 0;const n=s(5163).__importStar(s(87363)),a=s(16042),o=s(58930),i=s(92613),l=s(17109),r=s(47060),d=s(9029);t.HighlightContainer=(0,n.memo)((({frame:e,windowZoom:t,selected:s,showDimensions:c,passiveSelected:u,scrollIntoView:m,numberOfParentsToShow:p=i.DEFAULT_NUM_PARENTS_IN_HAT})=>{var g;const{rect:h,type:f,item:v,title:S,error:I}=e,{editing:{useStageMode:E,jsxTreeVisualizerSlot:P,jsxTreeStatusVisualizerSlot:T}}=(0,d.useMainContext)(),y=(0,a.useVisibility)(),[b]=E(y),C=null===(g=(0,r.useTreeItemParents)(v,p,y))||void 0===g?void 0:g.reverse(),N=(0,n.useMemo)((()=>({showAlignMarkers:b===l.StageMode.selection&&s,scrollIntoView:m})),[b,s,m]);return n.default.createElement(o.Highlight,{highlight:h,type:f,highlightItem:v,parents:C,jsxTreeVisualizerSlot:P,jsxTreeStatusVisualizerSlot:T,windowZoom:t,title:S||"",hideHighlightTag:u,highlightFrameProps:N,selected:s,passiveSelected:u,showDimensions:c,error:Boolean(I)})})),t.HighlightContainer.displayName="HighlightContainer"},32181:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HighlightTitle=void 0;const n=s(5163),a=s(69202),o=s(16042),i=s(9029),l=s(18413),r=s(70268),d=s(74765),c=n.__importStar(s(87363)),u=s(17109),m=s(72178),p=s(67619),g=s(48383),h=s(12491);t.HighlightTitle=(0,c.memo)((({title:e,type:s,error:n=!1,selected:f,allowDrillIntoScope:v,selectItemOnClick:S,parents:I,showParents:E,highlightItem:P,jsxTreeVisualizerSlot:T,jsxTreeStatusVisualizerSlot:y,className:b})=>{const{editing:{elementHatContextMenuSlot:C}}=(0,i.useMainContext)(),{simulation:{simulationData:{simulationFilePath:N,eventEmitter:M}}}=(0,l.useSimulationTabContext)(),w=N,_=(0,o.useVisibility)(),x=(0,p.useDrillIntoTargetScope)(_),k=(0,g.useSelectTreeItem)(),D=(0,m.useSelectionFilePath)(),A=(0,c.useMemo)((()=>null==I?void 0:I.map(((e,s)=>c.default.createElement(t.HighlightTitle,{key:s,selectItemOnClick:!0,title:e.name,highlightItem:e.item,type:e.type,jsxTreeVisualizerSlot:T,jsxTreeStatusVisualizerSlot:y})))),[I,T,y]),O=(0,c.useCallback)((()=>{S&&P&&k(P)}),[P,S,k]),R=(0,c.useCallback)((()=>{v&&P&&x(P)}),[P,x,v]),F=(0,c.useMemo)((()=>function(e,t,s,n,a){if(t&&s){const o={item:t,filePath:s,drawerId:n,eventEmitter:a};return(0,d.convertSlotEntriesToActions)([...e],o)}return[]}(C,P,D,w,M)),[C,P,D,w,M]),L=!!(null==I?void 0:I.length)&&f,V=L&&E;return c.default.createElement("div",{className:(0,h.style)(h.classes.root,b)},c.default.createElement("div",{className:(0,h.style)(h.classes.title,{type:s,error:n,selected:f}),onClick:O},V?c.default.createElement(a.ChevronUpIcon,{className:h.classes.chevron}):L?c.default.createElement(a.ChevronRightIcon,{className:h.classes.chevron}):null,c.default.createElement(r.EllipsisWithTooltip,{className:h.classes.titleContent},e,P&&P.node&&T&&[...T].map((({renderer:e},t)=>c.default.createElement(e,{key:t,value:P,filePath:D,origin:u.ElementTreeVisualizerOrigin.StageOverlays})))),c.default.createElement("div",{className:h.classes.status},P&&P.node&&y&&[...y].map((({renderer:e},t)=>c.default.createElement(e,{key:t,value:{node:P.node},origin:u.ElementTreeVisualizerOrigin.StageOverlays})))),c.default.createElement("div",{className:h.classes.actions},v&&P&&c.default.createElement(r.Tooltip,{content:"Edit Component"},c.default.createElement(a.EditSmallIcon,{className:(0,h.style)(h.classes.actionIcons,h.classes.drillIntoScopeIcon),onClick:R})),c.default.createElement(r.ActionMenu,{onClick:e=>e.stopPropagation(),menuItems:F,dropPanelClassName:h.classes.actionsMenuDropPanel},c.default.createElement(a.MoreSmallIcon,{className:h.classes.actionIcons})))),c.default.createElement("div",{className:(0,h.style)(h.classes.parentsContainer,{showParents:E})},A))})),t.HighlightTitle.displayName="HighlightTitle"},58930:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Highlight=void 0;const n=s(5163).__importStar(s(87363)),a=s(69202),o=s(27673),i=s(31939),l=s(92613),r=s(32181);s(28637),t.Highlight=(0,n.memo)((({highlight:e,highlightItem:t,windowZoom:s,title:d="",parents:c,type:u="component",hideHighlightTag:m,highlightFrameProps:p,jsxTreeVisualizerSlot:g,jsxTreeStatusVisualizerSlot:h,selected:f=!1,showDimensions:v=!1,passiveSelected:S=!1,error:I=!1,className:E})=>{var P;const[T,y]=(0,n.useState)(!1);(0,n.useEffect)((function(){y(!1)}),[c]);const b=(0,n.useCallback)((function(e){e.stopPropagation(),y((e=>!e))}),[]),C=null!==(P=null==c?void 0:c.length)&&void 0!==P?P:0,N=e.height<60,M=f&&"component"===u&&!I&&!!(null==t?void 0:t.definedAt);return n.default.createElement("div",{className:(0,i.style)(i.classes.root,{type:u,selected:f,passiveSelected:S,error:I,flipped:e.y<l.HIGHLIGHT_TAG_HEIGHT*(2+C),shouldShiftToBottom:N,showParents:T},E),style:{[i.vars.height]:e.height+"px",[i.vars.width]:e.width+"px",[i.vars.tagHeight]:l.HIGHLIGHT_TAG_HEIGHT+"px"}},n.default.createElement(o.HighlightFrame,{...p,rect:e,className:i.classes.highlightFrame},!m&&n.default.createElement("div",{className:(0,i.style)(i.classes.content)},n.default.createElement("div",{className:i.classes.titleContainer,onClick:b},""!==d&&n.default.createElement(r.HighlightTitle,{title:d,showParents:T,type:u,error:I,selected:f,highlightItem:t,jsxTreeVisualizerSlot:g,jsxTreeStatusVisualizerSlot:h,parents:c,allowDrillIntoScope:M,className:i.classes.highlightTitle})),v&&n.default.createElement("div",{className:i.classes.dimensions},n.default.createElement("span",{className:i.classes.width},Math.round(e.width/s)),n.default.createElement(a.XIcon,{className:i.classes.dimensionsXIcon}),n.default.createElement("span",{className:i.classes.height},Math.round(e.height/s))))))})),t.Highlight.displayName="Highlight"},58383:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useEffectOnSelectionChanged=t.useLastNodeSelectedFromTree=void 0;const n=s(87363),a=s(81862),o=s(69202);function i(e,{enabled:t=!0,filter:s}){const{lastSelectionScope:i}=(0,a.useElementsSelection)({enabled:t}),l=null==i?void 0:i.selection;(0,o.usePreviousValueEffect)(l,(0,n.useCallback)((t=>{const n=(null==l?void 0:l.astFilePath)!==(null==t?void 0:t.astFilePath)&&(null==l?void 0:l.astId)!==(null==t?void 0:t.astId)&&(null==l?void 0:l.domNodeId)!==(null==t?void 0:t.domNodeId),a=(null==i?void 0:i.selectionSource)&&s(null==i?void 0:i.selectionSource);n&&a&&e(l)}),[l,i,s,e]))}t.useLastNodeSelectedFromTree=function(){const e=(0,o.useIsMountedRef)(),[t,s]=(0,n.useState)();return i((0,n.useCallback)((t=>{e.current&&s(t?{filePath:t.astFilePath,nodeId:t.astId}:void 0)}),[e]),{filter:e=>"stage"!==e}),t},t.useEffectOnSelectionChanged=i},72201:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useAstManager=void 0;const n=s(87363),a=s(16042),o=s(9029),i=s(27941),l=s(49642),r=s(77410);t.useAstManager=function(){const{simpleAST:{simpleASTMain:e}}=(0,o.useMainContext)(),t=(0,r.useStructureFilePaths)(),s=(0,a.useVisibility)(),d=(0,l.useGetAstResId)(),{astManager:c}=(0,i.useResources)((0,n.useMemo)((()=>({astManager:{resourceManager:e,defaultValue:{},ids:t.map(d)}})),[t,d,e]),s);return c}},67619:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDrillIntoTargetScope=void 0;const n=s(87363),a=s(81862);t.useDrillIntoTargetScope=function(e=!0){const{resource:t}=(0,a.useElementsTreeScopes)({enabled:e});return(0,n.useCallback)((e=>{e.definedAt&&t.addInternalScope(e.definedAt.scope)}),[t])}},5928:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useErrorDetailsPopup=void 0;const n=s(87363);t.useErrorDetailsPopup=function(e){const t=(0,n.useRef)(null),[s,a]=(0,n.useState)({top:0,left:0});return(0,n.useLayoutEffect)((()=>{var s;const n=null===(s=t.current)||void 0===s?void 0:s.getBoundingClientRect(),o=null==e?void 0:e.rect;(null==e?void 0:e.error)&&n&&o&&a({top:o.y-(n.height-o.height)/2,left:o.x-n.width-12})}),[e]),{ref:t,position:s}}},53778:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useHighlightNodeById=void 0;const n=s(87363),a=s(91570),o=s(72447),i=s(18413),l=s(81862);t.useHighlightNodeById=function(){const{editing:{useCurrentHighlights:e}}=(0,i.useSimulationTabContext)(),[,t]=e(!1),{resource:s}=(0,l.useElementsTreeSelection)();return(0,n.useMemo)((()=>s?(0,o.outlineByIdFactory)(s,t):a.noop),[s,t])}},2425:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSelectChildShortcut=void 0;const n=s(87363),a=s(54917),o=s(16042),i=s(9029),l=s(48383),r=s(93225),d=s(16107),c=s(81862),u=s(23766),m=s(91973);t.useSelectChildShortcut=function(){const e=(0,o.useVisibility)(),t=(0,l.useSelectTreeItem)(),s=(0,u.useElementsTreeResource)(),{lastSelectionScope:p}=(0,c.useElementsSelection)({enabled:e}),{editing:{useShowHiddenElements:g}}=(0,i.useMainContext)(),[h]=g(),f=(0,n.useCallback)((()=>{const{selection:n}=p||{},a=null==s?void 0:s.getLatest();if(a&&(null==n?void 0:n.id)){const s=(0,m.getTreeItemByDomIdOrAstNodeId)(n,a.astNodeIdToItemMapping,a.domNodeIdToItemMapping);if(e&&s){const e=(0,r.getFirstVisibleChildren)(s,void 0,h)[0];e&&t(e)}}}),[t,e,p,s,h]);(0,a.useShortcut)(d.shortcuts.selectChild,f,{scope:d.ELEMENTS_TREE_SCOPE}),(0,a.useShortcut)(d.shortcuts.selectChild,f,{scope:d.STAGE_SCOPE})}},69474:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSelectParentShortcut=void 0;const n=s(87363),a=s(54917),o=s(16042),i=s(48383),l=s(16812),r=s(16107),d=s(81862),c=s(23766),u=s(58464),m=s(9029);t.useSelectParentShortcut=function(){const e=(0,o.useVisibility)(),t=(0,i.useSelectTreeItem)(),s=(0,c.useElementsTreeResource)(),{lastSelectionScope:p}=(0,d.useElementsSelection)({enabled:e}),{editing:{useShowHiddenElements:g}}=(0,m.useMainContext)(),[h]=g(),f=(0,n.useCallback)((()=>{const{selection:n}=p||{},a=null==s?void 0:s.getLatest().rootNodes;if(a&&(null==n?void 0:n.id)){const s=a.map((e=>(0,u.findNodeInTree)(e,(e=>e.dataItem.id===n.id),(e=>{var t;return null!==(t=e.children)&&void 0!==t?t:[]}))))[0];if(e&&s){const e=(0,l.getFirstVisibleParent)(s.dataItem,(e=>!e.domNodeId),h);e&&t(e)}}}),[t,e,s,p,h]);(0,a.useShortcut)(r.shortcuts.selectParent,f,{scope:r.ELEMENTS_TREE_SCOPE}),(0,a.useShortcut)(r.shortcuts.selectParent,f,{scope:r.STAGE_SCOPE})}},26931:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSelectSiblingShortcut=void 0;const n=s(87363),a=s(54917),o=s(16042),i=s(48383),l=s(44313),r=s(16107),d=s(81862),c=s(23766),u=s(58464),m=s(9029);t.useSelectSiblingShortcut=function(){const e=(0,o.useVisibility)(),t=(0,i.useSelectTreeItem)(),s=(0,c.useElementsTreeResource)(),{lastSelectionScope:p}=(0,d.useElementsSelection)({enabled:e}),{editing:{useShowHiddenElements:g}}=(0,m.useMainContext)(),[h]=g(),f=(0,n.useCallback)((()=>{const{selection:n}=p||{},a=null==s?void 0:s.getLatest().rootNodes;if(a&&(null==n?void 0:n.id)){const s=a.map((e=>(0,u.findNodeInTree)(e,(e=>e.dataItem.id===n.id),(e=>{var t;return null!==(t=e.children)&&void 0!==t?t:[]}))))[0];if(e&&s){const e=(0,l.getFirstVisibleSibling)("next",s.dataItem,h);e&&t(e)}}}),[t,e,p,s,h]),v=(0,n.useCallback)((()=>{const{selection:n}=p||{},a=null==s?void 0:s.getLatest().rootNodes;if(a&&(null==n?void 0:n.id)){const s=a.map((e=>(0,u.findNodeInTree)(e,(e=>e.dataItem.id===n.id),(e=>{var t;return null!==(t=e.children)&&void 0!==t?t:[]}))))[0];if(e&&s){const e=(0,l.getFirstVisibleSibling)("previous",s.dataItem,h);e&&t(e)}}}),[t,e,p,s,h]);(0,a.useShortcut)(r.shortcuts.selectNextSibling,f,{scope:r.ELEMENTS_TREE_SCOPE}),(0,a.useShortcut)(r.shortcuts.selectPrevSibling,v,{scope:r.ELEMENTS_TREE_SCOPE}),(0,a.useShortcut)(r.shortcuts.selectNextSibling,f,{scope:r.STAGE_SCOPE}),(0,a.useShortcut)(r.shortcuts.selectPrevSibling,v,{scope:r.STAGE_SCOPE})}},48383:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSelectTreeItem=void 0;const n=s(87363),a=s(81862);t.useSelectTreeItem=function(e=!0){const{resource:t}=(0,a.useElementsTreeSelection)({enabled:e}),{resource:s}=(0,a.useElementsTreeScopes)({enabled:e});return(0,n.useCallback)((e=>{var n;const a=null===(n=null==s?void 0:s.getCurrentScope())||void 0===n?void 0:n.astFilePath,o=e.node?e.node.astNodeId:e.generatedAtAstId;a&&o&&(null==t||t.setSelection({kind:"in-scope",astFilePath:a,astId:o,domNodeId:e.domNodeId,id:e.id}))}),[t,s])}},35727:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSourcePositions=void 0;const n=s(87363),a=s(16042),o=s(9029),i=s(27941),l=s(77410);t.useSourcePositions=function(){const{simpleAST:{sourceIdResourceMain:e}}=(0,o.useMainContext)(),t=(0,l.useStructureFilePaths)(),s=(0,a.useVisibility)(),{sourcePositions:r}=(0,i.useResources)((0,n.useMemo)((()=>({sourcePositions:{resourceManager:e,defaultValue:{},ids:t}})),[t,e]),s);return r}},47060:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTreeItemParents=void 0;const n=s(87363),a=s(58464),o=s(92613),i=s(270),l=s(81862),r=s(35248),d=s(16812);t.useTreeItemParents=function(e,t=o.DEFAULT_NUM_PARENTS_IN_HAT,s=!0){const{scannedStructure:c}=(0,i.useScannedStructure)({enabled:s}),{lastSelectionScope:u}=(0,l.useElementsSelection)({enabled:s}),m=null==u?void 0:u.scope.astFilePath;return(0,n.useMemo)((()=>{if(e){const s=[];let n=e;for(;s.length<t;){const e=(0,d.getFirstVisibleParent)(n,(e=>!e.domNodeId));if(!e)break;{const t="component",o=(0,r.getFrameType)(c,{filePath:m,domNodeId:e.domNodeId})||t;s.push({name:(0,a.getTreeItemTitle)(e),type:o,item:e}),n=e}}return s}}),[e,c,t,m])}},70960:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StageOverlays=void 0;const n=s(5163).__importStar(s(87363)),a=s(93849),o=s(27941),i=s(83135),l=s(16042),r=s(76796),d=s(18413),c=s(17109),u=s(77410),m=s(10384),p=s(270),g=s(81862),h=s(86808),f=s(49642),v=s(19732),S=s(27673),I=s(44213),E=s(97587),P=s(55752),T=s(72201),y=s(35727),b=s(2425),C=s(69474),N=s(26931),M=s(58383),w=s(5928),_=s(1890),x=s(31037),k=s(54560),D=s(63004);s(86301);const A=s(62321),O=s(23766),R=s(54917),F=s(16107),L=s(8777),V={};t.StageOverlays=e=>{const{simulation:{simulationData:{previewId:t,simulationFilePath:s},stageEventService:H,previewScrollPositionResource:B},editing:{useCurrentHighlights:j,useEditingDndResource:W,useStageMode:G,domPositionsManager:z,editingDndService:K,dragAndDropConfig:Z},simpleAST:{simpleASTPluginRepo:U}}=(0,d.useSimulationTabContext)(),{overlaySlot:J,onShowErrorDetails:$}=e,X=(0,u.useStructureFilePaths)(),q=(0,l.useVisibility)(),{structure:Q}=(0,p.useStructureResource)({enabled:q}),{scannedStructure:Y}=(0,p.useScannedStructure)({enabled:q}),{selection:ee,resource:te}=(0,g.useElementsTreeSelection)({enabled:q}),{scopes:se}=(0,g.useElementsTreeScopes)({enabled:q}),{selection:ne}=ee||{},ae=se[se.length-1],[oe]=j(q),ie=(0,n.useRef)(null),{windowZoom:le}=(0,n.useContext)(r.SimulationDisplayContext),re=(0,M.useLastNodeSelectedFromTree)(),[{dropData:de}]=W(q),ce=(0,i.useCtrlKeyPressed)(),ue=(0,i.useSlot)(J),me=(0,T.useAstManager)(),pe=(0,y.useSourcePositions)(),{domNodeIdToItemMapping:ge}=(0,O.useElementsTree)({enabled:q}),he=(0,A.useWindowAndCanvasFrames)(),fe=(0,n.useMemo)((()=>[...X]),[X]),ve=(0,f.useGetAstResId)(),[Se]=G(q);(0,n.useEffect)((()=>{const e=()=>{null==te||te.clearSelection()};return H.subscribe("onClick",e),()=>H.unsubscribe("onClick",e)}),[te,H]);const Ie=(0,L.useSelectCodeInDrawer)(),Ee=(0,n.useCallback)((e=>{(null==ae?void 0:ae.astFilePath)&&Ie(ae.astFilePath,e).catch(a.reportError)}),[null==ae?void 0:ae.astFilePath,Ie]),Pe=(0,n.useMemo)((()=>ce?fe.map((e=>({filePath:e}))):ae?[{filePath:ae.astFilePath,astNodeId:ae.astId}]:[]),[ce,ae,fe]),Te=(0,n.useMemo)((()=>(null==ae?void 0:ae.astFilePath)?me.getValue(ve(ae.astFilePath)):void 0),[me,ve,ae]),{domPositions:ye}=(0,o.useResources)((0,n.useMemo)((()=>({domPositions:{resourceManager:z,defaultValue:{},id:V}})),[z]),q),be=(0,n.useCallback)((e=>ye.value[e]),[ye]),Ce=(0,o.useValue)({resource:B,enabled:q}),Ne=(0,n.useCallback)((e=>{const{left:t,top:s}=Ce||{left:0,top:0};return(0,m.fixRectZoom)({height:e.height,width:e.width,x:e.x-t,y:e.y-s},le)}),[le,Ce]),Me=(0,n.useCallback)(((...e)=>e.reduce(((e,t)=>{const s=(0,m.getFrame)(t,{fixRectZoom:Ne,filePath:null==ae?void 0:ae.astFilePath,pluginRepo:U,scopeAstValue:Te,scannedDom:Y,domNodeIdToItemMapping:ge,getDOMPosition:be});return s&&e.push(s),e}),[])),[Ne,ge,be,U,Y,null==ae?void 0:ae.astFilePath,Te]),{scopeRect:we,dragMap:_e,dropTargetPosition:xe,clickableFrames:ke,highlightedFrames:De,selectedFrame:Ae,passiveFrames:Oe}=(0,n.useMemo)((()=>(0,m.getStageOverlays)({structure:Q,highlights:oe,scopeAstValue:Te,dropData:de,scope:ae,selection:ne,scannedStructure:Y,pluginRepo:U,filePath:null==ae?void 0:ae.astFilePath,sourceId:ae&&pe.getValue(ae.astFilePath),getDOMPosition:be,scopeIds:Pe,fixRectZoom:Ne,domNodeIdToItemMapping:ge,dragEnabled:Z.stageEnabled,windowAndCanvasFrames:he})),[Q,oe,Te,de,ne,Y,U,ae,pe,be,Pe,Ne,ge,Z.stageEnabled,he]);(0,b.useSelectChildShortcut)(),(0,C.useSelectParentShortcut)(),(0,N.useSelectSiblingShortcut)();const Re=(0,R.useShortcutScope)(F.STAGE_SCOPE),Fe=(0,n.useCallback)((e=>{var t;if(!ie.current)return;const s=ie.current.getBoundingClientRect(),n={x:e.x-s.x,y:e.y-s.y};return null===(t=(0,x.getClosestRect)(_e,n))||void 0===t?void 0:t.target}),[_e]);(0,k.useRegisterDropTargetToDndService)(K,ie,Fe);const Le=void 0!==re&&re.filePath===(null==ne?void 0:ne.astFilePath)&&re.nodeId===(null==ne?void 0:ne.astId),Ve=(null==Ae?void 0:Ae.error)?(0,h.getSafeModeErrorInfo)(null==Ae?void 0:Ae.error):null,He=(0,w.useErrorDetailsPopup)(Ae),Be=(0,n.useMemo)((()=>({goToCode:Ee})),[Ee]);return n.default.createElement("div",{ref:Z.stageEnabled?ie:void 0,className:(0,_.style)(_.classes.root,{allowPointerEvents:Se===c.StageMode.selection}),onFocus:Re.activate,onBlur:Re.deactivate,tabIndex:-1},n.default.createElement(D.HighlightsContext.Provider,{value:Be},Se===c.StageMode.selection&&n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{className:_.classes.croppedOverlay},n.default.createElement(I.DropTargets,{resolveRect:m.fixRectZoom,targetHighlights:xe}),we&&n.default.createElement(S.HighlightFrame,{rect:we,className:_.classes.scopeSelectionFrame}),Oe.map(((e,t)=>n.default.createElement(v.HighlightContainer,{key:t,passiveSelected:!0,frame:e,windowZoom:le}))),De.map(((e,t)=>n.default.createElement(v.HighlightContainer,{key:t,frame:e,windowZoom:le}))),Ae&&n.default.createElement(v.HighlightContainer,{frame:Ae,selected:!0,scrollIntoView:Le,windowZoom:le,showDimensions:Boolean(!Ae.error)}),n.default.createElement(P.ClickableFrames,{clickableFrames:ke})),n.default.createElement("div",{className:_.classes.uncroppedOverlay},Ve&&n.default.createElement(E.ErrorDetailsPopup,{className:_.classes.errorDetailsPopup,ref:He.ref,style:He.position,title:Ve.title,message:Ve.message,onShowDetailsClick:function(){const e=s,n=Ae.error;$({previewId:t,drawerId:e,error:n})}})))),ue.map((({id:e,Component:t})=>n.default.createElement(t,{key:e,GetFrames:Me}))))}},62321:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useWindowAndCanvasFrames=void 0;const n=s(87363),a=s(18413),o=s(16042),i=s(81862),l=s(24807),r=s(23766),d=s(27941),c={};t.useWindowAndCanvasFrames=function(){const{simulation:e,editing:{simulationElementRectsManager:t}}=(0,a.useSimulationTabContext)(),{simulationFilePath:s}=e.simulationData,u=(0,o.useVisibility)(),{lastSelectionScope:m}=(0,i.useElementsSelection)({enabled:u}),{domNodeIdToItemMapping:p}=(0,r.useElementsTree)({enabled:u}),{scope:g}=m||{},h=(0,d.useResourceValue)({resourceManager:t,resourceId:c,defaultValue:c}),f=(0,l.useTreeConfig)();return(0,n.useMemo)((()=>{const e=[];return(null==g?void 0:g.astFilePath)!==s||f&&f[0]&&function t(n){var a,o;if(n.name){const i=null===(a=p.get(n.name))||void 0===a?void 0:a[0];(null==i?void 0:i.domNodeId)&&s&&h.window&&h.canvas&&("Window"!==i.domNodeId&&"Canvas"!==i.domNodeId||e.push({rect:"Window"===i.domNodeId?h.window:h.canvas,astFilePath:s,astId:(null===(o=null==i?void 0:i.node)||void 0===o?void 0:o.astNodeId)||i.domNodeId,domNodeId:i.domNodeId,id:"Window"})),n.children&&n.children.forEach(t)}}(f[0].items),e}),[p,h,null==g?void 0:g.astFilePath,s,f])}},63004:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HighlightsContext=void 0;const n=s(87363),a=s(91570);t.HighlightsContext=(0,n.createContext)({goToCode:a.noop})},99610:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LaneContextProvider=t.LaneContext=void 0;const n=s(5163).__importStar(s(87363)),a=s(91570),o=s(16042),i=s(68484),l=s(81862),r=s(18413),d=s(27941);t.LaneContext=n.default.createContext({selectLane:a.noop,treeState:i.defaultTreeViewsState,highlightLane:a.noop}),t.LaneContextProvider=e=>{const{editing:{treeViewStateResource:s}}=(0,r.useSimulationTabContext)(),[a,i]=(0,n.useState)(),[c,u]=(0,n.useState)(),m=(0,o.useVisibility)(),{selectionResource:p}=(0,l.useElementsSelection)({enabled:!1}),[g]=(0,d.useResourceState)({resource:s,enabled:m}),h=(0,n.useCallback)((e=>{null==p||p.setSelection(),i(e)}),[p]),f=(0,n.useMemo)((()=>({highlightedLane:c,highlightLane:u,treeState:g,selectedLane:a,selectLane:h})),[h,c,a,g]);return(0,n.useEffect)((()=>{const e=()=>{a&&i(void 0)};return null==p||p.subscribe(e),()=>null==p?void 0:p.unsubscribe(e)}),[a,p]),n.default.createElement(t.LaneContext.Provider,{value:f},e.children)}},9234:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SchemasResource=void 0;const n=s(19709),a=s(60814),o=new WeakMap;class i extends a.JSONResource{getSchemas(){const e=this.getLatest();return e&&e.schemas&&!o.has(e.schemas)&&o.set(e.schemas,(0,n.getInlinedSchemasFromSchemaBlob)(e.schemas)),e&&e.schemas?o.get(e.schemas):null}}t.SchemasResource=i},36497:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultElementsScopes=void 0,t.defaultElementsScopes=[]},56416:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementsScopesComputer=void 0;const n=s(60814),a=s(98066),o=s(9240),i=s(30802),l=s(26709),r=s(64835),d=s(57025),c=s(36497),u=[...o.commonSimpleAstParsers,i.simulationPlugin,l.demoPlugin,a.jsxFunctionPlugin].map((e=>e.nodeKind));t.ElementsScopesComputer=class{constructor(e,t,s,n){this.domStructureManager=e,this.dependencyDiffManager=t,this.simpleASTManager=s,this.repo=n}async compute(e,t){var s;const n=await this.domStructureManager.consume({},{id:e.previewId}).getReady({}),a=new Set([n,await this.simpleASTManager.getReady({filePath:e.simulationFilePath,parsers:u})]),o=null!==(s=await(e.simulationScopeEnabled?this.computeSimulationSelection(t,this.simpleASTManager):this.computeSelection(t,n)))&&void 0!==s?s:c.defaultElementsScopes;return{value:o,dependencies:a,status:{valid:0!==o.length}}}async recompute(e,t,s,a){const o=[...a][0],i=await(e.getId().simulationScopeEnabled?this.computeSimulationSelection(e,this.simpleASTManager):this.computeSelection(e,o));return{changes:i?[(0,n.fullChange)(i)]:[],dependencies:a,status:{valid:!0}}}async computeSimulationSelection(e,t){const[s,...n]=e.isReady()?e.getLatest():[],o=e.getId().simulationFilePath,i=await t.getReady({filePath:o,parsers:u}),l=(0,a.getDemoNode)(i);if(l){if(!s||l.astNodeId!==s.astId)return[{astFilePath:o,astId:l.astNodeId,displayName:l.name.value,instanceIndex:0,instanceAmount:1,domNodeId:"window"}];if(l.name.value!==s.displayName)return[{...s,displayName:l.name.value},...n]}}async computeSelection(e,t){var s,n,i;const l=t.getLatest();if(!l)return;const{simulationFilePath:c,compFilePath:u}=e.getId(),m=(await this.dependencyDiffManager.getReady({filePath:c,exclude:[u,"node_modules"]})).getLatest(),{root:p,domNodeId:g}=(0,d.findRootInArr)(l,m)||{},h=null!==(s=p&&p.location.fileName)&&void 0!==s?s:u,f=(await this.simpleASTManager.getReady({filePath:h,parsers:[a.jsxFilePlugin.nodeKind,a.jsxOwnerPlugin.nodeKind,a.jsxFunctionPlugin.nodeKind,o.jsxPlugin.nodeKind,o.variablePlugin.nodeKind,o.unparsedWithRootsPlugin.nodeKind]})).getLatest(),v=this.repo.getASTInfo(f),S=p?v.byId(p.location.astNodeId):void 0,[I]=e.isReady()?e.getLatest():[];if(!I||!f.owners.some((({astNodeId:e})=>e===I.astId))){const t=S?f.owners.find((e=>v.isChildOf(e,S))):null!==(i=null!==(n=f.owners.concat(f.nonJsxOwners).find((t=>t.names.find((t=>t.name===e.getId().compExportName)))))&&void 0!==n?n:f.owners[0])&&void 0!==i?i:f.nonJsxOwners[0];if(t)return[{astFilePath:h,astId:t.astNodeId,domNodeId:g,displayName:(0,r.getNodeDisplayName)(t),instanceIndex:0,instanceAmount:S?1:0}]}}}},17450:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultElementsSelection=void 0,t.defaultElementsSelection=null},99003:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementsSelectionComputer=void 0;const n=s(17450);t.ElementsSelectionComputer=class{constructor(e,t,s,n){this.domStructureManager=e,this.dependencyDiffManager=t,this.simpleASTManager=s,this.repo=n}compute(e,t){return{value:n.defaultElementsSelection,dependencies:new Set([]),status:{valid:!0}}}recompute(e,t,s,n){return{changes:[],dependencies:n,status:{valid:!0}}}}},31163:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useToggleExpanded=t.useSetCurrentItemId=void 0;const n=s(87363),a=s(60814),o=s(18413);t.useSetCurrentItemId=()=>{const{editing:{treeViewStateResource:e}}=(0,o.useSimulationTabContext)();return(0,n.useCallback)((t=>e.applyChange((0,a.fullChange)({...e.getLatest(),currentNavigatableItemId:t}))),[e])},t.useToggleExpanded=()=>{const{editing:{treeViewStateResource:e}}=(0,o.useSimulationTabContext)();return(0,n.useCallback)((t=>{const s=e.getLatest(),n=new Set(s.toggledItemsIds);n.has(t)?n.delete(t):n.add(t),e.applyChange((0,a.fullChange)({...s,toggledItemsIds:[...n]}))}),[e])}},62658:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTree=void 0;const n=s(89562),a=s(2527);t.createTree=(e,t,s,o,i,l,r,d,c,u,m,p)=>{const g={astRoot:s,filePath:t,scannedInfo:o},h=(0,n.resolveItemParents)((0,a.formatTree)(g,e,i,l,r,d,c,u,m,p));if(!h)return null;const f=(e,t)=>({id:e.id,dataItem:e,children:(e.children||[]).map((t=>f(t,e)))});return f(h)}},91996:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementsTreeComputer=void 0;const n=s(60814),a=s(9240),o=s(18729),i=s(62658),l=s(58464);t.ElementsTreeComputer=class{constructor(e,t,s,n,a,o,i,l){this.domStructureManager=e,this.elementsScopesManager=t,this.simpleASTManager=s,this.simpleASTParsers=n,this.repo=a,this.treeConfigManager=o,this.structureFilePathsManager=i,this.simulationScopeEnabled=l}async compute(e,t){const s={...e,simulationScopeEnabled:this.simulationScopeEnabled},[n,a,i,l]=await Promise.all([this.domStructureManager.consume({},{id:e.previewId}).getReady({},t),this.treeConfigManager.getReady(e,t),this.elementsScopesManager.getReady(s,t),this.structureFilePathsManager.getReady(e.previewId,t)]),r=new Set([n,a,i,l]),d=i.getCurrentScope(),c=n.getLatest()||[];if(!d)return{value:o.defaultElementsTree,dependencies:r,status:{valid:!0}};const{astFilePath:u}=d,m=await this.simpleASTManager.getReady({filePath:u,parsers:this.simpleASTParsers},t);r.add(m);const{astValues:p,astResources:g}=await this.buildAstValues(l,t);return g.forEach((e=>r.add(e))),{value:this.buildElementsTree({scopeAstResource:m,treeConfigResource:a,elementsScopesResource:i,currentScope:d,astValues:p,filePath:u,structure:c,simulationScopeEnabled:this.simulationScopeEnabled}),dependencies:r,status:{valid:!0}}}buildElementsTree({scopeAstResource:e,treeConfigResource:t,elementsScopesResource:s,currentScope:n,astValues:r,filePath:d,structure:c,simulationScopeEnabled:u}){var m;const p=e.getLatest(),g=this.repo.getASTInfo(p),h=t.getLatest(),f=s.getScopes(),v=null==h?void 0:h.find((S=n,function(e){return e.scopeInfo.scopeAstNodeId===(null==S?void 0:S.astId)&&e.scopeInfo.scopeFilePath===(null==S?void 0:S.astFilePath)}));var S;const I=new Map,E=new Map;if(v){const e=null===(m=p.demos[0])||void 0===m?void 0:m.demo;if(!e)return o.defaultElementsTree;const t=(0,i.createTree)(e,d,p,g,r,c,this.repo,I,E,f,v.items,u),s=(null==t?void 0:t.dataItem)?(0,l.mapToParent)(t.dataItem):void 0;return t&&s?{rootNodes:[t],parentMapping:s,domNodeIdToItemMapping:I,astNodeIdToItemMapping:E}:o.defaultElementsTree}const P=function(e,t){return[...e.owners,...e.nonJsxOwners].find((e=>e.astNodeId===t))}(p,n.astId);if(!P){const e=g.idToNode.get(n.astId);if(e){const t=(0,i.createTree)(e,d,p,g,r,c,this.repo,I,E,f,void 0,u),s=(null==t?void 0:t.dataItem)?(0,l.mapToParent)(t.dataItem):void 0;return t&&s?{rootNodes:[t],parentMapping:s,domNodeIdToItemMapping:I,astNodeIdToItemMapping:E}:o.defaultElementsTree}return o.defaultElementsTree}if((0,a.isNodeOfKind)("jsx-function",P)){const e=(0,i.createTree)(P,d,p,g,r,c,this.repo,I,E,f,void 0,u),t=(null==e?void 0:e.dataItem)?(0,l.mapToParent)(e.dataItem):void 0;return e&&t?{rootNodes:e.children,parentMapping:t,domNodeIdToItemMapping:I,astNodeIdToItemMapping:E}:o.defaultElementsTree}const T=(0,i.createTree)(P,d,p,g,r,c,this.repo,I,E,f,void 0,u),y=(null==T?void 0:T.dataItem)?(0,l.mapToParent)(T.dataItem):void 0;return T&&y?{rootNodes:[T],parentMapping:y,domNodeIdToItemMapping:I,astNodeIdToItemMapping:E}:o.defaultElementsTree}async recompute(e){const{value:t,dependencies:s,status:a}=await this.compute(e.getId(),e);return{changes:[(0,n.fullChange)(t)],dependencies:s,status:a}}async buildAstValues(e,t){const s=e.getLatest(),n=await Promise.all(s.map((e=>this.simpleASTManager.getReady({filePath:e,parsers:this.simpleASTParsers},t))));return{astValues:n.reduce(((e,t)=>Object.assign(e,{[t.getId().filePath]:t.getLatest()})),{}),astResources:n}}}},98427:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerElementHatContextMenuActions=void 0;const n=s(5163),a=s(69202),o=n.__importDefault(s(87363)),i=s(95874),l=s(8777);t.registerElementHatContextMenuActions=(e,t)=>{e.register({id:"editCode",label:i.content.nodeActions.editCode,icon:o.default.createElement(a.CodeWixUiIcon,null),action:async({item:e,filePath:s,drawerId:n,eventEmitter:a})=>{e.node&&await(0,l.selectCodeById)(s,e.node.astNodeId,a,t,n)},test:()=>!0,isDisabled:()=>!1})}},64196:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerElementsTreeContextMenuActions=void 0;const n=s(5163),a=s(69202),o=n.__importDefault(s(87363)),i=s(17109),l=s(95874),r=s(5487),d=s(43192),c=s(8777);t.registerElementsTreeContextMenuActions=(e,t,s,n,u)=>{e.register({id:"editExternalCode",label:l.content.nodeActions.editExternalCode,icon:o.default.createElement(a.CodeWixUiIcon,null),action:async({item:e,drawerId:s,eventEmitter:n})=>{var a,o;const i=e.definedAt;i&&await(0,c.selectCodeById)((null===(a=i.selection)||void 0===a?void 0:a.astFilePath)||i.scope.astFilePath,(null===(o=i.selection)||void 0===o?void 0:o.astId)||i.scope.astId,n,t,s)},isDisabled:()=>!1,test:({parent:e})=>!!e&&(0,i.isTreeItemOfKind)("untraced",e)}),e.register({id:"editCode",label:l.content.nodeActions.editCode,icon:o.default.createElement(a.CodeWixUiIcon,null),action:async({item:e,filePath:s,drawerId:n,eventEmitter:a})=>{e.node&&await(0,c.selectCodeById)(s,e.node.astNodeId,a,t,n)},isDisabled:()=>!1,test:({parent:e})=>!e||!(0,i.isTreeItemOfKind)("untraced",e)}),e.register({id:"removeChild",label:l.content.nodeActions.removeChild,icon:o.default.createElement(a.DeleteIcon,null),action:async({item:e,parent:t,filePath:a})=>{if(!t||!e.node)return;const o=(0,r.getModificationToRemoveChild)(t.node,e.node.astNodeId,(()=>s.generateId(a)))[0];(await n.getReady({filePath:a,parsers:u})).applyModification(t.node,o.modification,o.modificationArgs)},isDisabled:({item:e,parent:t,config:s})=>!(null==t?void 0:t.parent)||!(0,d.canDetachFromParent)(e.node,t.node)||!s.editMode,test:()=>!0})}},8777:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSelectCodeInDrawer=t.selectCodeById=void 0;const n=s(18413),a=s(87363);t.selectCodeById=async(e,t,s,n,a)=>{const o=await n.getLocation(e,t);s.emit("editCode",{drawerId:a,filePath:e,position:o})},t.useSelectCodeInDrawer=()=>{const{simulation:{simulationData:{simulationFilePath:e,eventEmitter:s}},simpleAST:{remoteIdService:o}}=(0,n.useSimulationTabContext)();return(0,a.useCallback)((async(n,a)=>(0,t.selectCodeById)(n,a,s,o,e)),[e,s,o])}},94389:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimulatedComponentOwnerComputer=void 0;const n=s(60814),a=s(57025);t.SimulatedComponentOwnerComputer=class{constructor(e,t,s,n,a){this.domStructureManager=e,this.dependencyDiffManager=t,this.simpleASTManager=s,this.simpleASTParsers=n,this.repo=a}async compute({previewId:e,compExportName:t,compFilePath:s,simulationFilePath:n}){var o,i,l;const[r,d]=await Promise.all([this.domStructureManager.consume({},{id:e}).getReady({}),this.dependencyDiffManager.getReady({filePath:n,exclude:[s,"node_modules"]})]),c=r.getLatest(),u=d.getLatest(),m=c?(0,a.findRootInArr)(c,u):void 0,p=null==m?void 0:m.root,g=Boolean(null==m?void 0:m.error),h=null!==(o=p&&p.location.fileName)&&void 0!==o?o:s,f=await this.simpleASTManager.getReady({filePath:h,parsers:this.simpleASTParsers}),v=new Set([r,d,f]),S=f.getLatest();if(!S)return{value:void 0,dependencies:v,status:{valid:!0}};const I=this.repo.getASTInfo(S),E=p&&I?I.byId(p.location.astNodeId):void 0;return{value:E?S.owners.find((e=>{const t=null==I?void 0:I.isChildOf(e,E),s=e.astNodeId===E.astNodeId&&g;return t||s})):null!==(l=null!==(i=S.owners.concat(S.nonJsxOwners).find((e=>e.names.find((e=>e.name===t)))))&&void 0!==i?i:null==S?void 0:S.owners[0])&&void 0!==l?l:S.nonJsxOwners[0],dependencies:v,status:{valid:!0}}}async recompute(e){const{value:t,dependencies:s,status:a}=await this.compute(e.getId());return{changes:[(0,n.fullChange)(t)],dependencies:s,status:a}}}},95689:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StructureFilePathsComputer=void 0;const n=s(60814);t.StructureFilePathsComputer=class{constructor(e){this.domStructureManager=e}async compute(e){const t=await this.domStructureManager.consume({},{id:e}).getReady({}),s=new Set([t]),n=t.getLatest()||[];return{value:this.getAllFilePaths(n).sort(),dependencies:s,status:{valid:!0}}}async recompute(e){const t=e.getLatest(),{value:s,dependencies:a,status:o}=await this.compute(e.getId());return{changes:t.length!==s.length||t.join()!==s.join()?[(0,n.fullChange)(s)]:[],dependencies:a,status:o}}getAllFilePaths(e,t=new Set){return e.forEach((e=>{e.components.forEach((({location:{fileName:e}})=>{"unknown"!==e&&t.add(e)})),this.getAllFilePaths(e.children,t)})),[...t]}}},77410:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useStructureFilePaths=void 0;const n=s(87363),a=s(18413),o=s(27941),i=s(16042),l=s(81862),r=[];t.useStructureFilePaths=()=>{const{simulation:{simulationData:{previewId:e,compFilePath:t}},editing:{structureFilePathsManager:s}}=(0,a.useSimulationTabContext)(),d=(0,o.useResourceValue)({resourceManager:s,resourceId:e,defaultValue:r,enabled:(0,i.useVisibility)()}),{lastSelectionScope:c}=(0,l.useElementsSelection)(),u=null==c?void 0:c.scope.astFilePath;return(0,n.useMemo)((()=>{const e=new Set(d);return e.add(t),u&&e.add(u),[...e]}),[u,t,d])}},94796:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TreeConfigComputer=void 0;const n=s(60814),a=s(95874);t.TreeConfigComputer=class{constructor(e,t){this.simpleASTManager=e,this.simpleASTParsers=t}async recompute(e){const{value:t,dependencies:s,status:a}=await this.compute(e.getId());return{changes:[(0,n.fullChange)(t)],dependencies:s,status:a}}async compute(e){const{simulationFilePath:t}=e,s=await this.simpleASTManager.getReady({filePath:t,parsers:this.simpleASTParsers}),n=new Set([s]),o=s.getLatest().demos[0];return{value:o?[{scopeInfo:{scopeAstNodeId:o.astNodeId,scopeFilePath:t},items:{kind:"options",name:a.content.configuredTree.window,node:{kind:"options",astNodeId:"Window"},children:[{kind:"options",name:a.content.configuredTree.canvas,node:o.environmentProps,children:[{kind:"demo",node:o.demo,children:[]}]}]}}]:void 0,dependencies:n,status:{valid:!0}}}}},24807:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTreeConfig=void 0;const n=s(87363),a=s(18413),o=s(27941),i=s(16042);t.useTreeConfig=()=>{const{simulation:{simulationData:{compExportName:e,compFilePath:t,previewId:s,simulationFilePath:l}},editing:{treeConfigManager:r,elementsTreeConfig:{simulationScope:d}}}=(0,a.useSimulationTabContext)(),c=(0,n.useMemo)((()=>l&&d?{compExportName:e,compFilePath:t,previewId:s,simulationFilePath:l}:void 0),[e,t,d,s,l]);return(0,o.useResourceValue)({resourceManager:r,resourceId:c,enabled:(0,i.useVisibility)()})}},68484:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTreeViewsState=void 0,t.defaultTreeViewsState={currentNavigatableItemId:null,disabledIds:null,selectedIds:null,selectionStartId:null,toggledItemsIds:[],typeAheadValue:null}},34383:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDefaultToggledState=void 0;const n=s(87363),a=s(18413),o=s(27941),i=s(58464);t.useDefaultToggledState=function({currentScope:e,treeParentMapping:t,rootNodeId:s,visitedScopesRef:l}){const{editing:{treeViewStateResource:r,elementsTreeConfig:d},simulation:{simulationData:{simulationFilePath:c}}}=(0,a.useSimulationTabContext)(),[,u]=(0,o.useResourceState)({resource:r,enabled:!1});(0,n.useLayoutEffect)((()=>{const n=e&&e.astFilePath!==c?e.astFilePath+e.astId:null;if(d.collapsedByDefault&&n&&!l.current.has(n)){const e=Array.from(t.keys()).filter((e=>{var t;return e.id!==s&&"prop"!==e.kind&&"jsx-element"===(null===(t=e.node)||void 0===t?void 0:t.kind)&&!(0,i.isFragment)(e.node)&&e.children.length})).map((e=>e.id));e.length&&(u({...r.getLatest(),toggledItemsIds:e}),l.current.add(n))}}),[d.collapsedByDefault,s,t,r,e,c,l,u])}},44210:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useExpandSelectedTreeItemBranch=void 0;const n=s(87363),a=s(58464),o=s(60814),i=s(18413),l=s(16042),r=s(23766),d=s(91973);t.useExpandSelectedTreeItemBranch=e=>{const{editing:{treeViewStateResource:t}}=(0,i.useSimulationTabContext)(),{astNodeIdToItemMapping:s,domNodeIdToItemMapping:c}=(0,r.useElementsTree)({enabled:(0,l.useVisibility)()});(0,n.useEffect)((()=>{if("in-scope"===(null==e?void 0:e.kind)){const n=(0,d.getTreeItemByDomIdOrAstNodeId)(e,s,c);if(n){const e=t.getLatest(),s=(0,a.getTreeItemParents)(n).map((e=>e.id)),i=new Set(e.toggledItemsIds);s.forEach((e=>i.delete(e))),i.size!==e.toggledItemsIds.length&&t.applyChange((0,o.fullChange)({...e,toggledItemsIds:[...i]}))}}}),[s,c,e,t])}},15719:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useNodeSelectionState=t.SelectionStates=void 0;const n=s(81862),a=s(693),o=s(92613),i=s(29244),l=s(89562);var r;!function(e){e.Active="Active",e.Passive="Passive"}(r=t.SelectionStates||(t.SelectionStates={})),t.useNodeSelectionState=(e=!0,t)=>{var s,d;const c=null===(s=(0,n.useElementsSelection)({enabled:e}).lastSelectionScope)||void 0===s?void 0:s.selection,u=(0,a.useSelectedElementsTreeItem)(),m=(null==c?void 0:c.domNodeId)==o.EditorComponents.canvas?null==c?void 0:c.domNodeId:null!==(d=null==u?void 0:u.domNodeId)&&void 0!==d?d:null==c?void 0:c.domNodeId,p={astNodeId:null==c?void 0:c.astId,domNodeId:m},g=(0,l.getAssossiatedIds)(t),h=function({astNodeId:e,domNodeId:t},s,n){if((0,i.isOptionItem)(n))return t===(null==s?void 0:s.domNodeId);const a=null==s?void 0:s.domNodeId,o=null==s?void 0:s.astNodeId,l=o&&e===o;return Boolean(a&&t===a&&l||!(t&&a)&&l)}(g,p,t),f=function({astNodeId:e,domNodeId:t},s){const n=e&&e===(null==s?void 0:s.astNodeId),a=t&&t!==(null==s?void 0:s.domNodeId);return n&&a}(g,p);return h?r.Active:f?r.Passive:void 0}},76796:(e,t,s)=>{e.exports=s(59264)},74765:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertSlotEntriesToActions=void 0,t.convertSlotEntriesToActions=(e,t)=>{const s=[];return e.forEach((e=>{"function"==typeof e?s.push(e(t)):e.test(t)&&s.push({key:e.id,data:{item:e.label,disabled:e.isDisabled(t),icon:e.icon},action:()=>e.action(t)})})),s}}}]);