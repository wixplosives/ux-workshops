(self.webpackChunk_wixc3_component_playground=self.webpackChunk_wixc3_component_playground||[]).push([[1516],{56830:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(5163),n=r(93849),s=i.__importStar(r(2206)),o=i.__importDefault(r(58729));t.default=new n.Feature({id:"discovery",dependencies:[s.default.asEntity,o.default.asEntity],api:{extensionsConfig:n.Slot.withType().defineEntity(s.processingEnv)}})},39750:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(5163),n=r(91570),s=r(2206),o=r(69144);i.__importDefault(r(56830)).default.setup(s.processingEnv,(({extensionsConfig:e},{project:{fs:t,projectService:r,pluggableProjectConfig:i,ignoredSubPathsConfig:a},fileAssets:{fileTaggerSlots:c}})=>{const d=i.get(s.PROJECT_CONFIG_NAME);e.stream((({tag:e,extensions:i})=>{const l=d.isValid()?d.get(a):s.DEFAULT_IGNORED_SUBPATHS,u=(0,o.createPathPredicate)(t,r.getProjectPath(),l);c.register({isApplicableToFile(e){if(!u(e))return!1;const t=(0,n.getFullExtname)(e);return i.some((e=>t===e))},tags:[e]})}))}))},59178:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(5163),n=r(93849),s=i.__importStar(r(2206)),o=i.__importStar(r(32510));t.default=new n.Feature({id:"fileAssets",dependencies:[s.default.asEntity,o.default.asEntity],api:{fileTaggerSlots:n.Slot.withType().defineEntity(s.processingEnv),assets:(0,o.defineComputedResource)().defineEntity(s.processingEnv)}})},18380:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i=r(5163);var n=r(59178);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.__importDefault(n).default}}),i.__exportStar(r(59178),t)},58729:(e,t,r)=>{e.exports=r(18380)},43934:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i=r(5163);i.__exportStar(r(31434),t);var n=r(31434);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.__importDefault(n).default}})},98180:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.directoryManipulator=t.directoryReducer=t.DirectoryChangeKind=void 0,function(e){e.FULL="full",e.ADD="add",e.REMOVE="remove"}(r=t.DirectoryChangeKind||(t.DirectoryChangeKind={})),t.directoryReducer=(e,t)=>{switch(t.kind){case r.FULL:return{value:t.value,invertingChanges:[{kind:r.FULL,value:e}]};case r.ADD:return{value:[...e,t.node],invertingChanges:[{kind:r.FULL,value:e}]};case r.REMOVE:return{value:e.filter((e=>e.name!==t.name)),invertingChanges:[{kind:r.FULL,value:e}]};default:return{value:e,invertingChanges:[{kind:r.FULL,value:e}]}}},t.directoryManipulator={reducer:t.directoryReducer}},61276:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileScannerComputeHandler=t.getDirectoryEntities=t.traverseFs=void 0;const i=r(93849),n=r(98180);t.traverseFs=function e({directoryPath:t,fs:r,filterFile:n=i.returnsTrue,filterDirectory:s=i.returnsTrue,directories:o=[],files:a=[]}){const{readdirSync:c}=r;o.push({path:t,name:r.basename(t)});for(const i of c(t,{withFileTypes:!0})){const c=i.name,d=r.join(t,c);i.isDirectory()&&s(d,c)?e({directoryPath:d,fs:r,filterFile:n,filterDirectory:s,directories:o,files:a}):i.isFile()&&n(d,c)&&a.push({path:d,name:c})}return{directories:o,files:a}},t.getDirectoryEntities=function({directoryPath:e,fs:t}){const{readdirSync:r}=t,i={directories:[],files:[]};for(const n of r(e,{withFileTypes:!0})){const r=n.name,s=t.join(e,r);n.isDirectory()?i.directories.push({path:s,name:r}):n.isFile()&&i.files.push({path:s,name:r})}return i},t.FileScannerComputeHandler=class{constructor(e,t,r,i,n){this.controller=e,this.manipulator=t,this.fs=r,this.pathPredicate=i,this.directoryManager=n}compute(e){let t=this.controller.getEmptyValue();const{changes:r,dependencies:i}=this.addDirectory(e,t);for(const e of r)t=this.manipulator.reducer(t,e).value;return{value:t,dependencies:i,status:{valid:!0}}}recompute(e,t,r,i){const n=e.getLatest(),s=[];let o=new Set(i);for(const e of r){if(!e.isValid())continue;const r=e.getType(),{changes:i,dependencies:a}=this.getDirectoryRelatedUpdates(e,t[r][e.getSerializedId()],n,o);s.push(...i),o=a}const a=Array.from(i).filter((e=>!e.isValid()));return{dependencies:new Set([...o].filter((e=>!a.includes(e)))),changes:s,status:{valid:!0}}}addDirectory(e,t){const r=new Set,{files:i,directoryResources:n}=this.addDirRecurse(e),s=[],o=this.controller.onFilesAdded(t,i.map((({path:e})=>e)));return n.forEach((e=>r.add(e))),s.push(...o.changes),{changes:s,dependencies:r}}addDirRecurse(e,t=[],r=[],i=[]){const n=this.directoryManager.get(e);i.push(n);const s=n.getLatest();for(const n of s){const s={name:n.name,path:this.fs.join(e,n.name)};this.pathPredicate(s.path)&&(n.stats.isDirectory?(t.push(s),this.addDirRecurse(s.path,t,r,i)):n.stats.isFile&&this.controller.predicate(s.path)&&r.push(s))}return{files:r,directories:t,directoryResources:i}}getDirectoryRelatedUpdates(e,t,r,i){if(t.isDisposed())return{changes:[],dependencies:i};const s=[],o=new Set(i),a=e.getChangesFromVersion(t),c=e.getId();return a.forEach((e=>{if(e.kind===n.DirectoryChangeKind.ADD){const t=this.fs.join(c,e.node.name);if(e.node.stats.isDirectory){if(this.pathPredicate(t)){const{changes:e,dependencies:i}=this.addDirectory(t,r);for(const e of i)o.add(e);s.push(...e)}}else if(this.pathPredicate(t)&&this.controller.predicate(t)){const{changes:e}=this.controller.onFilesAdded(r,[t]);s.push(...e)}}else if(e.kind===n.DirectoryChangeKind.REMOVE){const t=this.fs.join(c,e.name);s.push(...this.controller.onRemoved(r,t))}})),{changes:s,dependencies:o}}}},33506:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removePrefixPath=t.createPathPredicate=t.directoryDeepChildren=t.getPathsOfFilePath=t.getTreeNodePath=void 0;const i=r(71876),n=r(73654),s=r(91570);function o(e,t){return e.split(t).filter((e=>!!e))}function a(){return!0}t.getTreeNodePath=o,t.getPathsOfFilePath=function(e,t){var r;const i=e?o(e,t):[],n=[];for(let e=0;e<i.length;e++)n.push((null!==(r=n[e-1])&&void 0!==r?r:"")+t+i[e]);return n},t.directoryDeepChildren=async function*e(t,r,i=a,n=r){for(const s of await t.promises.readdir(r,{withFileTypes:!0})){const o=s.name,a=t.join(r,o),c=t.relative(n,a);if(s.isFile()){const e={type:"file",path:a,name:o,relativePath:c};i(e)&&(yield e)}else if(s.isDirectory()){const r={type:"directory",path:a,name:o,relativePath:c};i(r)&&(yield r,yield*e(t,a,i,n))}}},t.createPathPredicate=function(e,t,r){const n=r.map((e=>(0,i.makeRe)(e)));return r=>{const i=e.relative(t,r);return!n.some((e=>e.test(i)))}},t.removePrefixPath=(e,t)=>e?(0,s.replaceWinSlashes)(n.win32.relative(e,t)):(0,s.replaceWinSlashes)(t)},18012:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(5163);i.__exportStar(r(78204),t),i.__exportStar(r(98180),t),i.__exportStar(r(33506),t),i.__exportStar(r(98073),t),i.__exportStar(r(61276),t)},98073:(e,t)=>{"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.NodeType=t.FsEventType=void 0,(i=t.FsEventType||(t.FsEventType={}))[i.CREATE=0]="CREATE",i[i.LOAD=1]="LOAD",i[i.UPDATE=2]="UPDATE",i[i.DELETE=3]="DELETE",(r=t.NodeType||(t.NodeType={}))[r.directory=0]="directory",r[r.file=1]="file",r[r.virtual=2]="virtual",r[r.none=3]="none"},2206:(e,t,r)=>{e.exports=r(43934)},69144:(e,t,r)=>{e.exports=r(18012)}}]);