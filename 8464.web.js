"use strict";(self.webpackChunk_wixc3_component_playground=self.webpackChunk_wixc3_component_playground||[]).push([[8464],{47733:(e,t,n)=>{n.r(t),n.d(t,{classes:()=>r,cssStates:()=>a,keyframes:()=>i,namespace:()=>o,st:()=>c,stVars:()=>s,style:()=>l,vars:()=>d});const o="o469",r={root:"s1852",block:"s1846",blockText:"s1847",ident:"s1848",right:"s1849",icon:"s1850",relation:"s1851"},i={},s={},d={},a=n.stc.bind(null,o),l=n.sts.bind(null,o),c=l},93425:(e,t,n)=>{n.r(t),n.d(t,{classes:()=>r,cssStates:()=>a,keyframes:()=>i,namespace:()=>o,st:()=>c,stVars:()=>s,style:()=>l,vars:()=>d});const o="o240",r={root:"s1292"},i={},s={},d={},a=n.stc.bind(null,o),l=n.sts.bind(null,o),c=l},10109:(e,t,n)=>{n.r(t),n.d(t,{classes:()=>r,cssStates:()=>a,keyframes:()=>i,namespace:()=>o,st:()=>c,stVars:()=>s,style:()=>l,vars:()=>d});const o="o287",r={root:"s1290",header:"s1399",title:"s1392",placeholder:"s1291",content:"s1393",renderer:"s1394",visualizerItem:"s1396",actionButtons:"s1397",viewOnHover:"s1398"},i={},s={},d={},a=n.stc.bind(null,o),l=n.sts.bind(null,o),c=l},88290:(e,t,n)=>{n.r(t),n.d(t,{classes:()=>r,cssStates:()=>a,keyframes:()=>i,namespace:()=>o,st:()=>c,stVars:()=>s,style:()=>l,vars:()=>d});const o="o473",r={root:"s1858"},i={},s={},d={},a=n.stc.bind(null,o),l=n.sts.bind(null,o),c=l},57929:(e,t,n)=>{n.r(t),n.d(t,{classes:()=>r,cssStates:()=>a,keyframes:()=>i,namespace:()=>o,st:()=>c,stVars:()=>s,style:()=>l,vars:()=>d});const o="o401",r={root:"s1409",leftIcon:"s1410",title:"s1411",renderers:"s1395"},i={},s={},d={},a=n.stc.bind(null,o),l=n.sts.bind(null,o),c=l},20394:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ContextualPanelWrapper=void 0;const o=n(5163).__importStar(n(87363)),r=n(70268),i=n(10109),s=n(81862),d=n(91973);n(93425);const a=n(17109),l=n(95874),c=n(83135),u=n(16042),m=n(23766),p=n(18413);t.ContextualPanelWrapper=(0,o.memo)((function({children:e,visualizers:t,overlayId:n,simManager:f,...I}){var h;const{editing:{panelHeaderActionsSlot:g}}=(0,p.useSimulationTabContext)(),{lastSelectionScope:v}=(0,s.useElementsSelection)(),N=(0,o.useRef)(null),T=(0,c.useSlot)(g),{open:S,close:y}=(0,c.useOverlay)(null!=n?n:"",n,N,{placement:"left"},"fixed-overlay-config"),x=(0,u.useVisibility)(),P=null===(h=(0,s.useElementsSelection)({enabled:x}).lastSelectionScope)||void 0===h?void 0:h.selection,{astNodeIdToItemMapping:E,domNodeIdToItemMapping:D}=(0,m.useElementsTree)({enabled:x}),O=(0,o.useMemo)((()=>(0,d.getTreeItemByDomIdOrAstNodeId)(null==v?void 0:v.selection,E,D)),[null==v?void 0:v.selection,E,D]),_=(0,o.useMemo)((()=>{if(O&&(null==P?void 0:P.domNodeId))return Array.from(t).find((e=>e.kind===O.kind))}),[null==P?void 0:P.domNodeId,O,t]),b=(0,o.useCallback)((()=>{var e;const t=null===(e=N.current)||void 0===e?void 0:e.getBoundingClientRect();S({previewEnvId:I.previewEnvId,onClose:y,selection:P,simManager:f,initialPosition:t?{top:t.top,left:t.left}:{top:0,left:0}},{floating:!0})}),[y,S,I.previewEnvId,P,f]);return o.default.createElement("div",{className:i.classes.root},o.default.createElement("div",{className:i.classes.header},_?o.default.createElement("div",{ref:N,className:i.classes.visualizerItem},o.default.createElement(_.renderer,{value:O,className:i.classes.renderer,origin:a.ElementTreeVisualizerOrigin.SidebarSectionHeader,interactions:{onClick:n?b:void 0},filePath:null==P?void 0:P.astFilePath}),o.default.createElement("div",{className:i.classes.actionButtons},T.map((({id:e,component:t,showOnHeaderHover:n})=>o.default.createElement("span",{className:n?i.classes.viewOnHover:void 0,key:e},o.default.createElement(t,{simManager:f,treeItem:O,titleRef:N})))))):o.default.createElement("span",{className:i.classes.placeholder},l.content.selectedElementHeader.placeholder)),e&&o.default.createElement(r.VerticalScrollView,{className:i.classes.content},e))}))},83353:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.LaneTypes=void 0,(n=t.LaneTypes||(t.LaneTypes={})).Expression="expression",n.Repeater="repeater",n.Condition="condition",n.Prop="prop",n.Default="default"},23335:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isLastItemInLane=t.resolveLaneKey=t.resolveLaneKind=t.hatsToShow=t.isFirstVisibleElement=t.resolveLaneLabel=t.isLaneExists=t.resolveItemLanes=void 0;const o=n(58464),r=n(9240),i=n(17109),s=n(91570),d=n(95874),a=n(83353);function l(e,t){return e.some((e=>e.id===t.id))}function c(e,t){var n;if(!e.parent)return!0;const o=(null===(n=p(e.parent.children,t)[0])||void 0===n?void 0:n.id)===e.id,r=c(e.parent);return o&&r}function u(e){const t=e.node&&(0,r.isNodeOfKind)("jsx-text-element",e.node)||(0,i.isTreeItemOfKind)("null",e)||(0,i.isTreeItemOfKind)("trinary",e)||"string"===e.valueType||"number"===e.valueType||e.node&&(0,r.isNodeOfKind)("boolean",e.node);return e.node&&t||e.parent&&(0,o.isPropItem)(e.parent)&&t}function m(e){var t,n,r;return(0,o.isPropItem)(e)?(null===(n=null===(t=e.parent)||void 0===t?void 0:t.node)||void 0===n?void 0:n.astNodeId)+e.name:null===(r=e.node)||void 0===r?void 0:r.astNodeId}t.resolveItemLanes=function(e){const t=[[]];return function e(n){if(!n.parent)return;const s=t[0];if(((0,i.isTreeItemOfKind)("expression",n)&&"array"!==n.valueType||n.node&&(0,r.isNodeOfKind)("boolean",n.node))&&(l(s,n)||s.unshift(n)),(0,o.isSimulationEntityNode)(n.parent)&&(s.unshift(n.parent),t.unshift([])),(0,o.isPropItem)(n.parent)){const{parent:e}=n.parent;(null==e?void 0:e.children.some((e=>e!==n.parent&&(0,o.isPropItem)(e))))&&s.unshift(n.parent)}(0,i.isTreeItemOfKind)("expression",n.parent)&&"array"===n.parent.valueType?s.unshift(n.parent):(0,o.isElementItem)(n.parent)&&!(0,o.isPropItem)(n.parent)&&(n.parent.node&&(0,o.isFragment)(n.parent.node)?s.unshift(n.parent):(s.unshift(n.parent),t.unshift([]))),(0,o.hasMultipleReturns)(n.parent)&&s.unshift(n.parent),l(s,n.parent)||(0,o.isPropItem)(n.parent)||s.unshift(n.parent),e(n.parent)}(e),t[0]&&!t[0].length&&t.shift(),t},t.isLaneExists=l,t.resolveLaneLabel=function(e){return(0,i.isTreeItemOfKind)("expression",e)&&"array"===e.valueType?d.content.laneKinds.repeater:e.node&&(0,o.isFragment)(e.node)?d.content.laneKinds.fragment:(0,o.hasMultipleReturns)(e)||e.node&&(0,i.isTreeItemOfKind)("trinary",e)?d.content.laneKinds.condition:(0,i.isTreeItemOfKind)("expression",e)||e.node&&(0,r.isNodeOfKind)("jsx-expression",e.node)?d.content.laneKinds.expression:(0,o.isPropItem)(e)?e.name:e.kind},t.isFirstVisibleElement=c,t.hatsToShow=function(e,t,n,r){if(c(e,r))return t;const i=[];for(const s of t){const t=m(s);t&&((0,o.isPropItem)(s)&&!n.has(t)||!c(s,r)&&(!n.has(t)||u(e))||e.node&&(0,o.isTextNode)(e.node))&&(i.push(s),n.add(t))}return i},t.resolveLaneKind=function(e){const t=e.node&&(0,o.isFragment)(e.node),n=(0,i.isTreeItemOfKind)("expression",e)&&"array"===e.valueType,s=(0,o.isPropItem)(e);return t?a.LaneTypes.Expression:n?a.LaneTypes.Repeater:(0,o.hasMultipleReturns)(e)||e.node&&(0,r.isTrinaryNode)(e.node)?a.LaneTypes.Condition:s?a.LaneTypes.Prop:(0,o.isElementItem)(e)||(0,o.isSimulationEntityNode)(e)||(0,i.isTreeItemOfKind)("func",e)?a.LaneTypes.Default:a.LaneTypes.Expression},t.resolveLaneKey=m,t.isLastItemInLane=function({toggledItemsIds:e,item:t,predicate:n,showActiveElements:o}){return!(p(t.children,o).length&&!e.includes(t.id))&&function e(t){if(n(t))return!0;if(t.parent){const n=p(t.parent.children,o);return(0,s.last)(n)===t&&e(t.parent)}return!1}(t)};const p=(e,t)=>t?e.filter((e=>0!==e.appearances)):e},11923:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),n(5163).__exportStar(n(20394),t)},9606:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pluggableComponentVisualizer=void 0;const o=n(5163).__importStar(n(87363)),r=n(39906),i=n(57929),s=n(70268),d=n(15422);t.pluggableComponentVisualizer=e=>(e=>{const t=[...e],n=[],a=new Set([]);for(const e of t)if(n.push(e.renderer),e.extraParsers)for(const t of e.extraParsers)a.add(t);return{kind:"comp",renderer:e=>{const t=(0,o.useCallback)((()=>{var t;e.value.instanceDefinedAt&&(null===(t=e.actions)||void 0===t||t.exitToScope(e.value.instanceDefinedAt.scope,e.value.instanceDefinedAt.selection))}),[e.actions,e.value.instanceDefinedAt]);return o.default.createElement("div",{className:(0,i.st)(i.classes.root,{external:!e.value.node,externalLinkable:!!e.value.instanceDefinedAt},e.className)},o.default.createElement(r.ThemedComponentIcon,{className:i.classes.leftIcon,onClick:t}),o.default.createElement("div",{className:i.classes.title},o.default.createElement(d.TreeItemTitle,{className:i.classes.title,item:e.value}),o.default.createElement(s.EllipsisWithTooltip,{className:i.classes.renderers},n.map(((t,n)=>o.default.createElement(t,{key:n,...e}))))))},extraParsers:[...a]}})(e)},14949:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.envConfigVisualizer=void 0;const o=n(5163).__importDefault(n(87363)),r=n(69202),i=n(57929),s=n(15422);t.envConfigVisualizer={kind:"option",renderer:({value:e})=>o.default.createElement("div",{className:i.classes.root},o.default.createElement(r.WindowIcon,{className:i.classes.leftIcon}),o.default.createElement(s.TreeItemTitle,{className:i.classes.title,item:e}))}},60098:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.internalStructureVisualizer=void 0;const o=n(5163).__importDefault(n(87363)),r=n(57929),i=n(15422);t.internalStructureVisualizer={kind:"structure",renderer:({value:e})=>o.default.createElement("div",{className:r.classes.root},o.default.createElement(i.TreeItemTitle,{className:r.classes.title,item:e}))}},30344:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.expressionVisualizer=void 0;const o=n(5163).__importDefault(n(87363)),r=n(57929),i=n(70268),s=n(69202),d=n(9240),a=n(15422);t.expressionVisualizer={kind:"expression",renderer:e=>{const t=e.value.node,n=(0,d.isNodeOfKind)("jsx-expression",t)||(0,d.isNodeOfKind)("unparsed-with-roots",t)?t.code:"";return o.default.createElement("div",{className:r.classes.root},o.default.createElement(i.Tooltip,{content:n},o.default.createElement(s.TextIconWithBorder,{className:r.classes.leftIcon})),o.default.createElement(a.TreeItemTitle,{className:r.classes.title,item:e.value}))}}},67049:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.jsxFunctionVisualizer=void 0;const o=n(5163).__importDefault(n(87363)),r=n(57929),i=n(69202),s=n(47733),d=n(70268),a=n(58464),l=n(15422);t.jsxFunctionVisualizer={kind:"func",renderer:e=>o.default.createElement("div",{className:r.classes.root},o.default.createElement(i.HamburgerMenuIcon,{className:r.classes.leftIcon}),o.default.createElement(l.TreeItemTitle,{className:r.classes.title,item:e.value})),relationRenderer({parentNode:e,child:t}){const n=(0,a.getTopRepresentedNode)(t);if(n&&e.node.returnRoots.length>1){const t=e.node.returnRoots.find((e=>e.returnValue===n));return o.default.createElement(d.Tooltip,{content:o.default.createElement("div",null,t&&t.conditions&&t.conditions.length?t.conditions.map((e=>o.default.createElement("div",{key:e.astNodeId},e.code))):"Default")},o.default.createElement("span",{className:s.classes.relation},"?"))}return null}}},97489:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.jsxTextVisualizer=void 0;const o=n(5163).__importStar(n(87363)),r=n(57929),i=n(69202),s=n(15422);t.jsxTextVisualizer={kind:"text",renderer:e=>{const t=(0,o.useCallback)((()=>{var t;e.value.instanceDefinedAt&&(null===(t=e.actions)||void 0===t||t.exitToScope(e.value.instanceDefinedAt.scope,e.value.instanceDefinedAt.selection))}),[e.actions,e.value.instanceDefinedAt]);return o.default.createElement("div",{className:(0,r.st)(r.classes.root,{external:!e.value.node,externalLinkable:!!e.value.instanceDefinedAt})},o.default.createElement(i.TextIcon,{className:r.classes.leftIcon,onClick:t}),o.default.createElement(s.TreeItemTitle,{className:r.classes.title,item:e.value}))}}},3709:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pluggableNativeNodeVisualizer=void 0;const o=n(5163).__importStar(n(87363)),r=n(58464),i=n(57929),s=n(70268),d=n(67001),a=n(15422);t.pluggableNativeNodeVisualizer=e=>(e=>{const t=[...e],n=[],l=new Set([]);for(const e of t)if(n.push(e.renderer),e.extraParsers)for(const t of e.extraParsers)l.add(t);return{kind:"element",renderer:(0,o.memo)((function(e){const t=(0,r.getTreeItemTitle)(e.value),l=(0,d.getHtmlTagIcon)(t||""),c=(0,o.useCallback)((()=>{var t;e.value.instanceDefinedAt&&(null===(t=e.actions)||void 0===t||t.exitToScope(e.value.instanceDefinedAt.scope,e.value.instanceDefinedAt.selection))}),[e.actions,e.value.instanceDefinedAt]);return o.default.createElement("div",{className:(0,i.st)(i.classes.root,{external:!e.value.node,externalLinkable:!!e.value.instanceDefinedAt},e.className)},o.default.createElement(l,{className:i.classes.leftIcon,onClick:c}),o.default.createElement("div",{className:i.classes.title},o.default.createElement(a.TreeItemTitle,{className:i.classes.title,item:e.value}),o.default.createElement(s.EllipsisWithTooltip,{className:i.classes.renderers},n.map(((t,n)=>o.default.createElement(t,{key:n,...e}))))))})),extraParsers:[...l]}})(e)},32182:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.nullVisualizer=void 0;const o=n(5163).__importDefault(n(87363)),r=n(69202),i=n(57929),s=n(15422);t.nullVisualizer={kind:"null",renderer:({value:e})=>o.default.createElement("div",{className:i.classes.root},o.default.createElement(r.NullIcon,{className:i.classes.leftIcon}),o.default.createElement(s.TreeItemTitle,{className:(0,i.st)(i.classes.title,{type:"placeholder"}),item:e}))}},81256:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.propVisualizer=void 0;const o=n(5163).__importDefault(n(87363)),r=n(57929),i=n(15422);t.propVisualizer={kind:"prop",renderer:({value:e})=>o.default.createElement("div",{className:r.classes.root},o.default.createElement(i.TreeItemTitle,{className:r.classes.title,item:e}))}},30289:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.simulationPropVisualizer=void 0;const o=n(5163).__importDefault(n(87363)),r=n(57929),i=n(15422);t.simulationPropVisualizer={kind:"sim-prop",renderer:({value:e})=>o.default.createElement("div",{className:r.classes.root},o.default.createElement(i.TreeItemTitle,{className:r.classes.title,item:e}))}},89819:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.simulatedComponentVisualizer=void 0;const o=n(5163).__importDefault(n(87363)),r=n(57929),i=n(39906),s=n(15422);t.simulatedComponentVisualizer={kind:"simulated-component",renderer:({value:e})=>o.default.createElement("div",{className:r.classes.root},o.default.createElement(i.ThemedComponentIcon,{className:r.classes.leftIcon}),o.default.createElement(s.TreeItemTitle,{className:r.classes.title,item:e}))}},15422:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TreeItemTitle=void 0;const o=n(5163).__importDefault(n(87363)),r=n(70268),i=n(89562),s=n(88290);t.TreeItemTitle=({className:e,item:t})=>{const n=o.default.useMemo((()=>(0,i.getTreeItemTitle)(t)),[t]);return o.default.createElement(r.EllipsisWithTooltip,{className:(0,s.style)(s.classes.root,e)},n)}},4443:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.trinaryVisualizer=void 0;const o=n(5163).__importDefault(n(87363)),r=n(57929),i=n(69202),s=n(70268),d=n(47733),a=n(95874),l=n(15422);t.trinaryVisualizer={kind:"trinary",renderer:({value:e})=>o.default.createElement("div",{className:r.classes.root},o.default.createElement(i.QuestionMark,{className:r.classes.leftIcon}),o.default.createElement(l.TreeItemTitle,{className:r.classes.title,item:e})),relationRenderer:({parentNode:e,child:t})=>{const n=t.node===e.node.whenFalse||!!e.node.whenFalse&&t.inlinedParents&&t.inlinedParents.includes(e.node.whenFalse);return o.default.createElement(s.Tooltip,{content:o.default.createElement("div",null,n?a.content.condition.falseTooltip:a.content.condition.trueTooltip)},o.default.createElement("div",{className:(0,r.style)(d.classes.relation)},n?a.content.condition.false:a.content.condition.true))}}},94292:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.untracedVisualizer=void 0;const o=n(5163).__importDefault(n(87363)),r=n(57929),i=n(15422);t.untracedVisualizer={kind:"untraced",renderer:({value:e})=>o.default.createElement("div",{className:r.classes.root},o.default.createElement(i.TreeItemTitle,{className:r.classes.title,item:e}))}},92613:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VOID_ELEMENTS=t.LANE_KINDS=t.INDENT_HEIGHT=t.INDENT_WIDTH=t.SELECTION_PREVIEW_TOGGLE_OPTIONS=t.EditorComponents=t.DEFAULT_NUM_PARENTS_IN_HAT=t.HIGHLIGHT_TAG_HEIGHT=t.ELEMENTS_TREE_SECTION_ID=void 0;const o=n(69202),r=n(95874),i=n(17109);var s;t.ELEMENTS_TREE_SECTION_ID="outline",t.HIGHLIGHT_TAG_HEIGHT=18,t.DEFAULT_NUM_PARENTS_IN_HAT=3,(s=t.EditorComponents||(t.EditorComponents={})).canvas="Canvas",s.window="Window",t.SELECTION_PREVIEW_TOGGLE_OPTIONS=[{icon:o.CursorIcon,id:i.StageMode.selection,tooltip:r.content.selectionPreviewToggleTooltips.selection},{icon:o.VisibleSmallIcon,id:i.StageMode.preview,tooltip:r.content.selectionPreviewToggleTooltips.preview}],t.INDENT_WIDTH=18,t.INDENT_HEIGHT=36,t.LANE_KINDS=new Set(["variable","fragment","condition","prop","sim-prop","jsx-expression","expression","trinary","repeater"]),t.VOID_ELEMENTS=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"])},95874:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.content=void 0,t.content={panel:{tooltip:"Elements",header:"Elements"},nodeActions:{editCode:"Edit code",editExternalCode:"Edit external code",removeChild:"Delete element",editComponent:"Edit Component"},selectionPreviewToggleTooltips:{selection:"Select",preview:"Preview"},configuredTree:{window:"Window",canvas:"Canvas"},visualizers:{null:"Placeholder",structure:e=>`${e} structure`,untraced:"Other",fallback:"Unnamed",textNodeLabel:"Text"},laneKinds:{fragment:"Fragment",repeater:"Repeater",condition:"Condition",expression:"Expression"},condition:{true:"True",trueTooltip:"Shown when parent condition is true",false:"False",falseTooltip:"Shown when parent condition is false"},showOnlyActiveLayers:{title:"Show only active layers",actions:"More Actions"},errorPopup:{showDetails:"Show Details"},safeModeErrors:{component:{title:"Component Error",message:"Check the componentâ€™s code"},props:{title:e=>1===e.length?`Error in prop '${e[0]}'`:`Error in props ${e.map((e=>`'${e}'`)).join(", ")}`,message:e=>`Check the value of ${e.map((e=>`'${e}'`)).join(", ")} in the Properties panel`},child:{title:"Error in child"},elementLimit:{title:"Error: possibly a cyclic/recursive component",message:"Try undoing the latest change(s) to fix the issue."}},safeModeTooltips:{descendantError:"Error in descendant",componentError:e=>`Error: ${e}`,propsError:e=>`Error: ${e}`,childError:e=>`Error: ${e}`,elementLimitError:"Infinite circular rendering detected"},circularRenderingWarning:{message:"Infinite circular rendering detected.",showDetailsButtonText:"Show Details"},selectedElementHeader:{placeholder:"Select an Element"},actions:{toggleEditPreview:{name:"Inspect / Edit panel"}}}},81862:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useElementsTreeSelection=t.useElementsTreeScopes=t.useElementsSelection=void 0;const o=n(87363),r=n(9029),i=n(27941),s=n(18413),d=[];t.useElementsSelection=e=>{const{editing:{elementsSelectionManager:t}}=(0,r.useMainContext)(),{editing:{elementsScopesResource:n}}=(0,s.useSimulationTabContext)(),a=(0,i.useValue)({resource:n,enabled:!1!==(null==e?void 0:e.enabled)}),l=a&&a[a.length-1],c=(0,i.useResourceInstance)({resourceManager:t,resourceId:(0,o.useMemo)((()=>l&&n&&{scopeAstNodeId:l.astId,scopeFilePath:l.astFilePath,scopePreviewId:n.getId().previewId}),[l,n]),enabled:!1!==(null==e?void 0:e.enabled)}),u=null==n?void 0:n.getId().previewId,m=(0,i.useResources)({selections:{ids:u&&(null==a?void 0:a.map((e=>({scopeAstNodeId:e.astId,scopeFilePath:e.astFilePath,scopePreviewId:u}))))||[],resourceManager:t,defaultValue:void 0}},!1!==(null==e?void 0:e.enabled)),p=l&&u?m.selections.getValue({scopeAstNodeId:l.astId,scopeFilePath:l.astFilePath,scopePreviewId:u}):void 0,f=l&&m&&u?a.map(((e,t)=>t===a.length-1?{scope:e,...p}:{scope:e,...m.selections.getValue({scopeAstNodeId:e.astFilePath,scopeFilePath:e.astFilePath,scopePreviewId:u})})):d;return{lastSelectionScope:l?{scope:l,...p}:void 0,selectionScopes:f,selectionResource:c}};const a=[];t.useElementsTreeScopes=e=>{const{editing:{elementsScopesResource:t}}=(0,s.useSimulationTabContext)();return{scopes:(0,i.useValue)({resource:t,enabled:!1!==(null==e?void 0:e.enabled)})||a,resource:t}},t.useElementsTreeSelection=e=>{const{editing:{elementsSelectionManager:t}}=(0,r.useMainContext)(),{editing:{elementsScopesResource:n}}=(0,s.useSimulationTabContext)(),d=(0,i.useValue)({resource:n,enabled:!1!==(null==e?void 0:e.enabled)}),a=d&&d[d.length-1],l=(0,i.useResourceInstance)({resourceManager:t,resourceId:(0,o.useMemo)((()=>a&&n&&{scopeAstNodeId:a.astId,scopeFilePath:a.astFilePath,scopePreviewId:n.getId().previewId}),[a,n]),enabled:!1!==(null==e?void 0:e.enabled)}),c=(0,i.useValue)({resource:l,enabled:!1!==(null==e?void 0:e.enabled)});return{selection:null!=c?c:null,resource:l,manager:t}}},270:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useScannedStructure=t.useSubscribeToStructure=t.useStructureResource=void 0;const o=n(87363),r=n(27941),i=n(18413),s=n(57025),d={},a=[];t.useStructureResource=({enabled:e})=>{const{editing:{domStructureManager:t}}=(0,i.useSimulationTabContext)(),n=(0,r.useResourceInstance)({resourceManager:t,resourceId:d,enabled:e});return{structure:(0,r.useValue)({resource:n,defaultValue:a,enabled:e})||a,structureResource:n}},t.useSubscribeToStructure=e=>{const{editing:{domStructureManager:t}}=(0,i.useSimulationTabContext)(),n=(0,o.useMemo)((()=>t.get(d)),[t]);(0,r.useResourceSubscriber)(n,e)},t.useScannedStructure=e=>{const{structure:n,structureResource:o}=(0,t.useStructureResource)(e);return{structure:n,structureResource:o,scannedStructure:(0,s.scanDomArray)(n)}}},3243:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSameDragData=t.isSameDropData=t.isEditingDragData=t.isEditingDropData=t.dropInTarget=t.dropAfterTarget=t.dropBeforeTarget=t.draggedExistingNode=t.draggedNewNode=void 0;const o=n(83135);function r(e){return(0,o.isDragDataOfKind)("ast-drop-in-target",e)||(0,o.isDragDataOfKind)("ast-drop-after-target",e)}function i(e){return!!e&&(0,o.isDragDataOfKind)("new-node",e)||(0,o.isDragDataOfKind)("existing-node",e)}t.draggedNewNode=e=>({data:e,kind:"new-node"}),t.draggedExistingNode=e=>({kind:"existing-node",...e}),t.dropBeforeTarget=e=>({kind:"ast-drop-before-target",...e}),t.dropAfterTarget=e=>({kind:"ast-drop-after-target",...e}),t.dropInTarget=e=>({kind:"ast-drop-in-target",...e}),t.isEditingDropData=r,t.isEditingDragData=i,t.isSameDropData=(e,t)=>!((e||t)&&(!r(e)||!r(t)||e.kind!==t.kind||e.parentId!==t.parentId||e.filePath!==t.filePath||(0,o.isDragDataOfKind)("ast-drop-after-target",e)&&(0,o.isDragDataOfKind)("ast-drop-after-target",t)&&e.nodeId!==t.nodeId)),t.isSameDragData=(e,t)=>{if(!e&&!t)return!0;if(!i(e)||!i(t))return!1;if(e.kind!==t.kind)return!1;if((0,o.isDragDataOfKind)("existing-node",e)&&(0,o.isDragDataOfKind)("existing-node",t)){if(e.nodeId!==t.nodeId)return!1}else if((0,o.isDragDataOfKind)("new-node",e)&&(0,o.isDragDataOfKind)("new-node",t)&&e.data!==t.data)return!1;return!0}},51492:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isDropInTarget=t.isDropAfterTarget=t.isDropBeforeTarget=void 0;const o=n(83135);t.isDropBeforeTarget=function(e){return(0,o.isDragDataOfKind)("ast-drop-before-target",e)},t.isDropAfterTarget=function(e){return(0,o.isDragDataOfKind)("ast-drop-after-target",e)},t.isDropInTarget=function(e){return(0,o.isDragDataOfKind)("ast-drop-in-target",e)}},98395:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EditingDndResourceDefault=void 0,t.EditingDndResourceDefault={}},36632:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EditingDndService=void 0;const o=n(93849),r=n(60814),i=n(3243);t.EditingDndService=class{constructor(e,t){this.dragManager=e,this.editingDndResource=t,this.emitter=new o.EventEmitter,this.on=this.emitter.on.bind(this.emitter),this.off=this.emitter.off.bind(this.emitter),this.onStartDrag=e=>{const t=e.content;(0,i.isEditingDragData)(t)&&this.setDragData(t)}}init(){this.dragManager.on("startDrag",this.onStartDrag)}dispose(){this.dragManager.off("startDrag",this.onStartDrag)}startDrag(e,t,n,o){this.dragManager.startDrag(e,t,n,o)}dropSucceeded(e){this.emitter.emit("dropSucceeded",{droppedNode:e})}registerDropTarget(e,t,n){this.dragManager.registerDropTarget(e,t,this.resolveDragApi(n))}unregisterDropTarget(e){this.dragManager.unregisterDropTarget(e)}setDropData(e){this.editingDndResource.applyChange((0,r.fullChange)({...this.editingDndResource.getLatest(),dropData:e}))}setDragData(e){this.editingDndResource.applyChange((0,r.fullChange)({...this.editingDndResource.getLatest(),dragData:e}))}clearDndResource(){this.editingDndResource.applyChange((0,r.fullChange)({}))}resolveDragApi(e){return{onDrop:()=>{const{dragData:e,dropData:t}=this.editingDndResource.getLatest();e&&t&&(this.emitter.emit("drop",{dragData:e,dropData:t}),this.clearDndResource()),this.dragManager.beforeDrop(null)},onDragOver:t=>{const n=e(t),o=this.editingDndResource.getLatest().dropData;!(0,i.isSameDropData)(o,n)&&(this.setDropData(n),this.dragManager.beforeDrop(n||null))},onDragOut:()=>{this.setDropData(void 0),this.dragManager.beforeDrop(null)}}}}},54560:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(5163);o.__exportStar(n(51492),t),o.__exportStar(n(3243),t),o.__exportStar(n(36632),t),o.__exportStar(n(98395),t),o.__exportStar(n(15277),t)},15277:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useSelectDroppedNode=t.useRegisterDropTargetToDndService=void 0;const o=n(87363),r=n(69202),i=n(270),s=n(18413),d=n(46342),a=n(57025);t.useRegisterDropTargetToDndService=(e,t,n)=>{const{current:r}=(0,o.useRef)({});(0,o.useEffect)((()=>(t.current?e.registerDropTarget(r,t.current,n):e.unregisterDropTarget(r),()=>{e.unregisterDropTarget(r)})),[t,e,n,r])},t.useSelectDroppedNode=()=>{const{editing:{editingDndService:e}}=(0,s.useSimulationTabContext)(),{resource:t}=(0,d.useElementsTreeSelection)(),n=(0,o.useRef)(),a=(0,r.useIsMountedRef)(),u=(0,o.useCallback)((({droppedNode:e})=>{n.current=e,null==t||t.setSelection({kind:"in-scope",astId:e.nodeId,astFilePath:e.filePath,domNodeId:void 0})}),[t]);(0,i.useSubscribeToStructure)((0,o.useCallback)((e=>{var o;const r=n.current;if(a.current&&e&&r&&l(r,null===(o=null==t?void 0:t.getSelection())||void 0===o?void 0:o.selection)){const n=c(r,e);n&&requestAnimationFrame((()=>a.current&&(null==t?void 0:t.setSelection({kind:"in-scope",astId:r.nodeId,astFilePath:r.filePath,domNodeId:n.id}))))}}),[a,t])),(0,o.useEffect)((()=>(e.on("dropSucceeded",u),()=>e.off("dropSucceeded",u))),[e,u])};const l=({filePath:e,nodeId:t},n)=>n&&"in-scope"===n.kind&&n.astId===t&&n.astFilePath===e&&void 0===n.domNodeId,c=(e,t)=>{const n=(0,a.scanDomArray)(t).byId(e.filePath,e.nodeId);return null==n?void 0:n[0]}},5487:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getModificationToRemoveChild=t.getModificationToAppendChild=t.getModificationToPrependChild=t.getModificationToAddChild=void 0;const o=n(9240);function r(e,t,n,o,r){switch(r){case"before":return function(e,t,n,o){return{node:e,newParentId:t,placeholderId:o(),...s(n,o)}}(e,t,n,o);case"after":return function(e,t,n,o){return{node:e,newParentId:t,placeholderId:o(),...a(n,o)}}(e,t,n,o)}}function i(e,t,n){switch(n){case"before":return s(e,t);case"after":return a(e,t)}}function s(e,t){return{kind:"add-before",beforeChildId:e,spaceBeforeId:t(),spaceAfterId:t()}}function d(e){return{kind:"add-instead",insteadOfChildId:e}}function a(e,t){return{kind:"add-after",afterChildId:e,spaceBeforeId:t(),spaceAfterId:t()}}function l(e,t){return{kind:"mod",modification:"moveNode",modificationArgs:t,nodeKind:"jsx-file",targetId:e}}function c(e,t){return{kind:"mod",modification:"addChild",modificationArgs:t,targetId:e.astNodeId,nodeKind:e.kind}}function u(e,t,n,s,a,u,f){if(!(s&&t&&e&&a))return[];const I=n&&function(e,t,n,r,i,s){return(0,o.isJSXExpressionNode)(e)&&e===t?[]:(0,o.isNullNode)(t)?s?[c(n,{newChild:e,...d(t.astNodeId)})]:[l(r,p(e,n.astNodeId,t.astNodeId,i))]:(0,o.isJSXProp)(t)&&(void 0!==(a=t.value)&&!0!==a&&"string"!=typeof a&&(0,o.isNullNode)(a))?s?[c(t,{newChild:e,...d(t.value.astNodeId)})]:[l(r,p(e,t.astNodeId,t.value.astNodeId,i))]:void 0;var a}(e,t,n,s,a,u);if(I)return I;if("first"===f&&function(e,t){return m(e,t,0)}(t,e)||"last"===f&&function(e,t){return(0,o.isJSXElementNode)(e)&&m(e,t,e.children.length-1)}(t,e))return[];const h="first"===f?"after":"before";return u?[c(t,{newChild:e,...i(void 0,a,h)})]:[l(s,r(e,t.astNodeId,void 0,a,h))]}function m(e,t,n){const r=(0,o.isJSXElementNode)(e)&&e.children.filter((e=>!function(e){return(0,o.isJSXTextNode)(e)&&"\n"===e.value}(e)));return r&&n>=0&&n<r.length&&r[n].astNodeId===(null==t?void 0:t.astNodeId)}function p(e,t,n,o){return{node:e,newParentId:t,placeholderId:o(),...d(n)}}function f(e,t){return t?[{kind:"mod",modification:"setValue",modificationArgs:{value:I(t)},nodeKind:e.kind,targetId:e.astNodeId}]:[]}function I(e){return(0,o.createNullNode)({astNodeId:e()})}function h(e,t,n){return function(e,t,n,o){return{kind:"mod",modification:"removeChild",modificationArgs:{childId:n,placeholderId:o()},nodeKind:t,targetId:e}}(e.astNodeId,e.kind,t,n)}t.getModificationToAddChild=function(e,t,n,o,s,d,a="after"){return o&&e&&n&&s?d?[c(n,{newChild:e,...i(null==t?void 0:t.astNodeId,s,a)})]:t&&e!==t?[l(o,r(e,n.astNodeId,t.astNodeId,s,a))]:[]:[]},t.getModificationToPrependChild=function(e,t,n,o,r,i){return u(e,t,n,o,r,i,"first")},t.getModificationToAppendChild=function(e,t,n,o,r,i){return u(e,t,n,o,r,i,"last")},t.getModificationToRemoveChild=function(e,t,n){if(!e||!t||!n)return[];if((0,o.isJSXElementNode)(e)){const o=(r=t,e.props.find((e=>e.astNodeId===r)));if(o)return f(o,n)}var r;return(0,o.isJSXProp)(e)?f(e,n):[h(e,t,n)]}},43192:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeAttachable=t.canAttachToParent=t.canDetachFromParent=void 0;const o=n(9240),r=n(98066),i=n(92613);function s(e,t){return!!e&&((0,o.isJSXElementNode)(e)||(0,o.isJSXExpressionNode)(e)||(0,o.isJSXTextNode)(e)||function(e,t){return(0,o.isNullNode)(e)&&!(0,o.isJSXExpressionNode)(t)&&!(0,o.isTrinaryNode)(t)}(e,t)||(0,o.isStringNode)(e)||(0,o.isSimplePropertyAccessNode)(e)||l(e))&&!(0,o.isArrayNode)(e)&&!(0,r.isJSXFunction)(t)&&!(0,o.isUnparsedWithParsedRoots)(t)}function d(e){if((0,o.isNullNode)(e))return!0;if(l(e))return!0;if(!(0,o.isJSXElementNode)(e))return!1;if(function(e){return!a(e)}(e))return!0;const t=c(e);return a(e)&&void 0!==t&&!i.VOID_ELEMENTS.has(t)}function a(e){const t=c(e);return!!t&&t.length>0&&t.charAt(0).toLowerCase()===t.charAt(0)}function l(e){return!!e&&(0,o.isJSXProp)(e)&&"children"===e.name}function c(e){if(e&&((0,o.isUnparsedWithParsedRoots)(e.type)||(0,o.isUnparsedNode)(e.type)))return e.type.code}t.canDetachFromParent=s,t.canAttachToParent=function(e,t,n){return!!(e&&n&&s(e,t))&&!!((0,o.isJSXElementNode)(e)||(0,o.isNullNode)(e)||(0,o.isJSXTextNode)(e)||(0,o.isJSXExpressionNode)(e)||(0,o.isStringNode)(e))&&d(n)},t.isNodeAttachable=d},91647:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ElementsScopesResource=void 0;const o=n(60814),r=n(91570);class i extends o.Resource{addInternalScope(e){const t=this.getScopes();if(!t)return this.setScopes([e]);const n=e,o=(e,t)=>e.astId===t.astId&&e.displayName===t.displayName&&e.astFilePath===t.astFilePath,r=t.slice(0,t.length-1).find((e=>o(n,e)));if(r)return void this.exitToScope(r);const i=t&&t.length>0?t[t.length-1]:void 0;i&&!o(i,n)&&this.setScopes([...t,n])}changesScopeIndex(e){const t=this.getLatest(),n=t.length-1,o=t[n];this.setScopes([...t.slice(0,n),{...o,instanceIndex:(o.instanceIndex+1)%o.instanceAmount,domNodeId:e}])}exitToScope(e){const t=this.getLatest(),n=t.findIndex((t=>s(t,e)));if(-1===n)throw new Error("Exit scope, selection scope not found");this.setScopes(t.slice(0,n+1))}getCurrentScope(){return(0,r.last)(this.getScopes())}getScopes(){return this.getLatest()}setScopes(e){this.applyChange((0,o.fullChange)(e))}}t.ElementsScopesResource=i;const s=(e,t)=>e.astId===t.astId&&e.astFilePath===t.astFilePath&&e.domNodeId===t.domNodeId},350:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ElementsSelectionResource=void 0;const o=n(60814);class r extends o.Resource{setSelection(e,t){const n=this.getLatest();this.applyChange((0,o.fullChange)(e?{...n,selection:e,selectionSource:t}:null))}clearSelection(){this.setSelection(void 0,void 0)}getSelection(){return this.getLatest()}}t.ElementsSelectionResource=r},693:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useSelectedElementsTreeItem=void 0;const o=n(16042),r=n(81862),i=n(23766),s=n(91973);t.useSelectedElementsTreeItem=function(){const e=(0,o.useVisibility)(),{lastSelectionScope:t}=(0,r.useElementsSelection)({enabled:e}),{domNodeIdToItemMapping:n,astNodeIdToItemMapping:d}=(0,i.useElementsTree)({enabled:e});return(0,s.getTreeItemByDomIdOrAstNodeId)(null==t?void 0:t.selection,d,n)}},72178:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useSelectionFilePath=void 0;const o=n(16042),r=n(81862);t.useSelectionFilePath=function(){const e=(0,o.useVisibility)(),{lastSelectionScope:t}=(0,r.useElementsSelection)({enabled:e});return null==t?void 0:t.scope.astFilePath}},18729:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultElementsTree=void 0,t.defaultElementsTree={rootNodes:[],parentMapping:new Map,astNodeIdToItemMapping:new Map,domNodeIdToItemMapping:new Map}},23766:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useElementsTree=t.useElementsTreeResource=void 0;const o=n(87363),r=n(18413),i=n(27941),s=n(16042),d=n(18729);t.useElementsTreeResource=()=>{const{simulation:{simulationData:{compExportName:e,compFilePath:t,previewId:n,simulationFilePath:d}},editing:{elementsTreeManager:a,elementsTreeConfig:{simulationScope:l}}}=(0,r.useSimulationTabContext)(),c=(0,o.useMemo)((()=>d?{compExportName:e,compFilePath:t,previewId:n,simulationFilePath:d,simulationScopeEnabled:l}:void 0),[e,t,n,d,l]);return(0,i.useResourceInstance)({resourceManager:a,resourceId:c,enabled:(0,s.useVisibility)()})},t.useElementsTree=({enabled:e=!0})=>(0,i.useValue)({resource:(0,t.useElementsTreeResource)(),enabled:e})||d.defaultElementsTree},32221:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.expandWithStructure=t.expandByConditionalChildren=t.getNextLocationSelection=t.getScopeFromLocation=void 0;const o=n(9240),r=n(36150),i=n(64835),s=n(58464),d=n(57025),a=n(91570),l=(e,t)=>{if(!t.has(e))return t.add(e),e;let n=0;for(;t.has(e+"#"+n);)n++;return t.add(e+"#"+n),e+"#"+n},c=(e,t)=>Math.max(e,...t.map((e=>e.element.appearances))),u=({astFilePath:e,astId:t})=>e+"_"+t;function m(e,{domNodeIdToItemMapping:t,astNodeIdToItemMapping:n}){var o,r;e.domNodeId&&!(0,s.shouldHideTreeNode)(e)&&t&&(t.has(e.domNodeId)||t.set(e.domNodeId,[]),t.get(e.domNodeId).push(e)),(null===(o=e.node)||void 0===o?void 0:o.astNodeId)&&n&&(n.has(e.node.astNodeId)||n.set(e.node.astNodeId,[]),null===(r=n.get(e.node.astNodeId))||void 0===r||r.push(e))}t.getScopeFromLocation=(e,t,n)=>{if("unknown"===e.location.fileName)return{};const o={},r=n.astValues[e.location.fileName];if(!r)throw new Error(`AST resources are not ready for file ${e.location.fileName}`);const s=n.repo.getASTInfo(r),d=s.byId(e.location.astNodeId);if(r.owners&&d){const a=r.owners.find((e=>e.astNodeId===d.astNodeId||s.isChildOf(e,d))),l=r.simulations.find((e=>s.isChildOf(e,d))),c=n.isRootScopeASimulation&&null!=l?l:a;if(a&&c){if(!o[e.location.fileName]||!o[e.location.fileName][c.astNodeId]){o[e.location.fileName]=o[e.location.fileName]||{};const r=S(c,n.repo).map((e=>e.astNodeId)),s=n.unscopedScannedDom.parentsByDomId(t).find((t=>t.components.find((t=>r.includes(t.location.astNodeId)&&t.location.fileName===e.location.fileName)))),d=((e,t)=>{const n=u(e);t.foundScopes[n]||(t.foundScopes[n]=[]);const o=t.foundScopes[n].find((t=>t.domNodeId===e.domNodeId));if(o)return o;const r=t.foundScopes[n].length;for(const e of t.foundScopes[n])e.instanceAmount=r+1;const i={...e,instanceIndex:r,instanceAmount:r+1};return t.foundScopes[n].push(i),i})({astId:c.astNodeId,domNodeId:"fragment"!==e.type?(null==s?void 0:s.id)||t:void 0,displayName:(0,i.getNodeDisplayName)(c),astFilePath:e.location.fileName},n);return o[e.location.fileName][c.astNodeId]=d,{scope:d,isCurrent:c!==n.ownerNode}}o[e.location.fileName][c.astNodeId].instanceAmount++}}return{}},t.getNextLocationSelection=(e,n,o)=>{const r=e.components.findIndex((e=>e.location.astNodeId===n)),i=e.components[r+1];if(i){const{scope:n}=(0,t.getScopeFromLocation)(i,e.id,o);if(n)return f(e,i,n)}},t.expandByConditionalChildren=(e,n,o,r,i,s)=>{const{usedIds:d}=o;if(!i){let a=n;const l=e.children.flatMap((e=>{const n=(0,t.expandWithStructure)(e,a,o,i,r,s);return a=a.filter((e=>!n.find((t=>{var n,o;return(null===(n=t.matched)||void 0===n?void 0:n.includes(e.id))||(null===(o=t.skipped)||void 0===o?void 0:o.includes(e.id))})))),n})),u=l.map((e=>e.element)),p=v(e,{appearances:c(0,l),children:u},d);return m(p,o),[{element:p,matched:O(l),skipped:D(l)}]}const a=e.children.map((e=>(0,t.expandWithStructure)(e,n,o,i,r,s))),l=a.reduce(((t,n,r)=>{const i=n.map((e=>e.element));if(n.length>1||i[0].appearances)for(const i of n){const n=[...e.children];n.splice(r,1,i.element);const s=v(e,{appearances:1,children:N(n,d)},d);m(s,o),t.push({element:s,skipped:i.skipped,matched:i.matched})}return t}),[]);if(l.length)return l;const u=v(e,{appearances:0,children:a.flat().map((e=>e.element))},d);return m(u,o),[{element:u}]};const p=(e,n,o,r,s,d,l)=>{const c=(0,a.last)(o.components);if("text"===(null==c?void 0:c.type)&&0===c.value.trim().length)return null;const u=l?((e,t,n)=>{const o=((e,t)=>{if(e.fileName===t.root.filePath)return e.astNodeId?t.root.scannedInfo.byId(e.astNodeId):void 0})(e,n);if(o){const e=(0,i.getParentInScope)(o,t,n.root.scannedInfo);if(e)return{node:o,parentInScope:e}}})(r.location,e,s):void 0;if(u&&s.resolvedRoots[u.parentInScope.astNodeId]){const e=(0,t.expandWithStructure)(s.resolvedRoots[u.parentInScope.astNodeId],[o],s,!1,d);if(e.length)return e[0].element}const p=l?(0,t.getScopeFromLocation)(r,o.id,s):void 0,f=g(o,r,s,n,null==p?void 0:p.scope);return f&&m(f,s),f},f=(e,t,n)=>{if(n)return{scope:n,selection:{astFilePath:t.location.fileName,astId:t.location.astNodeId,kind:"in-scope",domNodeId:e.id}}},I=(e,t,n)=>{const o=f(e,t,n);return o?{definedAt:o}:{}},h=(e,t,n)=>{if((0,r.isExpressonAstInfo)(t))return{};const o=f(e,t,n);return o?{instanceDefinedAt:o}:{}},g=(e,n,o,i,s)=>{var d,a,c,m,p;const f=s?u(s):void 0,g=s?o.astValues[s.astFilePath]:void 0,v=g?o.repo.getASTInfo(g):void 0,N=s?null==v?void 0:v.byId(s.astId):void 0,T=(N?S(N,o.repo):[]).some((e=>e.astNodeId===n.location.astNodeId)),y={id:l(f||"unknown",o.usedIds),appearances:1,domNodeId:e.id,generatedAtAstId:null==i?void 0:i.astNodeId};if(T)return(0,r.componentTreeItem)({...y,...I(e,n,s)});switch(n.type){case"text":return(0,r.textTreeItem)({...y,value:n.value,...h(e,n,s)});case"native":return(0,r.nativeElementTreeItem)({...y,tagName:n.tagName,...h(e,n,s)});case"component":{const i=e.components.findIndex((e=>e===n)),d=e.components[i+1],a=d?(0,t.getScopeFromLocation)(d,e.id,o):void 0;return(null==a?void 0:a.scope)?(0,r.componentTreeItem)({...y,...I(e,d,a.scope),...h(e,n,s)}):(0,r.componentTreeItem)({...y,...h(e,n,s)})}case"fragment":return(0,r.nativeElementTreeItem)({...y,tagName:"<>",...h(e,n,s)});case"child-expression":case"prop-expression":return"string"===n.valueType||"number"===n.valueType?(0,r.textTreeItem)({...y,value:(null===(d=n.expressionValue)||void 0===d?void 0:d.toString())||"",...h(e,n,s)}):null;case"spread-expression":return"string"===(null===(a=n.properties.children)||void 0===a?void 0:a.valueType)||"number"===(null===(c=n.properties.children)||void 0===c?void 0:c.valueType)?(0,r.textTreeItem)({...y,value:(null===(p=null===(m=n.properties.children)||void 0===m?void 0:m.expressionValue)||void 0===p?void 0:p.toString())||"",...h(e,n,s)}):null}return null},v=(e,t,n)=>{const o=l(e.id,n),{error:r,hasErrorInDescendants:i,...s}=t,d={...e,...s,id:o};return r&&(d.error=r),i&&(d.hasErrorInDescendants=i),d},N=(e,t)=>{const n=[];for(const o of e){const e=N(o.children,t);n.push(v(o,{children:e},t))}return n};t.expandWithStructure=(e,n,i,a,u,f,h=!1)=>{var g,N,S;const{root:y,usedIds:P}=i,E=e.node;if((0,r.isTreeItemOfKind)("unresolved-ref",e)){if(!i.resolvedRoots[e.node.targetId]||u.has(e.node.targetId)&&!n.length)return[];const o=(0,t.expandWithStructure)(i.resolvedRoots[e.node.targetId],n,i,a,new Set([...u.values(),e.node.targetId]),f).map((t=>({...t,element:{...t.element,inlinedParents:[...e.inlinedParents,E,...t.element.inlinedParents]}})));return e.isInternalStructure?[{element:(0,r.internalComponentStructureTreeItem)({componentName:e.name,id:l(e.name+"_internalstructure_",P),node:o[0].element.node,appearances:c(0,o),children:1===o.length?o[0].element.children:o.map((e=>e.element))})}]:o}if((0,r.isTreeItemOfKind)("prop",e)||(0,r.isTreeItemOfKind)("sim-prop",e)||(0,r.isTreeItemOfKind)("option",e)){const o=e.children.flatMap((e=>(0,t.expandWithStructure)(e,n,i,!0,u))),r=v(e,{children:o.map((e=>e.element)),appearances:c(0,o)},P);return m(r,i),[{element:r}]}if((0,r.isTreeItemOfKind)("func",e)||(0,r.isTreeItemOfKind)("owner",e)||(0,r.isTreeItemOfKind)("trinary",e))return(0,t.expandByConditionalChildren)(e,n,i,u,a||!!e.inlinedParents.find((e=>(0,o.isNodeOfKind)("unparsed-with-roots",e))),f);if((0,r.isTreeItemOfKind)("null",e)){const t=(0,o.isNodeOfKind)("null",e.node)?null:e.node.value,n=(null==f?void 0:f.value)===t?1:0;return[{element:v(e,{appearances:n},P)}]}if((0,r.isTreeItemOfKind)("simulated-component",e)){const o=e.simulationFileName,r=x(n,e.node.astNodeId,o),s=r.length?1:0,a=e.children.flatMap((e=>(0,t.expandWithStructure)(e,n,i,!0,u))).map((e=>e.element));return(r.length?r:[void 0]).map((n=>{const o=n?(0,t.getNextLocationSelection)(n.dom,e.node.astNodeId,i):void 0,r=(0,d.findComponentById)(null==n?void 0:n.dom,e.node.astNodeId,e.simulationFileName),l=n&&o&&r?o:e.definedAt,c=v(e,{children:a,appearances:s,definedAt:l,domNodeId:null==n?void 0:n.dom.id,error:null==n?void 0:n.dom.error,hasErrorInDescendants:null==n?void 0:n.dom.hasErrorInDescendants},P);return m(c,i),{element:c}}))}if((0,r.isTreeItemOfKind)("unresolved-imported-ref",e))return[];const b=null==E?void 0:E.astNodeId,w=b?x(n,E.astNodeId,i.root.filePath):[],A=w.length?1:0;if((0,r.isTreeItemOfKind)("text",e)){const t=e.node,n=t&&(0,o.isNodeOfKind)("jsx-text-element",t),r=void 0!==(null==f?void 0:f.value)&&null!==(null==f?void 0:f.value)&&f.value.toString()===e.value,s=n?{appearances:w[0]?1:0,domNodeId:null===(g=w[0])||void 0===g?void 0:g.dom.id}:{appearances:r?1:0,domNodeId:r?f.domNodeId:void 0},d=v(e,s,P);return m(d,i),[T(d,n?w[0]:void 0)]}if((0,r.isTreeItemOfKind)("expression",e)){const a=e.node,l=null===(N=w.find((e=>e.dom.error)))||void 0===N?void 0:N.dom,f=null==l?void 0:l.error,I=w.some((e=>e.dom.hasErrorInDescendants));if(l)return[{element:v(e,{error:f,appearances:1,hasErrorInDescendants:I,domNodeId:l.id},P),..._(w)}];if(!(0,o.isNodeOfKind)("jsx-expression",a)){const o=e.children.flatMap((e=>(0,t.expandWithStructure)(e,n,i,!0,u))),r=c(A,o),s=v(e,{appearances:r,children:o.map((e=>e.element)),error:f,hasErrorInDescendants:I},P);return m(s,i),[{element:s,matched:O(o),skipped:D(o)}]}const g=w.map((e=>(0,d.findComponentById)(e.dom,a.astNodeId,y.filePath))).filter((e=>!!e)),T=g.map((e=>({dom:e.dom,expression:e.comp,result:e.nextNoExpression||e.nextComp||e.prevComp}))),x=g[0]?g[0].comp:void 0,E=null==x?void 0:x.expressionValue,b=h?n:T.map((e=>e.dom));let C=e.children.flatMap((e=>{var n;return(0,t.expandWithStructure)(e,b,i,!1,u,{value:E,domNodeId:null===(n=g[0])||void 0===n?void 0:n.dom.id})}));if("array"===(null==x?void 0:x.valueType)&&(e.valueType="array"),1===C.length&&(0,r.isTreeItemOfKind)("expression",C[0].element)&&(C=C[0].element.children.map((e=>({element:{...e,inlinedParents:[...C[0].element.inlinedParents,C[0].element.node,...e.inlinedParents]},matched:C[0].matched,skipped:C[0].skipped})))),T.length){const t=[];let n=[...C];for(const r of T){const d=C.find((e=>{var t;return null===(t=e.matched)||void 0===t?void 0:t.includes(r.dom.id)}));if(d)n.find((e=>e===d))&&(t.push(d),n.splice(n.indexOf(d),1));else{const d=null===(S=r.result)||void 0===S?void 0:S.location.astNodeId,a=d&&i.root.scannedInfo.byId(d);r.result&&a&&(0,o.isJSXElementNode)(a)&&"element"===(0,s.componentNodeType)(a)&&(r.result={...r.result,type:"native",tagName:(0,s.getNodeTitle)(a),attributes:{}});const l=p(i.ownerNode,e.node,r.dom,r.result||r.expression,i,u,!!r.result);if(l){const e=n.filter((e=>{var t;return null===(t=e.skipped)||void 0===t?void 0:t.includes(r.dom.id)}));e.length&&(n=n.filter((t=>!e.includes(t))),l.children=e.map((e=>e.element))),t.push({element:l,matched:[r.dom.id]})}}}C=[...t,...n]}const R=(null==x?void 0:x.valueType)||"unknown";return function(e,t,n,o,r){const i=e.node,s=n.map((e=>e.element));if(1!==s.length||!s[0].node){const i=v(e,{...t,children:s},o);return m(i,r),[{element:i,matched:O(n),skipped:D(n)}]}return n.map((e=>{const n=e.element,s=v(n,t.appearances?{inlinedParents:[i,...n.inlinedParents],appearances:1,domNodeId:t.domNodeId}:{inlinedParents:[i,...n.inlinedParents]},o);return m(s,r),{element:s,skipped:e.skipped,matched:e.matched}}))}(e,{appearances:c(0,C),valueType:R,...void 0!==E?{expressionValue:E}:{},error:f,hasErrorInDescendants:I},C,P,i)}if((0,r.isTreeItemOfKind)("element",e)){if("fragment"===(0,s.componentNodeType)(e.node)){const o=e.children.flatMap((e=>(0,t.expandWithStructure)(e,n,i,!1,u))),r=D(o),s=v(e,{children:o.map((e=>e.element)),appearances:c(0,o)},P);return m(s,i),[{element:s,skipped:r,matched:O(o)}]}return(w.length?w:[void 0]).map((n=>{const o=e.children.flatMap((e=>(0,t.expandWithStructure)(e,n?[n.dom]:[],i,!1,u))),r=n?n.dom.children.reduce(((t,n)=>{const r=o.find((e=>{var t;return null===(t=e.matched)||void 0===t?void 0:t.includes(n.id)}));if(!r&&e.node&&n.components.length){const o=p(i.ownerNode,e.node,n,n.components[0],i,u,!0);o&&t.push({element:o,matched:[n.id]})}return t}),o):o,s=v(e,{children:r.map((e=>e.element)),appearances:n?1:0,domNodeId:null==n?void 0:n.dom.id,error:null==n?void 0:n.dom.error,hasErrorInDescendants:null==n?void 0:n.dom.hasErrorInDescendants},P);return m(s,i),{element:s,matched:(null==n?void 0:n.dom.id)?[null==n?void 0:n.dom.id]:void 0,skipped:(null==n?void 0:n.skipped)?[null==n?void 0:n.skipped]:void 0}}))}if((0,r.isTreeItemOfKind)("comp",e)){let n,o;const s=w.reduce(((t,r)=>{const i=r.dom.components.findIndex((t=>{var n;return t.location.fileName===y.filePath&&t.location.astNodeId===(null===(n=e.node)||void 0===n?void 0:n.astNodeId)}));if(-1!==i){const e=r.dom.components.find(((e,t)=>t>i&&"fragment"===e.type));e?(o&&n&&!(0,d.isSameDomAst)(e,n)&&(t.push(o),o=void 0),o=o?[...o,r]:[r],n=e,e.numberOfChildren===o.length&&(t.push(o),o=void 0,n=void 0)):(o&&(t.push(o),o=void 0,n=void 0),t.push([r]))}return t}),[]);return(s.length?s:[[void 0]]).map((n=>{const o=n[0],s=n[0]?n.map((e=>e.dom)):[],d=o&&b?(0,t.getNextLocationSelection)(o.dom,b,i):void 0,a=new Map,c=!d,p=e.children.flatMap((e=>(0,t.expandWithStructure)(e,s,i,!1,u,void 0,!0))).map((e=>e.element)),f=(n,o=[])=>{var s;e:for(const d of n.children)if(!i.domNodeIdToItemMapping.has(d.id))for(const n of d.components){const{scope:c}=(0,t.getScopeFromLocation)(n,d.id,i);if(c){const t=(0,r.createNodeAstKey)(c.astFilePath,c.astId);a.set(t,c);const i={id:l(t,P),appearances:1,domNodeId:d.id,...I(d,n,c),generatedAtAstId:(null===(s=e.node)||void 0===s?void 0:s.astNodeId)||e.generatedAtAstId},u=(0,r.componentTreeItem)(i);u&&o.push(u);continue e}d.children.forEach((e=>f(e,o)))}return o},h=!!s.find((e=>i.domNodeIdToItemMapping.has(e.id))),g=c&&o&&!h?s.flatMap((e=>f(e))):[];if(g.length){if(!p[0]||(0,r.isTreeItemOfKind)("prop",p[0])){const t=v(e,{children:[...p,(0,r.untracedChildrenItem)({id:l((null==E?void 0:E.astNodeId)+"_untraced",P),children:g,appearances:1})],appearances:A,domNodeId:null==o?void 0:o.dom.id},P);return d&&(t.definedAt=d),m(t,i),T(t,o)}const t=v(e,{children:[(0,r.propertyTreeItem)({children:p,id:l((null==E?void 0:E.astNodeId)+"_children",P),name:"children",appearances:1}),(0,r.untracedChildrenItem)({id:l((null==E?void 0:E.astNodeId)+"_untraced",P),children:g,appearances:1})],appearances:A,domNodeId:null==o?void 0:o.dom.id},P);return d&&(t.definedAt=d),m(t,i),T(t,o)}const N=v(e,{children:p,appearances:A,domNodeId:null==o?void 0:o.dom.id,error:null==o?void 0:o.dom.error,hasErrorInDescendants:null==o?void 0:o.dom.hasErrorInDescendants},P);return d&&(N.definedAt=d),m(N,i),T(N,o)}))}return[]};const T=(e,t)=>({element:e,matched:(null==t?void 0:t.dom)?[null==t?void 0:t.dom.id]:e.domNodeId?[e.domNodeId]:void 0,skipped:(null==t?void 0:t.skipped)?[null==t?void 0:t.skipped]:void 0}),S=(e,t)=>(0,o.isNodeOfKind)("jsx-function",e)?e.returnRoots.flatMap((e=>S(e.returnValue,t))):y(e)?[e]:t.getChildren(e).flatMap((e=>S(e,t))),y=e=>(0,o.isNodeOfKind)("jsx-element",e)||(0,o.isNodeOfKind)("jsx-text-element",e),x=(e,t,n)=>{const o=[];for(const r of e)if((0,d.findComponentById)(r,t,n))o.push({dom:r});else{const e=[...r.components].reverse().find((e=>"unknown"!==e.location.fileName));e?o.push(...P(r.children,t,n,e).map((e=>({dom:e,skipped:r.id})))):o.push(...x(r.children,t,n).map((e=>({dom:e.dom,skipped:r.id}))))}return o},P=(e,t,n,o)=>{const r=[];for(const i of e)(0,d.findComponentById)(i,o.location.astNodeId,o.location.fileName)||((0,d.findComponentById)(i,t,n)?r.push(i):r.push(...P(i.children,t,n,o)));return r},E=e=>{const t=new Set;for(const n of e)if(n)for(const e of n)t.add(e);return[...t]},D=e=>{const t=e.map((e=>e.skipped));return E(t)},O=e=>{const t=e.map((e=>e.matched));return E(t)},_=e=>({matched:e.map((e=>e.dom.id)),skipped:e.filter((e=>e.skipped)).map((e=>e.skipped))})},2527:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.formatTree=void 0;const o=n(36211),r=n(57025),i=n(28698),s=n(32221),d=n(58464);function a(e){return!!e}t.formatTree=(e,t,n,l,c,u,m,p,f,I)=>{let h=l;const g=null==p?void 0:p[p.length-1],v=(0,r.scanDomArray)(l),N=(0,d.getRoots)(t);if(g&&!(null==g?void 0:g.domNodeId)){const t=t=>v.byId(e.filePath,t.astNodeId),n=N.flatMap(t).filter(a);n.length>0&&(h=n)}else if(g&&g.domNodeId){const e=v.byDomId(g.domNodeId);e&&(h=[e])}const{results:T,resolvedRoots:S}=f?(0,i.getTreeItemsFromConfig)(f,t,{astValues:n,repo:c,root:e}):(0,o.getTreeItemsFromAst)(t,{repo:c,root:e}),y={astValues:n,unscopedScannedDom:v,ownerNode:t,root:e,repo:c,scannedDom:(0,r.scanDomArray)(h),foundScopes:{},isRootScopeASimulation:Boolean(I),astNodeIdToItemMapping:m,domNodeIdToItemMapping:u,usedIds:new Set,resolvedRoots:S};return(0,s.expandWithStructure)(T,h,y,!1,new Set)[0].element}},36211:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isRenderableTreeItem=t.hasRenderableTreeItem=t.addParentToTree=t.addParent=t.addAndReturn=t.getTreeItemsFromAstRecurse=t.getTreeItemsFromAstArr=t.getTreeItemsFromAst=void 0;const o=n(9240),r=n(17109),i=n(58464),s=(0,r.nodeFactory)("unresolved-ref")({}),d=(0,r.nodeFactory)("unresolved-imported-ref")({}),a=new WeakMap;t.getTreeItemsFromAst=(e,n)=>{const o=n.root.astRoot;a.has(o)||a.set(o,new Map);const r=a.get(o);if(r.has(e))return r.get(e);const i={ownerNode:e,fileRefNodes:new Set,inFileRefTargetsResolvingStack:[],resolvedRoots:{},...n},s={resolvedRoots:i.resolvedRoots,results:(0,t.getTreeItemsFromAstRecurse)(e,i)};return r.set(e,s),s},t.getTreeItemsFromAstArr=(e,n)=>e.map((e=>(0,t.getTreeItemsFromAstRecurse)(e,n))).filter((e=>!!e)),t.getTreeItemsFromAstRecurse=(e,n)=>{if(e.astNodeId in n.resolvedRoots)return n.resolvedRoots[e.astNodeId];if((0,o.isNodeOfKind)("jsx-function",e)){for(const o of e.nonReturnRoots)(0,t.addAndReturn)(n.resolvedRoots,o.astNodeId,(0,t.getTreeItemsFromAstRecurse)(o,n));const o=(0,t.getTreeItemsFromAstArr)(e.returnRoots.map((e=>e.returnValue)),n);return(0,r.functionTreeItem)({node:e,children:o,id:e.astNodeId})}if((0,o.isNodeOfKind)("jsx-owner",e)){const o=(0,t.getTreeItemsFromAstArr)(e.roots,n);return(0,r.ownerTreeItem)({node:e,children:o,id:e.astNodeId})}if((0,o.isNodeOfKind)("variable",e)&&e.initializer){const o={inlinedParents:[e]};n.resolvedRoots[e.astNodeId]=o;const r=(0,t.getTreeItemsFromAstRecurse)(e.initializer,n);if(r){for(const e in r)o[e]=r[e];return o.inlinedParents=[e,...r.inlinedParents],o}}if((0,o.isNodeOfKind)("null",e)||(0,o.isNodeOfKind)("boolean",e))return(0,r.nullTreeItem)({node:e,id:e.astNodeId});if((0,o.isNodeOfKind)("trinary",e)){const t=c(e.whenTrue,n),o=c(e.whenFalse,n),i=[];return t&&i.push(t),o&&i.push(o),(0,r.trinaryTreeItem)({node:e,children:i,id:e.astNodeId})}if((0,o.isNodeOfKind)("ref",e)&&"in-file"===e.refType&&e.targetId&&!n.inFileRefTargetsResolvingStack.includes(e.targetId)){const o=n.root.scannedInfo.byId(e.targetId);if(o){n.inFileRefTargetsResolvingStack.push(e.targetId);const r=(0,t.addParent)(e,o,n);if(n.inFileRefTargetsResolvingStack.pop(),r)return s({id:e.astNodeId,node:e,isInternalStructure:!1,name:e.name})}}if((0,o.isSimpleFileReferenceNode)(e))return n.fileRefNodes.add(e),d({node:e,id:e.astNodeId});if((0,o.isNodeOfKind)("jsx-text-element",e)||(0,o.isNodeOfKind)("string",e)||(0,o.isNodeOfKind)("number",e))return(0,o.isNodeOfKind)("jsx-text-element",e)&&0===e.value.trim().length?null:(0,r.textTreeItem)({node:e,id:e.astNodeId,value:e.value.toString().trim()});if((0,o.isNodeOfKind)("jsx-prop",e)&&"object"==typeof e.value){const o=(0,t.getTreeItemsFromAstRecurse)(e.value,n);return(0,r.propertyTreeItem)({name:e.name,node:e,children:o?[o]:[],id:e.astNodeId})}if((0,o.isNodeOfKind)("property",e))return(0,t.getTreeItemsFromAstRecurse)(e.initializer,n);if((0,o.isNodeOfKind)("unparsed-with-roots",e)){const o=(0,t.getTreeItemsFromAstArr)(e.roots,n).filter((e=>!!(0,i.findInTreeChildren)(e,(e=>(0,r.isTreeItemOfKind)("element",e)||(0,r.isTreeItemOfKind)("comp",e)||(0,r.isTreeItemOfKind)("unresolved-ref",e)||(0,r.isTreeItemOfKind)("unresolved-imported-ref",e)))));if(0===o.length)return null;const s=o.flatMap((e=>(0,r.isTreeItemOfKind)("expression",e)?e.children.map((t=>l(t,e.node))):e));return(0,r.expressionTreeItem)({node:e,children:s,id:e.astNodeId,valueType:"unknown",refName:u(e)})}if((0,o.isNodeOfKind)("jsx-expression",e)){if(!e.expression)return null;const o=(0,t.getTreeItemsFromAstArr)([e.expression],n);return(0,r.expressionTreeItem)({id:e.astNodeId,node:e,valueType:"unknown",children:o,refName:void 0})}if((0,o.isNodeOfKind)("jsx-element",e)){const s=(0,i.componentNodeType)(e);if("fragment"===s||"element"===s)return(0,r.nativeElementTreeItem)({id:e.astNodeId,node:e,children:(0,t.getTreeItemsFromAstArr)(e.children,n),tagName:e.type.code});const d=(0,t.getTreeItemsFromAstArr)(e.props,n).filter((e=>(0,t.hasRenderableTreeItem)(e,n.resolvedRoots))),a=(0,o.isSimpleReferenceNode)(e.type)&&e.type.targetId&&p(e.type.targetId,n.ownerNode.astNodeId,n)?(0,t.getTreeItemsFromAstRecurse)(e.type,n):null,l=!!a&&(0,i.findInTreeChildren)(a,(e=>(0,r.isTreeItemOfKind)("func",e))),c=(0,t.getTreeItemsFromAstArr)(e.children,n),u=d;if(c.length&&u.push((0,r.propertyTreeItem)({id:e.astNodeId,name:"children",children:c,node:e})),l){const t=l.el,n=t.inlinedParents?[...t.inlinedParents]:[];for(const e of l.parents)e.node&&n.push(e.node);u.push((0,r.internalComponentStructureTreeItem)({componentName:(0,i.getNodeTitle)(e),id:e.astNodeId,node:l.el.node,inlinedParents:n}))}else a&&(0,r.isTreeItemOfKind)("unresolved-ref",a)&&u.push({...a,isInternalStructure:!0});return(0,r.componentTreeItem)({id:e.astNodeId,node:e,children:u.length?u:c})}const a=(0,t.getTreeItemsFromAstArr)(n.repo.getChildren(e),n);return 0===a.length?null:(0,r.expressionTreeItem)({id:e.astNodeId,node:e,valueType:"unknown",children:a,refName:void 0})};const l=(e,t)=>({...e,inlinedParents:e.inlinedParents?[t,...e.inlinedParents]:[t]}),c=(e,n)=>(0,o.isUnparsedWithParsedRoots)(e)&&m(e)?(0,r.expressionTreeItem)({id:e.astNodeId,node:e,valueType:"unknown",refName:u(e)}):(0,t.getTreeItemsFromAstRecurse)(e,n),u=e=>m(e)?e.code:void 0,m=e=>1===e.roots.length&&(0,o.isAnyReferenceNode)(e.roots[0]),p=(e,t,n)=>{const o=n.root.scannedInfo.byId(e),r=n.root.scannedInfo.byId(t);return!(!o||!r)&&(o===r||n.root.scannedInfo.isChildOf(r,o))};t.addAndReturn=(e,t,n)=>(e[t]=n,n),t.addParent=(e,n,o)=>{const r=(0,t.getTreeItemsFromAstRecurse)(n,o);return r?(0,t.addParentToTree)(e,r):r},t.addParentToTree=(e,t)=>({...t,inlinedParents:[...t.inlinedParents,e]}),t.hasRenderableTreeItem=(e,n,o=[])=>{if((0,t.isRenderableTreeItem)(e))return!0;if((0,r.isTreeItemOfKind)("unresolved-ref",e)){const r=e.node.targetId?n[e.node.targetId]:void 0;return!(!r||o.includes(r))&&(o.push(r),(0,t.hasRenderableTreeItem)(r,n,o))}return!!e.children.find((e=>(0,t.hasRenderableTreeItem)(e,n,o)))},t.isRenderableTreeItem=e=>(0,r.isTreeItemOfKind)("comp",e)||(0,r.isTreeItemOfKind)("element",e)||(0,r.isTreeItemOfKind)("text",e)&&e.node&&(0,o.isNodeOfKind)("jsx-text-element",e.node)},28698:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTreeItemsFromConfigRecurse=t.getTreeItemsFromConfig=void 0;const o=n(36211),r=n(29244);function i(e,t){return(0,r.isDemoTreeItemConfig)(e)?(0,o.getTreeItemsFromAstRecurse)(e.node,t):(0,r.isOptionItem)(e)?{id:e.name,kind:"option",domNodeId:e.name,appearances:1,children:e.children.map((e=>i(e,t))).filter((e=>!!e)),definedAt:void 0,inlinedParents:[],name:e.name,node:e.node}:null}t.getTreeItemsFromConfig=function(e,t,n){const o={ownerNode:t,fileRefNodes:new Set,inFileRefTargetsResolvingStack:[],resolvedRoots:{},...n};return{resolvedRoots:o.resolvedRoots,results:i(e,o)}},t.getTreeItemsFromConfigRecurse=i},67001:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getHtmlTagIcon=void 0;const o=n(69202),r={article:o.HtmlIcons.BlockContainer,div:o.HtmlIcons.BlockContainer,footer:o.HtmlIcons.BlockContainer,header:o.HtmlIcons.BlockContainer,main:o.HtmlIcons.BlockContainer,nav:o.HtmlIcons.Navigation,p:o.HtmlIcons.Paragraph,section:o.HtmlIcons.BlockContainer,b:o.HtmlIcons.InlineContainer,em:o.HtmlIcons.InlineContainer,i:o.HtmlIcons.InlineContainer,label:o.HtmlIcons.InlineContainer,span:o.HtmlIcons.InlineContainer,strong:o.HtmlIcons.InlineContainer,u:o.HtmlIcons.InlineContainer,h1:o.HtmlIcons.Heading1,h2:o.HtmlIcons.Heading2,h3:o.HtmlIcons.Heading3,h4:o.HtmlIcons.Heading4,h5:o.HtmlIcons.Heading5,h6:o.HtmlIcons.Heading6,li:o.HtmlIcons.ListItem,ol:o.HtmlIcons.List,ul:o.HtmlIcons.List,button:o.HtmlIcons.Button,form:o.HtmlIcons.Form,input:o.HtmlIcons.Default,option:o.HtmlIcons.DropdownOption,select:o.HtmlIcons.Dropdown,textarea:o.HtmlIcons.Textarea,a:o.HtmlIcons.Link,br:o.HtmlIcons.LineBreak,audio:o.HtmlIcons.Audio,img:o.HtmlIcons.Image,video:o.HtmlIcons.Video};t.getHtmlTagIcon=e=>{var t;return null!==(t=r[e.toLowerCase()])&&void 0!==t?t:o.HtmlIcons.Default}},46342:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(5163);o.__exportStar(n(11923),t),o.__exportStar(n(23335),t),o.__exportStar(n(2527),t),o.__exportStar(n(95874),t),o.__exportStar(n(54560),t),o.__exportStar(n(43192),t),o.__exportStar(n(350),t),o.__exportStar(n(91647),t),o.__exportStar(n(693),t),o.__exportStar(n(72178),t),o.__exportStar(n(16107),t),o.__exportStar(n(58464),t),o.__exportStar(n(98514),t),o.__exportStar(n(67001),t),o.__exportStar(n(81862),t),o.__exportStar(n(23766),t),o.__exportStar(n(270),t)},64835:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getOwnerName=t.getNodeDisplayName=t.getParentInScope=t.getJsxOwner=void 0;const o=n(9240),r=n(98810);t.getJsxOwner=(e,t,n)=>{let o=e;for(;o&&o!=t;){const e=n.byChild(o);if(e===t)return o;o=e}throw new Error("element is not part of file")},t.getParentInScope=(e,t,n)=>{let o=e;for(;o&&o!=t;){const e=n.byChild(o);if(e===t)return o;o=e}return null},t.getNodeDisplayName=e=>(0,o.isNodeOfKind)("simulation",e)?(0,r.getSimulationName)(e):(0,t.getOwnerName)(e),t.getOwnerName=e=>e.names.map((({name:e})=>e)).filter((e=>"render"!==e)).join(".")},16107:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.STAGE_SCOPE=t.ELEMENTS_TREE_SCOPE=t.actions=t.shortcuts=void 0;const o=n(91570),r=n(62202),i=n(95874);t.shortcuts={selectChild:[r.KEYBOARD.ALT,r.KEYBOARD.DOWN],selectParent:[r.KEYBOARD.ALT,r.KEYBOARD.UP],selectNextSibling:[r.KEYBOARD.ALT,r.KEYBOARD.RIGHT],selectPrevSibling:[r.KEYBOARD.ALT,r.KEYBOARD.LEFT],clearSelection:[r.KEYBOARD.ESCAPE],deleteNode:o.isMac?[r.KEYBOARD.BACK_SPACE]:[r.KEYBOARD.DELETE]},t.actions={toggleEditPreview:{name:i.content.actions.toggleEditPreview.name,description:i.content.actions.toggleEditPreview.description,shortcut:[r.KEYBOARD.ALT,r.KEYBOARD.V]}},t.ELEMENTS_TREE_SCOPE="elements-tree-scope",t.STAGE_SCOPE="stage-scope"},29244:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isDemoTreeItemConfig=t.isSimulatedComponentTreeItemConfig=t.isOptionItem=void 0,t.isOptionItem=function(e){return"options"===e.kind||"option"===e.kind},t.isSimulatedComponentTreeItemConfig=function(e){return"simulated-component"===e.kind},t.isDemoTreeItemConfig=function(e){return"demo"===e.kind}},57025:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSameDomAst=t.findInChildren=t.scanDom=t.scanDomArray=t.ScannedDomStructure=t.stringToLocation=t.locationToString=t.posId=t.getNodeAncestors=t.getDomStructureInfoByNodeId=t.findElementLimitErrorInDomStructures=t.findRootInArr=t.findRootComp=t.findComponentById=void 0;const o=n(35248);t.findComponentById=(e,t,n)=>{const r=e?e.components.findIndex((e=>e.location.fileName===n&&e.location.astNodeId===t)):-1;if(e&&-1!==r)return{dom:e,comp:e.components[r],nextComp:e.components[r+1],prevComp:e.components[r-1],nextNoExpression:e.components.slice(r+1).find((e=>!(0,o.isAnyExpressionDom)(e))),idx:r}},t.findRootComp=(e,n)=>{const o=e.components.find((e=>"unknown"!==e.location.fileName&&!n.includes(e.location.fileName)));return o?{domNodeId:e.id,root:o,error:e.error}:(0,t.findRootInArr)(e.children,n)},t.findRootInArr=(e,n)=>{for(const o of e){const e=(0,t.findRootComp)(o,n);if(e)return e}return null},t.findElementLimitErrorInDomStructures=e=>{for(const{error:n,children:o}of e){if("elementLimit"===(null==n?void 0:n.kind))return n;const e=(0,t.findElementLimitErrorInDomStructures)(o);if(e)return e}},t.getDomStructureInfoByNodeId=function e(t,n){for(const o of t){if(o.id===n)return o;const t=e(o.children,n);if(t)return t}},t.getNodeAncestors=function e(t,n){for(const o of n){if(void 0!==o.children.find((e=>e.id===t)))return[o];const n=e(t,o.children);if(n.length>0)return[...n,o]}return[]};const r=[];t.posId=(e,t)=>`${e}#${t}`,t.locationToString=({fileName:e,astNodeId:t})=>`${e}#${t}`,t.stringToLocation=e=>{const[t,n]=e.split("#");return{fileName:t,astNodeId:n}};class i{constructor(){this.structuresByIds={},this.structuresByStructureIds={},this.locationIds={},this.parents=new Map,this.byFile=e=>{if(this.structuresByIds[e])return[...new Set(Object.values(this.structuresByIds[e]).flat())]},this.byId=(e,t)=>{if(this.structuresByIds[e])return this.structuresByIds[e][t]},this.byIdAndDom=(e,t,n)=>{var o;return null===(o=this.structuresByStructureIds[n])||void 0===o?void 0:o.components.find((n=>n.location.astNodeId===t&&n.location.fileName===e))},this.getCompId=e=>{const n=(0,t.locationToString)(e);return this.locationIds[n]?{astNodeId:this.locationIds[n],fileName:e.fileName}:void 0},this.getParent=e=>this.parents.get(e),this.byDomId=e=>this.structuresByStructureIds[e],this.parentsByDomId=e=>{let t=this.byDomId(e);const n=[];for(;t;)n.unshift(t),t=this.getParent(t);return n},this.isContained=(e,t)=>!!this.parentsByDomId(t).find((t=>t.id===e))}}t.ScannedDomStructure=i;const s=new i,d=new WeakMap;t.scanDomArray=(e,n)=>{if(0===e.length)return s;if(d.has(e))return d.get(e);n=n||new i;for(const o of e)(0,t.scanDom)(o,n);return d.set(e,n),n},t.scanDom=(e,n=new i)=>{for(const o of e.components||r){const r=o.location.astNodeId;r&&(n.structuresByIds[o.location.fileName]=n.structuresByIds[o.location.fileName]||{},n.structuresByIds[o.location.fileName][o.location.astNodeId]||(n.structuresByIds[o.location.fileName][o.location.astNodeId]=[]),n.structuresByIds[o.location.fileName][o.location.astNodeId].push(e),n.locationIds[(0,t.locationToString)(o.location)]=r)}if(e.children)for(const o of e.children)n.parents.set(o,e),(0,t.scanDom)(o,n);return n.structuresByStructureIds[e.id]=e,n},t.findInChildren=(e,n,o)=>o&&n(e)?e:e.children?e.children.find((e=>(0,t.findInChildren)(e,n,!0))):void 0,t.isSameDomAst=(e,t)=>e.location.astNodeId===t.location.astNodeId&&e.location.fileName===t.location.fileName},31037:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateMoveAllowed=t.moveNodeToDropPoint=t.getClosestRect=t.distanceFromRect=t.verticallyFindNodeIndexByPoint=t.rectContainsPoint=t.getRectsFromDropPoint=t.getDragMap=t.getRelevantCompId=t.getAstDropTargets=void 0;const o=n(83135),r=n(9240),i=n(98066),s=n(75739),d=n(54560),a=n(5487);function l(e,t,n,r,i,s){if((0,o.isDragDataOfKind)("ast-drop-in-target",e)){const e=[...n.children].reverse().filter((e=>e.id&&s(e.id)))[0],t=s(n.id);if(!e&&t)return[{x:t.x+1,y:t.y+1,width:t.width-2,height:t.height-2}];if(e){const e=s(n.id);return e?[{x:e.x+e.width-3,y:e.y,width:6,height:e.height},{x:e.x,y:e.y+e.height+3,width:e.width,height:6}]:[]}return[]}const d=t.children.map((t=>({ast:t,dom:n.children.find((n=>n.components.find((n=>(n.location.fileName===e.filePath?n.location.astNodeId:"unknown")===t.astNodeId))))})))||[],a=i.byId(e.nodeId),l=d.findIndex((e=>e.ast===a)),c=d.slice(l).find((e=>!!e.dom&&!!s(e.dom.id))),u=d.slice(0,l).reverse().find((e=>!!e.dom&&!!s(e.dom.id))),m=(null==c?void 0:c.dom)?s(c.dom.id):void 0,p=(null==u?void 0:u.dom)?s(u.dom.id):void 0;if(m&&p){const e=Math.min(p.y+p.height,m.y+m.height)-Math.max(p.y,m.y),t=e/((p.height+m.height)/2),n=Math.min(p.x+p.width,m.x+m.width)-Math.max(p.x,m.x),o=n/((p.width+m.width)/2);if(t>o&&t>.1)return[{x:Math.min(m.x+m.width,p.x+p.width),y:Math.max(m.y,p.y),width:6,height:e}];if(o>.1)return[{x:Math.max(m.x,p.x),y:Math.min(m.y+m.height,p.y+p.height),width:n,height:6}]}const f=[];return m&&f.push({x:m.x-3,y:m.y,width:6,height:m.height},{x:m.x,y:m.y-3,width:m.width,height:6}),p&&f.push({x:p.x+p.width-3,y:p.y,width:6,height:p.height},{x:p.x,y:p.y+p.height+3,width:p.width,height:6}),f}t.getAstDropTargets=(e,n,o)=>{const i=[];if((0,r.isNodeOfKind)("jsx-element",e)){for(const t of e.children)i.push((0,d.dropBeforeTarget)({filePath:n,nodeId:t.astNodeId,parentId:e.astNodeId}));i.push((0,d.dropInTarget)({filePath:n,parentId:e.astNodeId}))}const s=o.getChildren(e);for(const e of s)i.push(...(0,t.getAstDropTargets)(e,n,o));return i},t.getRelevantCompId=(e,t,n)=>{for(const o of e.components){const e=n.getCompId(o.location);if((null==e?void 0:e.fileName)===t)return e.astNodeId}},t.getDragMap=(e,n,o,i,s,d)=>{const a=(0,t.getAstDropTargets)(e,n,i),c=i.getASTInfo(e),u=a.reduce(((e,t)=>(e[t.parentId]=e[t.parentId]||[],e[t.parentId].push(t),e)),{}),m=[];for(const[e,t]of Object.entries(u)){const i=o.byId(n,e)||[],s=c.byId(e);if(s&&(0,r.isNodeOfKind)("jsx-element",s))for(const e of i){const n=d(e.id);n&&m.push({parent:s,parentRect:n,dropPoints:t.map((t=>({dropTarget:t,rects:l(t,s,e,0,c,d)})))})}}return m},t.getRectsFromDropPoint=l,t.rectContainsPoint=(e,t)=>t.x>e.x&&t.x<e.x+e.width&&t.y>e.y&&t.y<e.y+e.height,t.verticallyFindNodeIndexByPoint=function e(t,n,o=0,r=t.length){const i=o+Math.floor((r-o)/2),{box:s}=t[i];return s.y<=n.y&&n.y<=s.y+s.height?i:n.y<s.y?e(t,n,0,i):n.y>s.y+s.height?e(t,n,i,r):-1},t.distanceFromRect=(e,n)=>{const o=Math.min(n.y-e.y,e.y+e.height-n.y),r=Math.min(n.x-e.x,e.x+e.width-n.x),i=(0,t.rectContainsPoint)(e,n),s=Math.sqrt(o*o+r*r);return i?-s:s},t.getClosestRect=(e,n)=>e.reduce(((e,o)=>{if((0,t.rectContainsPoint)(o.parentRect,n))for(const r of o.dropPoints)for(const o of r.rects){const i=(0,t.distanceFromRect)(o,n);(!e||e.distance>i)&&(e={distance:i,target:r.dropTarget})}return e}),null),t.moveNodeToDropPoint=async(e,t,n,r,s)=>{const l=await async function(e,t,n){return(0,o.isDragDataOfKind)("new-node",e)?await e.data(t.filePath):(0,o.isDragDataOfKind)("existing-node",e)?n.byId(e.nodeId):void 0}(n,e,t),c=()=>r(s.getId().filePath),u=t.byId(e.parentId),m=t.root;if(!m||!(0,i.isJsxFile)(m))throw new Error("dragged into parent isn't inside a file ast node");let p=[];if((0,d.isDropInTarget)(e)){const e=u&&t.nodeToParent.get(u);p=(0,a.getModificationToPrependChild)(l,u,e,m.astNodeId,c,(0,o.isDragDataOfKind)("new-node",n))}if((0,d.isDropAfterTarget)(e)){const r=t.byId(e.nodeId),i=t.byId(e.parentId);p=(0,a.getModificationToAddChild)(l,r,i,m.astNodeId,c,(0,o.isDragDataOfKind)("new-node",n),"after")}if(0!==(null==p?void 0:p.length))return s.applyModification(t.byId(p[0].targetId),p[0].modification,p[0].modificationArgs),null==l?void 0:l.astNodeId},t.validateMoveAllowed=(e,t,n,o)=>{const i=e.idToNode.get(t);if(!i)return!1;const d=e.nodeToParent.get(i);if(!d||!(0,r.isNodeOfKind)("jsx-element",d))return!1;const a=e.idToNode.get(n);if(!a||!(0,r.isNodeOfKind)("jsx-element",a)||function(e){const t=e.type;return(0,r.isNodeOfKind)("unparsed-with-roots",t)&&s.VOID_ELEMENTS.has(t.code)}(a))return!1;let l=a;if(o){const t=e.idToNode.get(o);if(!t||e.nodeToParent.get(t)!==a||t===i)return!1}else if(a.children[a.children.length-1]===i)return!1;for(;l;){if(l===i)return!1;l=e.nodeToParent.get(l)}return!0}},89562:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mapToParentRecurse=t.mapToParent=t.getTopRepresentedNode=t.findInTreeArr=t.findInTreeChildren=t.getTreeItemParents=t.getTreeItemsAstNodeIds=t.forEachTreeNode=t.findNodeInTree=t.isTextNode=t.isTextTreeItem=t.resolveItemParents=t.shouldHideTreeNode=t.isSimulationEntityNode=t.hasMultipleReturns=t.isRepeater=t.isFragment=t.componentNodeType=t.isElementNode=t.isElementItem=t.getAllInstancesOfOwner=t.getSelectionFiles=t.getBoundingClientRectObject=t.getAllStructureFilePath=t.getPossiblePositions=t.getInstanceIndex=t.toIdBased=t.findAllScopes=t.drillIntoScope=t.getAssossiatedIds=t.getAllStructureNodesInPath=t.filterInnerNodes=t.getRoots=t.parentPredicate=t.getNodeTitle=t.getClickableFrameTitle=t.getTreeItemTitle=t.isPropItem=void 0;const o=n(9240),r=n(95874),i=n(17109),s=n(64835),d=n(57025);function a(e){return(0,i.isTreeItemOfKind)("prop",e)||(0,i.isTreeItemOfKind)("sim-prop",e)}async function l(e,t,n){if(!e.length)return[];const o=e[0].location.fileName,r=await t(o),i=n.getASTInfo(r),s=new Set;for(const t of e){const e=i.byId(t.location.astNodeId),n=[...s].filter((t=>{const n=i.byId(t.location.astNodeId);return n&&e&&i.isChildOf(n,e)}));if(n.length){const o=n.find((t=>{const n=i.byId(t.location.astNodeId);return n&&e&&!i.isChildOf(n,e)}));o&&(s.delete(o),s.add(t))}else s.add(t)}return[...s]}t.isPropItem=a,t.getTreeItemTitle=e=>{var n;if(!e)return"";if((0,i.isTreeItemOfKind)("text",e))return e.value;if((0,i.isTreeItemOfKind)("expression",e)){if("unknown"===e.valueType&&e.refName)return e.refName;const n="array"===e.valueType?"List":e.expressionValue;return(null==n?void 0:n.toString())||(0,t.getNodeTitle)(e.node)}if((0,i.isTreeItemOfKind)("trinary",e))return(0,t.getNodeTitle)({...e.node,type:e.node.condition});if((0,i.isTreeItemOfKind)("func",e)){const t=e.inlinedParents.find((e=>(0,o.isNodeOfKind)("variable",e)));return t?t.name.toString():"function"}return(0,i.isTreeItemOfKind)("prop",e)||(0,i.isTreeItemOfKind)("sim-prop",e)||(0,i.isTreeItemOfKind)("option",e)?e.name:(0,i.isTreeItemOfKind)("null",e)?r.content.visualizers.null:(0,i.isTreeItemOfKind)("element",e)?e.tagName:(0,i.isTreeItemOfKind)("comp",e)?e.node?(0,t.getNodeTitle)(e.node):(null===(n=e.definedAt)||void 0===n?void 0:n.scope.displayName)||"unnamed":(0,i.isTreeItemOfKind)("structure",e)?r.content.visualizers.structure(e.componentName):(0,i.isTreeItemOfKind)("untraced",e)?r.content.visualizers.untraced:(0,i.isTreeItemOfKind)("simulated-component",e)?(0,s.getOwnerName)(e.componentNode):r.content.visualizers.fallback},t.getClickableFrameTitle=e=>e?(0,i.isTreeItemOfKind)("text",e)?r.content.visualizers.textNodeLabel:(0,t.getTreeItemTitle)(e):"",t.getNodeTitle=e=>{const t=null==e?void 0:e.type;if(e&&(0,o.isNodeOfKind)("jsx-text-element",e))return e.value;if(t&&(0,o.isNodeOfKind)("unparsed-with-roots",t))return"React.Fragment"===t.code?"<>":t.code;if(t&&(0,o.isNodeOfKind)("UnparsedNode",t))return"React.Fragment"===t.code?"<>":t.code;if(e&&(0,o.isNodeOfKind)("jsx-expression",e))return e.code;const n=e=>(0,o.isSimpleReferenceNode)(e)?e.name:(0,o.isSimpleFileReferenceNode)(e)?"default"===e.targetExport&&e.symbolName?e.symbolName:e.targetExport:void 0,r=t&&n(t);if(r)return r;if(t&&(0,o.isSimplePropertyAccessNode)(t)){const e=n(t.reference);if(e)return`${e}${t.accessPath.map((e=>{if((0,o.isSimplePropertyAccessIndexNode)(e)){const t=e.accessKey;return"string"==typeof t?`.${t}`:`[${t}]`}return(0,o.isSimpleReferenceNode)(e)||(0,o.isSimpleFileReferenceNode)(e)?`[${n(e)}]`:`[${e.code}]`})).join("")}`}return t?t.kind:(null==e?void 0:e.kind)||""},t.parentPredicate=(e,t)=>n=>{const o=(t,n)=>{if(t.astNodeId===n)return!0;{let r=!1;for(const i of e(t))r=r||o(i,n);return r}};return o(n,t)},t.getRoots=e=>(0,o.isNodeOfKind)("jsx-function",e)?e.returnRoots.map((e=>e.returnValue)):(0,o.isNodeOfKind)("jsx-owner",e)?e.roots:[],t.filterInnerNodes=l,t.getAllStructureNodesInPath=(e,t)=>(0,d.scanDomArray)(e).parentsByDomId(t);const c=async(e,t)=>{await t(e),await Promise.all(e.children.map((e=>c(e,t))))};async function u(e,t,n){const o=e.location.fileName,r=await t(o),i=n.getASTInfo(r),s=i.byId(e.location.astNodeId);if(!s)return;const d=r.owners.find((e=>i.isChildOf(e,s)));return d?{astNodeId:d.astNodeId,astFilePath:o,node:d}:void 0}function m(e,t,n){const o=[];for(const r of e.components)r.location.fileName===t.astFilePath&&(null==n?void 0:n.astNodeId)===r.location.astNodeId&&o.push(e);for(const r of e.children)o.push(...m(r,t,n));return o}async function p(e,t,n,o,r){if(!e)return[];const s=[];await c(e,(async e=>{const n=e.components.find((({location:{fileName:e}})=>e===t.astFilePath));if(n){const i=await u(n,o,r);i&&i.astFilePath===t.astFilePath&&i.astNodeId===t.astNodeId&&s.push(e)}}));const d=(await l(s.map((e=>e.components.find((({location:{fileName:e}})=>e===t.astFilePath)))),o,r)).reduce(((e,t)=>e.add((0,i.createNodeAstKey)(t.location.fileName,t.location.astNodeId))),new Set),a=[];return await Promise.all(s.map((async e=>{const s=e.components.find((({location:{fileName:e}})=>e===t.astFilePath));if(d.has((0,i.createNodeAstKey)(s.location.fileName,s.location.astNodeId))){const t=e.components.find((({location:{fileName:e}})=>e===n.astFilePath));if(t){const i=await u(t,o,r);(null==i?void 0:i.astFilePath)===n.astFilePath&&i.astNodeId===n.astNodeId&&a.push(e)}}}))),a}function f(e){return!(!e.node||!(0,o.isNodeOfKind)("jsx-element",e.node))}function I(e){const n=(0,t.getNodeTitle)(e);return"<>"===n?"fragment":n[0]&&n[0]===n[0].toUpperCase()||n.includes(".")?"component":"element"}function h(e){return(0,o.isJSXElementNode)(e)&&"fragment"===I(e)}function g(e){return"Window"===e.id||"Canvas"===e.id||"simulated-component"===e.kind}function v(e,t,n){t(e),n(e).find((e=>v(e,t,n)))}t.getAssossiatedIds=function(e){var t;const n=(null===(t=e.node)||void 0===t?void 0:t.astNodeId)||e.generatedAtAstId;return{domNodeId:e.domNodeId,astNodeId:n}},t.drillIntoScope=function({scopes:e,domNodeId:t,isMounted:n,scopesResource:o,selectionManager:r,selectionData:i,getNodeDisplayName:s,scannedStructure:d}){var a;if(n&&i&&i.length<=e.length)for(let n=i.length-1;n<e.length;n++){const i={astFilePath:e[n].owner.astFilePath,astId:e[n].owner.astNodeId,instanceIndex:e[n].index,instanceAmount:e[n].amount,domNodeId:e[n].domNodeId,displayName:s(e[n].owner.node)},l=null===(a=d.structuresByStructureIds[t].components.find((t=>t.location.fileName===e[n].owner.astFilePath)))||void 0===a?void 0:a.location.astNodeId;if(n===e.length-1&&l){o.addInternalScope(i);const s=o.getCurrentScope();if(s){const i=r.get({scopeFilePath:s.astFilePath,scopeAstNodeId:s.astId,scopePreviewId:o.getId().previewId});null==i||i.setSelection({kind:"in-scope",astFilePath:e[n].owner.astFilePath,astId:l,domNodeId:t},"stage")}}else o.addInternalScope(i)}},t.findAllScopes=async function(e,n,o,r){const i=(0,t.getAllStructureNodesInPath)(e,n).filter((({components:e})=>!(1===e.length&&"native"===e[0].type))),s=(await Promise.all(i.map((async e=>{const{components:t}=e;return{structureNode:e,componentOwners:(await Promise.all(t.filter((e=>"unknown"!==e.location.fileName)).map((e=>u(e,o,r))))).filter((e=>!!e))}})))).map((({componentOwners:e,structureNode:t},n)=>{let o=e.reduce(((e,t)=>e[e.length-1]&&e[e.length-1].astNodeId===t.astNodeId&&e[e.length-1].astFilePath===t.astFilePath?e:[...e,t]),[]);const[,...r]=o;return o=0===n?o:r,{structureNode:t,componentOwners:o}})),d=[];for(let e=0;e<s.length;e++){const t=s[e];d.push(t);for(let n=0;n<t.componentOwners.length;n++){const o=t.componentOwners[n];let r=e+1;for(;r<s.length;r++)if(s[r].componentOwners.find((e=>e.astNodeId===o.astNodeId&&e.astFilePath===o.astFilePath))){e=r-1;break}}}const a=[];let l;for(let e=0;e<d.length;e++){const t=d[e];if(0===e){const e=t.componentOwners[0];a.push({owner:e,domNodeId:t.structureNode.id,amount:1,index:0}),l=e;continue}const n=d[e-1];for(let e=0;e<t.componentOwners.length;e++){const i=t.componentOwners[e],s=await p(n.structureNode,i,l,o,r),d=s.findIndex((({id:e})=>e===t.structureNode.id));a.push({owner:i,domNodeId:t.structureNode.id,amount:s.length||1,index:s.length?d:0}),t.componentOwners.length-1===e&&(l=i)}}return a},t.toIdBased=(e,t,n,o)=>t&&t.getLatest()[`${e}#${o}`]||[],t.getInstanceIndex=({structure:e,elementsScopes:t,getPossibleScopedPositions:n})=>{let o=0;const r=t=>{const o=[],r=n(t),i=(e,t)=>{for(const n of e.components)for(const e of r||[])n.location.fileName===e.filePath&&n.location.astNodeId===e.astNodeId&&o.push(t);for(const[n,o]of e.children.entries())i(o,[...t,n])};for(const t of e||[])i(t,[]);return o};if(t){let e;for(const n of t){const t=r(n);let i=t;void 0!==e&&(i=t.filter((t=>{for(let n=0;n<t.length;n++)if(e[n]&&t[n]!==e[n])return!1;return!0})));const s=i[n.instanceIndex];e=s,o=t.findIndex((e=>JSON.stringify(e)===JSON.stringify(s)))}}return o},t.getPossiblePositions=function({scope:e,scopeAstValue:n,getSourcePositions:o}){var r;if(!n)return[];const i=(n.owners||[]).map((e=>(0,t.getRoots)(e))).flat().find((t=>t.astNodeId===e.astId)),s=(null===(r=n.owners)||void 0===r?void 0:r.find((t=>t.astNodeId===e.astId)))||i,d=[...s&&s.astNodeId===e.astId?(0,t.getRoots)(s):[],...i?[i]:[]];if(!d.length)return[];const a=[];return d.forEach((t=>{const n=o(e.astFilePath);e&&t&&n[t.astNodeId]&&a.push({filePath:e.astFilePath,astNodeId:t.astNodeId})})),a},t.getAllStructureFilePath=function(e){const t=new Set([]),n=e=>{for(const n of e.components)"unknown"!==n.location.fileName&&t.add(n.location.fileName);for(const t of e.children)n(t)};for(const t of e||[])n(t);return t},t.getBoundingClientRectObject=function(e){return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}},t.getSelectionFiles=function({scope:e,selection:t,structure:n}){const o=new Set([]);if(!t||!e)return[];for(const r of n||[])for(const n of m(r,e,{astNodeId:t.astId}))for(const e of n.components)"unknown"!==e.location.fileName&&o.add(e.location.fileName);return o},t.getAllInstancesOfOwner=p,t.isElementItem=f,t.isElementNode=function(e){return e.node&&(0,o.isNodeOfKind)("jsx-element",e.node)},t.componentNodeType=I,t.isFragment=h,t.isRepeater=function(e){return"array"===e.valueType},t.hasMultipleReturns=function(e){return(0,i.isTreeItemOfKind)("func",e)&&e.node.returnRoots.length>1},t.isSimulationEntityNode=g,t.shouldHideTreeNode=function(e,t=!0){return!((!t||0!==e.appearances)&&((0,i.isTreeItemOfKind)("expression",e)&&(0,o.isNodeOfKind)("jsx-expression",e.node)&&0===e.children.length||!h(e.node)&&!a(e)&&(e.appearances>0&&((0,i.isTreeItemOfKind)("text",e)||(0,i.isTreeItemOfKind)("comp",e)||(0,i.isTreeItemOfKind)("element",e))||g(e)||e.node&&(0,o.isNodeOfKind)("null",e.node)||e.node&&(0,o.isNodeOfKind)("boolean",e.node)||e.node&&(0,o.isNodeOfKind)("jsx-text-element",e.node)&&e.node.value.trim().length>0||e.node&&(0,o.isNodeOfKind)("string",e.node)||e.node&&(0,o.isNodeOfKind)("number",e.node)||e.error||f(e))))},t.resolveItemParents=function e(t){return t.children.forEach((n=>{n.parent=t,e(n)})),t},t.isTextTreeItem=function(e){return(0,i.isTreeItemOfKind)("text",e)},t.isTextNode=function(e){return(0,o.isNodeOfKind)("string",e)||(0,o.isNodeOfKind)("jsx-text-element",e)},t.findNodeInTree=function e(t,n,o){if(n(t))return t;for(const r of o(t)){const t=e(r,n,o);if(t)return t}},t.forEachTreeNode=v,t.getTreeItemsAstNodeIds=function(e){const t=[];return e.forEach((e=>{v(e,(e=>{e.node&&t.push(e.node.astNodeId)}),(e=>e.children))})),t},t.getTreeItemParents=(e,n=[])=>e.parent?[e.parent,...(0,t.getTreeItemParents)(e.parent,n)]:n,t.findInTreeChildren=(e,n,o)=>{if(n(e))return{el:e,parents:o||[]};if(e.children)for(const r of e.children){const i=(0,t.findInTreeChildren)(r,n,[...o||[],e]);if(i)return i}},t.findInTreeArr=(e,n,o)=>{for(const r of e){const e=(0,t.findInTreeChildren)(r,n,o);if(e)return e}},t.getTopRepresentedNode=e=>e.inlinedParents&&e.inlinedParents.length?e.inlinedParents[e.inlinedParents.length-1]:e.node;const N=new WeakMap;t.mapToParent=e=>{if(N.has(e))return N.get(e);const n=new Map;if(Array.isArray(e))for(const o of e)(0,t.mapToParentRecurse)(o,n);else(0,t.mapToParentRecurse)(e,n);return N.set(e,n),n},t.mapToParentRecurse=(e,n=new Map,o)=>{if(o&&n.set(e,o),e.children)for(const o of e.children)(0,t.mapToParentRecurse)(o,n,e);return n}},93225:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFirstVisibleChildren=void 0;const o=n(89562);t.getFirstVisibleChildren=function e(t,n,r=!1){if(!t||!t.children.length)return[];const i=t.children,s=[];for(const t of i)(0,o.shouldHideTreeNode)(t,r)||(null==n?void 0:n(t))?s.push(...e(t,n,r)):s.push(t);return s}},16812:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFirstVisibleParent=void 0;const o=n(89562);t.getFirstVisibleParent=function e(t,n,r=!1){if(t&&t.parent)return(0,o.shouldHideTreeNode)(t.parent,r)||(null==n?void 0:n(t.parent))?e(null==t?void 0:t.parent,void 0,r):t.parent}},44313:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFirstVisibleSibling=void 0;const o=n(93225),r=n(16812);t.getFirstVisibleSibling=function(e,t,n,i=!1){const s=n?e=>!e.domNodeId:void 0,d=(0,r.getFirstVisibleParent)(t,s,i),a=(0,o.getFirstVisibleChildren)(d,s,i);if(1===a.length)return a[0];const l=a.findIndex((e=>e===t));if(-1!==l){let t=0;return"next"===e?t=l===a.length-1?0:l+1:"previous"===e&&(t=0===l?a.length-1:l-1),a[t]}}},35248:(e,t)=>{function n(e){return"prop-expression"===e.type||"child-expression"===e.type||"spread-expression"===e.type}function o(e){var t;return"spread-expression"===e.type?(null===(t=e.properties.children)||void 0===t?void 0:t.valueType)||"undefined":e.valueType}Object.defineProperty(t,"__esModule",{value:!0}),t.getExpressionChildrenValueType=t.isAnyExpressionDom=t.getFrameType=void 0,t.getFrameType=function(e,{filePath:t,domNodeId:r}){if("Canvas"===r||"Window"===r)return"native";if(r&&t&&e.structuresByStructureIds[r]){const i=e.structuresByStructureIds[r].components.find((e=>{if(e.location.fileName!==t)return!1;if(n(e)){const t=o(e);return"string"===t||"number"===t}return!0}));if(i)return"component"===i.type?"component":"native"}},t.isAnyExpressionDom=n,t.getExpressionChildrenValueType=o},86808:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSafeModeErrorTooltip=t.getSafeModeErrorInfo=void 0;const o=n(95874),{safeModeErrors:r,safeModeTooltips:i}=o.content;t.getSafeModeErrorInfo=function(e){let t="",n="";if("component"===e.kind&&(t=r.component.title,n=r.component.message),"props"===e.kind){const o=e.errors.map((e=>e.propName));t=r.props.title(o),n=r.props.message(o)}return"child"===e.kind&&(t=o.content.safeModeErrors.child.title,n=e.error.message),"elementLimit"===e.kind&&(t=o.content.safeModeErrors.elementLimit.title,n=o.content.safeModeErrors.elementLimit.message),{title:t,message:n}},t.getSafeModeErrorTooltip=function(e){return"component"===e.kind?i.componentError(e.error.message):"props"===e.kind?i.propsError(e.errors[0].error.message):"child"===e.kind?i.childError(e.error.message):"elementLimit"===e.kind?i.elementLimitError:""}},91973:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTreeItemByDomIdOrAstNodeId=void 0;const o=n(92613);t.getTreeItemByDomIdOrAstNodeId=function(e,t,n){var r,i;if(!e)return;if(e.id===o.EditorComponents.window)return(null===(r=t.get(o.EditorComponents.canvas))||void 0===r?void 0:r[0].parent)||(null===(i=t.get(o.EditorComponents.window))||void 0===i?void 0:i[0]);const s=e.domNodeId?n.get(e.domNodeId):void 0;if(s){const t=s.find((t=>{var n;return(null===(n=null==t?void 0:t.node)||void 0===n?void 0:n.astNodeId)===e.astId}));return t}if(!e.astId)return;const d=t.get(e.astId);return 1===(null==d?void 0:d.length)?d[0]:null==d?void 0:d.find((t=>t.domNodeId===e.domNodeId))}},37633:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(5163);o.__exportStar(n(49642),t),o.__exportStar(n(66341),t)},49642:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useGetAstResId=void 0;const o=n(87363),r=n(9029);t.useGetAstResId=function(){const{editing:{simpleASTParsers:e}}=(0,r.useMainContext)();return(0,o.useCallback)((t=>({filePath:t,parsers:e.get()})),[e])}},66341:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useSelectionSchema=void 0;const o=n(16042),r=n(27941),i=n(81862),s=n(18413);t.useSelectionSchema=function(){var e;const t=(0,o.useVisibility)(),{editing:{openScopeSchemas:n}}=(0,s.useSimulationTabContext)(),{lastSelectionScope:d}=(0,i.useElementsSelection)({enabled:t}),a=n.use(),[,,l]=(0,r.useResourceState)({resource:d?a[d.scope.astFilePath+"#"+d.scope.astId]:void 0}),c=null==l?void 0:l.getLatest(),u=null==l?void 0:l.getSchemas(),m=null===(e=null==d?void 0:d.selection)||void 0===e?void 0:e.astId;if(m&&c&&u)return u[c.ids[m]]}},58464:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(5163);o.__exportStar(n(57025),t),o.__exportStar(n(31037),t),o.__exportStar(n(89562),t),o.__exportStar(n(93225),t),o.__exportStar(n(16812),t),o.__exportStar(n(44313),t),o.__exportStar(n(35248),t),o.__exportStar(n(86808),t),o.__exportStar(n(91973),t),o.__exportStar(n(10384),t),o.__exportStar(n(94490),t),o.__exportStar(n(37633),t)},10384:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getClickableFrames=t.fixRectZoom=t.getFrame=t.getStageOverlays=void 0;const o=n(54560),r=n(31037),i=n(35248),s=n(89562);function d(e,t){var n;if(!e||!e.domNodeId)return[];const o=e.domNodeId?null===(n=t.scannedDom.structuresByStructureIds[e.domNodeId])||void 0===n?void 0:n.error:void 0;return(t.scannedDom.byId(e.astFilePath,e.astId)||[]).filter((t=>t.id!==e.domNodeId)).map((n=>{const r=a({astNodeId:e.astId,domNodeId:n.id},t),i=(null==r?void 0:r.error)||o;return r?{...r,error:i}:null})).filter((e=>e))}function a({astNodeId:e,domNodeId:t},n){var o,r,d;let a;const l=null===(o=n.domNodeIdToItemMapping.get(t))||void 0===o?void 0:o.find((t=>{var n;return(null===(n=t.node)||void 0===n?void 0:n.astNodeId)===e}));if("Window"===t||"Canvas"===t){const e=null===(r=n.windowAndCanvasFrames)||void 0===r?void 0:r.find((e=>e.domNodeId===t));a=null==e?void 0:e.rect,l&&e&&!l.node&&(l.node={astNodeId:null==e?void 0:e.astId,kind:"option"})}else a=n.getDOMPosition(t);if(!a)return;const c=(0,s.getClickableFrameTitle)(l),u=e&&n.filePath?(0,i.getFrameType)(n.scannedDom,{filePath:n.filePath,domNodeId:t}):void 0;return{rect:n.fixRectZoom(a),type:u,item:l,error:null===(d=n.scannedDom.structuresByStructureIds[t])||void 0===d?void 0:d.error,title:""!==c?c:void 0}}function l({scopeIds:e,domNodeIdToItemMapping:t,structuresByStructureIds:n,getDOMPosition:o,scopeAstInfo:r,fixRectZoom:s}){var d;const a=[];for(const[l,c]of Object.entries(n)){const n=t.get(l),u=null==c?void 0:c.components.filter((t=>{const n=(0,i.isAnyExpressionDom)(t),o=n?(0,i.getExpressionChildrenValueType)(t):void 0;return!(n&&("undefined"===o||"array"===o||"function"===o||"null"===o||"object"===o))&&e.find((e=>{if(e.filePath!==t.location.fileName)return!1;if(e.astNodeId&&r){const n=null==r?void 0:r.byId(e.astNodeId),o=null==r?void 0:r.byId(t.location.astNodeId);return!(!n||!o)&&(n===o||(null==r?void 0:r.isChildOf(n,o)))}return!0}))}));for(const e of n||[]){const t=o(l);if(t)for(const n of u)a.push({domNodeId:l,astFilePath:n.location.fileName,astId:(null===(d=e.node)||void 0===d?void 0:d.astNodeId)||n.location.astNodeId,rect:s(t),id:e.id})}}return a.sort(((e,t)=>t.rect.height*t.rect.width-e.rect.height*e.rect.width)),a}t.getStageOverlays=function({scope:e,selection:t,highlights:n=[],structure:i,scannedStructure:s,filePath:c,pluginRepo:u,sourceId:m,scopeAstValue:p,dropData:f,getDOMPosition:I,scopeIds:h,fixRectZoom:g,domNodeIdToItemMapping:v,dragEnabled:N=!0,windowAndCanvasFrames:T=[]}){const S=p?u.getASTInfo(p):void 0,y=function(e,t){if(null==t?void 0:t.domNodeId)return e(t.domNodeId)}(I,e),x=function({scope:e,scopeAstValue:t,nodePluginRepo:n}){if(!t||!e)return;const o=n.getASTInfo(t);return o?o.byId(e.astId):void 0}({nodePluginRepo:u,scopeAstValue:p,scope:e}),P=N?function({filePath:e,structure:t,scannedStructure:n,scopeNode:o,sourceId:i,pluginRepo:s,getDOMPosition:d}){return e&&o&&t&&i?(0,r.getDragMap)(o,e,n,s,i,d):[]}({scopeNode:x,sourceId:m,pluginRepo:u,filePath:c,structure:i,scannedStructure:s,getDOMPosition:I}):[],E=N?function(e,t){return e?t.filter((t=>t.parent.astNodeId===e.parentId)).map((t=>{var n;return{parent:t,rects:(null===(n=t.dropPoints.find((t=>(0,o.isSameDropData)(t.dropTarget,e))))||void 0===n?void 0:n.rects)||[]}})):[]}(f,P):[],D=l({scopeIds:h,domNodeIdToItemMapping:v,structuresByStructureIds:s.structuresByStructureIds,getDOMPosition:I,scopeAstInfo:S,fixRectZoom:g}),O=function({highlights:e=[],selection:t},n){const o=e.map((({domNodeId:e,nodeId:t})=>a({astNodeId:t,domNodeId:e},n))).filter((e=>void 0!==e)),r=(null==t?void 0:t.domNodeId)?a({astNodeId:t.astId,domNodeId:t.domNodeId},n):void 0;return{passiveFrames:d(t,n),highlightedFrames:o,selectedFrame:r}}({highlights:n,selection:t},{filePath:c,scope:e,scopeAstValue:p,pluginRepo:u,scannedDom:s,fixRectZoom:g,domNodeIdToItemMapping:v,windowAndCanvasFrames:T,getDOMPosition:I});return{clickableFrames:[...T,...D],scopeRect:y?g(y):void 0,dragMap:P,dropTargetPosition:E,...O}},t.getFrame=a,t.fixRectZoom=(e,t)=>({...(0,s.getBoundingClientRectObject)(e),width:e.width*t,height:e.height*t,x:e.x*t,y:e.y*t}),t.getClickableFrames=l},94490:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useGetTextParentDomNodeId=void 0;const o=n(270),r=n(16042),i=n(35248);t.useGetTextParentDomNodeId=function(e){const{scannedStructure:t}=(0,o.useScannedStructure)({enabled:(0,r.useVisibility)()});return function(e,t){var n;if(!(null==e?void 0:e.domNodeId)||!t)return;const{domNodeId:o,astFilePath:r}=e,s=null==t?void 0:t.structuresByStructureIds[o],d=null==s?void 0:s.components.some((e=>e.location.fileName===r&&("text"===e.type||(0,i.isAnyExpressionDom)(e)&&("string"===(0,i.getExpressionChildrenValueType)(e)||"number"===(0,i.getExpressionChildrenValueType)(e)))));return s&&d?null===(n=t.getParent(s))||void 0===n?void 0:n.id:void 0}(e,t)}},98514:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.elementsTreeVisualizers=void 0;const o=n(9606),r=n(14949),i=n(60098),s=n(30344),d=n(67049),a=n(97489),l=n(3709),c=n(32182),u=n(81256),m=n(30289),p=n(89819),f=n(4443),I=n(94292);t.elementsTreeVisualizers=e=>[a.jsxTextVisualizer,s.expressionVisualizer,f.trinaryVisualizer,d.jsxFunctionVisualizer,u.propVisualizer,m.simulationPropVisualizer,c.nullVisualizer,r.envConfigVisualizer,(0,l.pluggableNativeNodeVisualizer)(e),(0,o.pluggableComponentVisualizer)(e),i.internalStructureVisualizer,I.untracedVisualizer,p.simulatedComponentVisualizer]},98810:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSimulationName=void 0;const o=n(9240);t.getSimulationName=function(e){if(!e)return"Simulation";const t=(0,o.getSimpleObjectProp)(null==e?void 0:e.data.properties,"name");return(0,o.isStringNode)(t.initializer)?t.initializer.value:"Simulation"}}}]);