(self.webpackChunk_wixc3_component_playground=self.webpackChunk_wixc3_component_playground||[]).push([[5726],{75735:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>o,cssStates:()=>c,keyframes:()=>a,namespace:()=>r,st:()=>d,stVars:()=>n,style:()=>u,vars:()=>i});const r="o394",o={root:"s1683",scrollView:"s1684",scrollbar:"s1685",level:"s1686"},a={},n={},i={},c=s.stc.bind(null,r),u=s.sts.bind(null,r),d=u},7383:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>o,cssStates:()=>c,keyframes:()=>a,namespace:()=>r,st:()=>d,stVars:()=>n,style:()=>u,vars:()=>i});const r="o319",o={root:"s1458"},a={},n={},i={},c=s.stc.bind(null,r),u=s.sts.bind(null,r),d=u},98599:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>o,cssStates:()=>c,keyframes:()=>a,namespace:()=>r,st:()=>d,stVars:()=>n,style:()=>u,vars:()=>i});const r="o19",o={root:"s267"},a={},n={},i={},c=s.stc.bind(null,r),u=s.sts.bind(null,r),d=u},64292:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeViewsPanel=void 0;const r=s(5163).__importStar(s(87363)),o=s(74647),a=s(69818),n=s(9348),i=s(43780),c=()=>{throw new Error("applyModification is not provided")};t.CodeViewsPanel=(0,r.memo)((e=>{const{ast:t,schema:s,astFilePath:u,markAst:d,applyModification:l=c,visualizerStorageApi:p=o.visualizerStorageAPIDefaults,generateId:m=o.defaultGenerateId,getAstDiagnostics:f=o.defaultGetAstDiagnostics,codeViewsConfig:g=a.codeViewsDefaultConfig,valuesStorageApi:h=o.valuesStorageApiDefaults,schemaApi:v=o.defaultSchemaApi,componentsRepo:y=o.defaultComponentsRepo,getAstNode:S,suggestionsApi:b}=e;return r.default.createElement(o.ComponentsRepoContext.Provider,{value:y},r.default.createElement(o.CodeViewsConfigContext.Provider,{value:g},r.default.createElement(o.CodeViewsSimpleAstContext.Provider,{value:{astFilePath:u,generateId:m,getAstDiagnostics:f,getAstNode:S}},r.default.createElement(o.SchemaApiContext.Provider,{value:v},r.default.createElement(o.VisualizerStorageContextProvider,{...p},r.default.createElement(o.ValuesStorageContext.Provider,{value:h},r.default.createElement(o.SuggestionsApiContext.Provider,{value:{suggestionsApi:b}},r.default.createElement(i.NavigationContainer,null,r.default.createElement(n.CodeView,{ast:t,schema:s,markAst:d,applyModification:l})))))))))})),t.CodeViewsPanel.displayName="CodeViewsPanel"},36624:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useCodeViewsAnimation=void 0;const r=s(87363),o=s(32767);t.useCodeViewsAnimation=({onExited:e}={})=>{const[t,s]=(0,r.useState)(!1),[a,n]=(0,r.useState)(!1),i=t||a;return{entering:t,exiting:a,animateEntering:()=>{i||(s(!0),setTimeout((()=>{s(!1)}),o.ANIMATION_DURATION))},animateExiting:()=>{i||(n(!0),setTimeout((()=>{n(!1),e&&e()}),o.ANIMATION_DURATION))}}}},43780:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NavigationContainer=void 0;const r=s(5163).__importStar(s(87363)),o=s(70268),a=s(36624),n=s(75735),i=s(83534);t.NavigationContainer=({children:e})=>{const[t,s]=(0,r.useState)([r.default.createRef(),r.default.createRef()]),{entering:c,exiting:u,animateEntering:d,animateExiting:l}=(0,a.useCodeViewsAnimation)({onExited:()=>{s((e=>e.slice(0,-1)))}}),p=t.length-1,m=t.length-2,f=t.length-3;return r.default.createElement(i.CodeViewsNavigationContext.Provider,{value:{nextLevelRef:t[p],addLevel:()=>{s([...t,r.default.createRef()]),d()},goBack:()=>{l()}}},r.default.createElement("div",{className:(0,n.style)(n.classes.root,{entering:c,exiting:u})},t.map(((t,s)=>r.default.createElement("div",{ref:t,key:s,className:(0,n.style)(n.classes.level,{nested:s>0,previous:s===f,current:s===m})},0===s&&r.default.createElement(o.VerticalScrollView,{className:n.classes.scrollView,scrollBarClassName:n.classes.scrollbar},e))))))}},33617:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsxBooleanVisualizer=void 0;const r=s(5163).__importStar(s(87363)),o=s(9240),a=s(71624),n=s(24905),i=s(1590);t.JsxBooleanVisualizer=r.default.memo((({ast:e,applyModification:t})=>{const{generateId:s}=(0,r.useContext)(n.CodeViewsSimpleAstContext),c=(0,r.useCallback)((r=>{(0,o.isJSXProp)(e)?t(a.CodeViewsSetMod,{newAstNode:(0,a.createAstNodeFromValue)(s,r)},e):t("setValue",{value:r})}),[t,e,s]);return r.default.createElement(i.BooleanInput,{value:null==e?void 0:e.value,onChange:c})})),t.JsxBooleanVisualizer.displayName="JsxBooleanVisualizer"},73303:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsxElementVisualizer=void 0;const r=s(5163).__importStar(s(87363)),o=s(9240),a=s(71624),n=s(23412),i=s(69039),c=s(92856),u=s(74647),d=s(90433),l=s(37996),p=s(78900);function m(e){return(0,o.isNodeOfKind)("jsx-element",e)?e.props:[]}function f(e,t=[]){const s=t.map((e=>e.propName));return e.properties?Object.entries(e.properties).filter((([e])=>!s.includes(e)&&"children"!==e)):[]}t.JsxElementVisualizer=e=>{const{nestingLevel:t=0,applyModification:s}=e,g=(0,r.useContext)(u.CodeViewsSimpleAstContext),h=(0,n.useJsxPropertyToggle)(s),v=(0,d.useJsxChildrenPropertyToggle)(s),y=(0,r.useMemo)((()=>({...e,...g})),[e,g]),S=(0,i.usePropData)({getPropsFromAst:m,getPropsFromSchema:f,astPropToPropData:e=>(0,o.isNodeOfKind)("jsx-prop",e)?function(e,t,s){var r;const{schema:n,applyModification:c,parentProps:u=[]}=t,d=e.name,l=null===(r=null==n?void 0:n.properties)||void 0===r?void 0:r[d],{wrapperProps:p,...m}=(0,i.getCommonPropData)({propName:d,propAst:e,propSchema:l},t);return{...m,wrapperProps:{...p,nameAst:e},applyModification:(t,s,r)=>{if(t===a.CodeViewsSetMod){const t=(0,o.isNodeOfKind)("string",s.newAstNode)?s.newAstNode.value:!(!(0,o.isNodeOfKind)("boolean",s.newAstNode)||!0!==s.newAstNode.value)||s.newAstNode;c("setProperty",{propId:e.astNodeId,value:t})}else c(t,s,r)},ast:!0===e.value||"string"==typeof e.value?e:e.value,toggleProperty:(t,r)=>s({isEnabled:t,propertyName:d,propertyNode:e,propertySchema:r,parentProps:u})}}(e,y,h):void 0,schemaPropToPropData:(e,t)=>function(e,t,s,r){const{applyModification:n,generateId:c,parentProps:u=[]}=s;return{...(0,i.getCommonPropData)({propName:e,propSchema:t},s),schema:(0,p.optionalPropSchemaFix)(t),applyModification:(t,s,r)=>{if(c)if(r)n(t,s,r);else{if(t!==a.CodeViewsCreateMod)throw new Error("Change to non existing node without creating new one");{const t=(0,o.isNodeOfKind)("string",s.newAstNode)?s.newAstNode.value:!(!(0,o.isNodeOfKind)("boolean",s.newAstNode)||!0!==s.newAstNode.value)||s.newAstNode;n("addProp",{prop:{astNodeId:c(),kind:"jsx-prop",name:e,value:t}})}}},ast:void 0,toggleProperty:(t,s)=>r({isEnabled:t,propertySchema:s,propertyName:e,parentProps:u})}}(e,t,y,h),context:y}),b=function(e,t){var s,r;const{applyModification:n,generateId:c,parentProps:u=[],ast:d}=e,l="children",p=null===(r=null===(s=e.schema)||void 0===s?void 0:s.properties)||void 0===r?void 0:r.children,m=d?function(e){if((0,o.isJSXElementNode)(e)){if(1===e.children.length){const[t]=e.children;return(0,o.isJSXTextNode)(t)||(0,o.isJSXExpressionNode)(t),t}return e.children.find((e=>!(0,o.isJSXTextNode)(e)||"â†µ"===e.value))}}(d):void 0;return{...(0,i.getCommonPropData)({propName:l,propSchema:p},e),schema:p,applyModification:(e,t,s)=>{if("setValue"===e&&s){const{value:e}=t;"jsx-text-element"===s.kind&&""===e?n("removeChild",{childId:s.astNodeId},d):n("setValue",{value:e},s)}else if(e===a.CodeViewsSetMod&&s){const{newAstNode:e}=t;m&&(0,o.isJSXExpressionNode)(m)?n("setExpression",{expression:e},m):n("replaceChild",{childId:s.astNodeId,target:(0,o.createJSXExpressionNode)({code:"",expression:e,astNodeId:c()})},d)}else e!==a.CodeViewsCreateMod||s?n(e,t,s):n("addChild",{newChild:"string"===t.newAstNode.kind?(0,o.createJSXTextNode)({value:t.newAstNode.value,astNodeId:c()}):(0,o.createJSXExpressionNode)({code:"",expression:t.newAstNode,astNodeId:c()})},d)},ast:m&&(0,o.isJSXExpressionNode)(m)?m.expression:m,toggleProperty:(e,s)=>t({isEnabled:e,propertyNode:m,propertySchema:s,propertyName:l,parentProps:u})}}(y,v),_=b?S.concat(b):S;return 0!==t?r.default.createElement(l.EditCodeVisualizer,{...e,ast:null==b?void 0:b.ast}):r.default.createElement(c.ObjectLikeVisualizer,{enabledPropsOnTop:!0,...e,propsData:_})}},90433:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useJsxChildrenPropertyToggle=void 0;const r=s(78900),o=s(9240),a=s(87363),n=s(74647);t.useJsxChildrenPropertyToggle=e=>{const{onAddNode:t,onRemoveNode:s}=(0,a.useContext)(n.ValuesStorageContext),i=(0,a.useContext)(n.ComponentsRepoContext),{generateId:c}=(0,a.useContext)(n.CodeViewsSimpleAstContext);return({isEnabled:a,parentProps:n,propertyName:u,propertySchema:d,propertyNode:l})=>{if(!l&&a&&u){const s=i.matchVisualizer(void 0,(0,r.optionalPropSchemaFix)(d)),a=c();return e("addChild",{newChild:(0,o.createJSXExpressionNode)({code:"",expression:null==s?void 0:s.astPlugin.createBlank(c),astNodeId:a}),spaceAfterId:c(),spaceBeforeId:c()}),t(u,a,n),a}!a&&u&&l&&(s(u,l,n),e("removeChild",{childId:l.astNodeId}))}}},23412:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useJsxPropertyToggle=void 0;const r=s(78900),o=s(87363),a=s(74647);t.useJsxPropertyToggle=e=>{const{onAddNode:t,onRemoveNode:s}=(0,o.useContext)(a.ValuesStorageContext),n=(0,o.useContext)(a.ComponentsRepoContext),{generateId:i}=(0,o.useContext)(a.CodeViewsSimpleAstContext);return({isEnabled:o,parentProps:a,propertyName:c,propertySchema:u,propertyNode:d})=>{if(!d&&o&&c){const s=n.matchVisualizer(void 0,(0,r.optionalPropSchemaFix)(u)),o=i(),d=i();return e("addProp",{prop:{astNodeId:o,kind:"jsx-prop",name:c,value:null==s?void 0:s.astPlugin.createBlank((()=>d))}}),t(c,o,a),d}!o&&c&&d&&(s(c,d,a),e("removeProp",{propId:d.astNodeId}))}}},31251:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringVisualizerTestFactory=void 0;const r=s(5163).__importDefault(s(87363)),o=s(11745);t.StringVisualizerTestFactory=e=>{const t=t=>r.default.createElement("div",null,e,r.default.createElement(o.StringVisualizer,{...t}));return t.displayName=e,t}},12987:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(5163);r.__exportStar(s(54119),t),r.__exportStar(s(9348),t),r.__exportStar(s(64292),t),r.__exportStar(s(62792),t),r.__exportStar(s(18340),t),r.__exportStar(s(31251),t),r.__exportStar(s(82874),t),r.__exportStar(s(37996),t),r.__exportStar(s(73303),t),r.__exportStar(s(33617),t),r.__exportStar(s(55456),t),r.__exportStar(s(52250),t),r.__exportStar(s(24784),t),r.__exportStar(s(11745),t),r.__exportStar(s(78900),t),r.__exportStar(s(74647),t),r.__exportStar(s(17135),t),r.__exportStar(s(31460),t),r.__exportStar(s(78873),t),r.__exportStar(s(1590),t)},31460:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},78873:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypescriptSchemaApi=void 0;const r=s(93849),o=(e,t)=>`${e}#${t}`;class a extends r.EventEmitter{constructor(e,t){super(),this.refSchemaManager=e,this.simpleAstSchemaManager=t,this.openRefResources={},this.openAstSchemaResources={},this.onReferenceSchemaChange=({id:e})=>{this.emit(e,this.getReferenceSchemas(e))},this.onAstNodeSchemaChange=({id:e})=>{this.emit(o(e.filePath,e.simpleAstNodeId),this.getAstNodeSchemas(e))}}subscribeToReferenceSchema(e,t){this.subscribe(e,t);const s=this.refSchemaManager.get(e);this.openRefResources[e]?s.isReady()&&t(this.getReferenceSchemas(e)):(this.openRefResources[e]=s,s.subscribe(this.onReferenceSchemaChange),s.isReady()?this.onReferenceSchemaChange({id:e}):s.ready&&s.ready.then((()=>{this.onReferenceSchemaChange({id:e})})).catch((e=>{throw e})))}unsubscribeFromReferenceSchema(e,t){this.unsubscribe(e,t);const s=this.listeners.get(e);!(null==s?void 0:s.size)&&this.openRefResources[e]&&(this.openRefResources[e].isReady()&&this.openRefResources[e].unsubscribe(this.onReferenceSchemaChange),delete this.openRefResources[e])}subscribeToSimpleAstNodeSchema(e,t,s){const r=o(e,t);this.subscribe(r,s);const a={filePath:e,simpleAstNodeId:t},n=this.simpleAstSchemaManager.get(a);this.openAstSchemaResources[r]?n.isReady()&&s(this.getAstNodeSchemas(a)):(this.openAstSchemaResources[r]=n,n.subscribe(this.onAstNodeSchemaChange),n.isReady()?this.onAstNodeSchemaChange({id:a}):n.ready&&n.ready.then((()=>{this.onAstNodeSchemaChange({id:a})})).catch((e=>{throw e})))}unsubscribeFromSimpleAstNodeSchema(e,t,s){const r=o(e,t);this.unsubscribe(r,s);const a=this.listeners.get(r);!(null==a?void 0:a.size)&&this.openAstSchemaResources[r]&&(this.openAstSchemaResources[r].isReady()&&this.openAstSchemaResources[r].unsubscribe(this.onAstNodeSchemaChange),delete this.openAstSchemaResources[r])}getAstNodeSchemas(e){var t;const{definition:s,property:r}=null!==(t=this.simpleAstSchemaManager.get(e).getLatest())&&void 0!==t?t:{};return{typeSchema:s,valueSchema:r}}getReferenceSchemas(e){var t;const s=this.refSchemaManager.get(e);if(!s.isReady())return{typeSchema:void 0,valueSchema:void 0};const{definition:r,property:o}=null!==(t=s.getLatest())&&void 0!==t?t:{};return{typeSchema:r,valueSchema:o}}}t.TypescriptSchemaApi=a},56071:(e,t,s)=>{e.exports=s(69818)},87172:(e,t,s)=>{e.exports=s(12987)},9576:(e,t,s)=>{e.exports=s(71624)},11320:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.demoAstParsers=void 0;const r=s(26709),o=s(9240);t.demoAstParsers=[...o.commonSimpleAstParsers,r.demoPlugin].map((e=>e.nodeKind))},4601:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(5163);r.__exportStar(s(73676),t),r.__exportStar(s(11320),t),r.__exportStar(s(59114),t)},73676:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simulationAstParsers=void 0;const r=s(26709),o=s(9240),a=s(30802);t.simulationAstParsers=[...o.commonSimpleAstParsers,a.simulationPlugin,r.demoPlugin].map((e=>e.nodeKind))},59114:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},51321:(e,t,s)=>{e.exports=s(4601)},78432:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useResources=t.useResource=t.useResourceApplyChange=t.useResourceValidity=t.useResourceValue=t.useResourceState=t.useApplyChange=t.useValidity=t.useValue=t.useResourceSubscriber=t.useHoldResource=t.useResourceInstance=void 0;const r=s(87363),o=s(93849),a=s(60814),n=s(69202);function i({resource:e,defaultValue:t,enabled:s=!0}){const a=(0,n.useForceUpdate)(),i=(0,r.useRef)(!1),c=(0,n.useLatest)(s),u=(0,r.useCallback)((()=>{c.current&&!i.current&&a()}),[c,a]);return(0,r.useEffect)((()=>(e&&e.subscribe(u),(null==e?void 0:e.ready)&&e.ready.then(u).catch(o.reportError),()=>{null==e||e.unsubscribe(u)})),[u,e]),(0,r.useEffect)((()=>()=>{i.current=!0}),[]),function(e,t){return e&&e.isReady()&&e.isValid()?e.getLatest():t}(e,t)}function c({resource:e,enabled:t=!0}){const[s,o]=(0,r.useState)(),a=(0,r.useCallback)((()=>{if(t){const t=e&&e.isReady()?e.isValid():void 0;o(t)}}),[e,t]);return(0,r.useEffect)((()=>{var s;if(!e)return void(t&&o(void 0));let r=!1;const n=()=>{r||a()};return e.subscribe(n),n(),null===(s=e.ready)||void 0===s||s.then(n).catch(n),()=>{r=!0,e.unsubscribe(n)}}),[e,a,t]),s}function u(e){return(0,r.useCallback)((t=>{null==e||e.applyChange(t)}),[e])}function d(e){return!!e.ids}t.useResourceInstance=({resourceManager:e,resourceId:t,enabled:s=!0})=>{const o=(0,r.useMemo)((()=>({})),[]),a=(0,r.useRef)({resourceManager:e,resourceId:t}),n=(0,r.useMemo)((()=>{if(void 0===t)return;const{current:r}=a;return function(e,t,s){return e||t.resourceId!==s.resourceId||t.resourceManager!==s.resourceManager}(s,r,{resourceManager:e,resourceId:t})?e.get(t,o):r.resourceInstance}),[t,s,e,o]);return a.current={resourceManager:e,resourceId:t,resourceInstance:n},(0,r.useEffect)((()=>()=>null==n?void 0:n.release(o)),[n,o]),n},t.useHoldResource=e=>{(0,r.useEffect)((()=>{const t={};return e.use(t),()=>{e.release(t)}}),[e])},t.useResourceSubscriber=(e,t)=>{(0,r.useEffect)((()=>{const s=()=>t(e.getLatest());return e.subscribe(s),()=>e.unsubscribe(s)}),[t,e])},t.useValue=i,t.useValidity=c,t.useApplyChange=u,t.useResourceState=function({resource:e,enabled:t,defaultValue:s}){const o=i({resource:e,enabled:t,defaultValue:(null==e?void 0:e.getLatest())||s}),n=u(e),c=(0,r.useCallback)((e=>n((0,a.fullChange)(e))),[n]);return[o,c,e]},t.useResourceValue=function({resourceManager:e,resourceId:s,defaultValue:r,enabled:o=!0}){return i({resource:(0,t.useResourceInstance)({resourceManager:e,resourceId:s,enabled:o}),defaultValue:r,enabled:o})},t.useResourceValidity=function({resourceManager:e,resourceId:s,enabled:r=!0}){return c({resource:(0,t.useResourceInstance)({resourceManager:e,resourceId:s,enabled:r}),enabled:r})},t.useResourceApplyChange=function({resourceManager:e,resourceId:s}){return u((0,t.useResourceInstance)({resourceManager:e,resourceId:s}))},t.useResource=function(e,t){const[s,o]=(0,r.useState)(t);return(0,r.useEffect)((()=>{var s;let r=!1;if(!e)return;const a=()=>{r||(e.isReady()&&e.isValid()?o(e.getLatest()):o(t))};return e.subscribe(a),a(),null===(s=e.ready)||void 0===s||s.then(a).catch(a),()=>{r=!0,e.unsubscribe(a)}}),[e,t]),e&&e.isReady()?e.getLatest():s};const l=new WeakMap,p=e=>{const t=l.get(e);if(t)for(const s of Object.keys(t))for(const r of Object.keys(t[s]))t[s][r].resource.isReady()&&t[s][r].resource.release(e)},m=(e,t,s,r,o)=>{const a=t.getType();t.isReady()||o.push(t.ready),e[a]||(e[a]={}),e[a][t.getSerializedId()]={resource:t,field:s,isInnerRecord:r}},f={valid:!1,message:"Loading"},g=(e,t)=>{for(const s of Object.keys(e))if(t[s])for(const r of t[s])if(e[s][r])return!0;return!1};t.useResources=function(e,t=!0){const s=(e=>JSON.stringify(e,((e,t)=>t instanceof a.ResourceManager?t.getTypeName():t)))(e),[n]=(0,r.useState)({cleanupRequested:!1,enabled:t,hasChanges:!1,used:new Set});n.enabled=t;const[i,c]=(0,r.useState)(0),u=Object.keys(e),h=u.length?e[u[0]].resourceManager.getBatcher():void 0,v=l.get(n)||{},y=(0,r.useCallback)((e=>{if(!n.enabled)return;const t=g(v,e.changed),s=g(v,e.changedStatus);(t||s)&&c(Math.random())}),[v,n]);return l.has(n)||(l.set(n,v),h.subscribe(y)),(0,r.useMemo)((()=>{const t=[];n.enabled&&(h.batchAll((()=>{const s=new Set;for(const[r,o]of Object.entries(e))if(d(o))for(const e of o.ids){const a=o.resourceManager.get(e,n);s.add(a),m(v,a,r,!0,t)}else if(o.id){const e=o.resourceManager.get(o.id,n);s.add(e),m(v,e,r,!0,t)}for(const e of Object.values(v))for(const[t,r]of Object.entries(e))s.has(r.resource)||(r.resource.isReady()?(r.resource.release(n),delete e[t]):r.resource.ready.then((()=>{n.used.has(r.resource)||(r.resource.release(n),delete e[t])})).catch(o.reportError));n.used=s})),t.length&&n.enabled&&Promise.all(t).then((e=>{n.cleanupRequested?p(n):c(Math.random())})).catch((e=>{throw e})))}),[s,n,h,v]),(0,r.useEffect)((()=>()=>{p(n),h.unsubscribe(y),n.cleanupRequested=!0}),[n]),(0,r.useMemo)((()=>{return Object.keys(e).reduce(((s,r)=>{const o=e[r];if(d(o))s[r]={getResource:e=>t(r,e),getValue(e){const s=t(r,e);return s&&s.isValid()?s.getLatest():o.defaultValue},getStatus(e){const s=t(r,e);return s&&s.isReady()?s.getStatus():f}};else{const e=t(r,o.id);s[r]={value:e&&e.isValid()?e.getLatest():o.defaultValue,status:e?e.getStatus():f,resource:e}}return s}),{});function t(t,s){const r=e[t],o=d(r)?s:r.id;if(!o||!v[r.resourceManager.getTypeName()])return;const n=v[r.resourceManager.getTypeName()][(0,a.serializeId)(o)];return n&&n.resource&&n.resource.isReady()?n.resource:void 0}}),[i,t,s])}},40386:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(5163);r.__exportStar(s(78432),t),r.__exportStar(s(23496),t)},23496:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createJSONResource=void 0;const r=s(60814);t.createJSONResource=function(e){return new r.JSONResource("data",{provider:{provide:()=>({value:e})},resourceType:"state-resource",batcher:new r.Batcher})}},27941:(e,t,s)=>{e.exports=s(40386)},60868:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.windowDefaultShema=t.canvasDefaultShema=t.envPropsDefaultShema=void 0;const s=e=>({tags:[{tagName:"visualizer",text:e}]});t.envPropsDefaultShema={jsDoc:s("env-panel"),type:"object",properties:{windowWidth:{type:"number",jsDoc:s("spacing")},windowHeight:{type:"number",jsDoc:s("spacing")},windowBackgroundColor:{type:"string",jsDoc:s("color")},canvasWidth:{jsDoc:s("spacing"),type:"number"},canvasHeight:{jsDoc:s("spacing"),type:"number"},canvasBackgroundColor:{type:"string",jsDoc:s("color")},canvasMargin:{jsDoc:s("canvasMargin"),type:"common/interface",properties:{top:{type:"number",jsDoc:s("spacing")},right:{type:"number",jsDoc:s("spacing")},bottom:{type:"number",jsDoc:s("spacing")},left:{type:"number",jsDoc:s("spacing")}},required:[]},canvasPadding:{jsDoc:s("canvasPadding"),type:"common/interface",properties:{top:{type:"number",jsDoc:s("spacing")},right:{type:"number",jsDoc:s("spacing")},bottom:{type:"number",jsDoc:s("spacing")},left:{type:"number",jsDoc:s("spacing")}},required:[]}},required:[]},t.canvasDefaultShema={jsDoc:s("canvas-panel"),type:"object",properties:{canvasWidth:{jsDoc:s("spacing"),type:"number"},canvasHeight:{jsDoc:s("spacing"),type:"number"},canvasBackgroundColor:{type:"string",jsDoc:s("color")},canvasMargin:{jsDoc:s("canvasMargin"),type:"common/interface",properties:{top:{type:"number",jsDoc:s("spacing")},right:{type:"number",jsDoc:s("spacing")},bottom:{type:"number",jsDoc:s("spacing")},left:{type:"number",jsDoc:s("spacing")}},required:[]},canvasPadding:{jsDoc:s("canvasPadding"),type:"common/interface",properties:{top:{type:"number",jsDoc:s("spacing")},right:{type:"number",jsDoc:s("spacing")},bottom:{type:"number",jsDoc:s("spacing")},left:{type:"number",jsDoc:s("spacing")}},required:[]}},required:[]},t.windowDefaultShema={jsDoc:s("window-panel"),type:"object",properties:{windowWidth:{type:"number",jsDoc:s("spacing")},windowHeight:{type:"number",jsDoc:s("spacing")},windowBackgroundColor:{type:"string",jsDoc:s("color")}},required:[]}},94790:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(5163),o=s(93849),a=r.__importDefault(s(65502)),n=r.__importDefault(s(56071)),i=r.__importDefault(s(94400)),c=r.__importDefault(s(45463)),u=r.__importDefault(s(2206)),d=s(60868),l=s(5689);t.default=new o.Feature({id:"simulationEnvEditor",dependencies:[u.default.asEntity,a.default.asEntity,n.default.asEntity,i.default.asEntity,c.default.asEntity],api:{envSchema:new o.Config(d.envPropsDefaultShema),windowSchema:new o.Config(d.windowDefaultShema),canvasSchema:new o.Config(d.canvasDefaultShema),envPanelComponentsService:o.Service.withType().defineEntity(l.mainEnv),envPanelConfig:new o.Config({})}})},22653:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimulationEnvEditor=void 0;const r=s(5163).__importStar(s(87363)),o=s(87172),a=s(9240),n=s(27941),i=s(16042),c=s(51321),u=s(18413),d=s(69202),l=s(9576),p=s(98599);s(7383);const m=s(26709);t.SimulationEnvEditor=(0,r.memo)((({componentsRepo:e,idGenerator:t,simManager:s,simpleASTMain:f,envSchema:g})=>{var h;(0,d.useMark)(u.markers.envEditorRender);const v=(0,i.useVisibility)(),y=null==s?void 0:s.getDemoId(),S=null!==(h=null==s?void 0:s.getDemoId().filePath)&&void 0!==h?h:"",b=(0,n.useResourceValue)({resourceManager:f,resourceId:y?{filePath:S,parsers:c.simulationAstParsers}:void 0,defaultValue:void 0,enabled:v}),_=(0,n.useResourceValidity)({resourceManager:f,resourceId:y?{filePath:S,parsers:c.simulationAstParsers}:void 0,enabled:v}),C=(0,a.isSourceFileNode)(b)?b.statements.find(m.isDemoNode):void 0;if(!s||void 0===b||!(0,a.isSourceFileNode)(b)||!C)return r.default.createElement("div",{className:(0,p.style)(p.classes.root,{disabled:!0})},r.default.createElement(o.CodeViewsPanel,{componentsRepo:e,schema:g,astFilePath:S}));const P=()=>t.generateId(S);return r.default.createElement("div",{className:(0,p.style)(p.classes.root,{disabled:!_})},r.default.createElement(o.CodeViewsPanel,{componentsRepo:e,generateId:P,applyModification:(e,t,s)=>{const r=f.get({filePath:S,parsers:c.simulationAstParsers});e===l.CodeViewsCreateMod?(0,m.isDemoNode)(C)&&r.applyModification(C,"addEnvironmentProps",{propertyId:P(),name:(0,a.createStringNode)({astNodeId:P(),value:"environmentProps"}),value:t.newAstNode}):r.applyModification(s||r.getLatest(),e,t)},ast:null==C?void 0:C.environmentProps,schema:g,astFilePath:S}))})),t.SimulationEnvEditor.displayName="EnvEditor"}}]);