(self.webpackChunk_wixc3_component_playground=self.webpackChunk_wixc3_component_playground||[]).push([[7565],{79719:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>r,cssStates:()=>c,keyframes:()=>a,namespace:()=>n,st:()=>l,stVars:()=>i,style:()=>u,vars:()=>o});const n="o451",r={root:"s1818",breadcrumbsContainer:"s1819",docPageContainer:"s1820"},a={},i={"breadcrumbs-container-height":"30px","breadcrumbs-container-margin-top":"18px","breadcrumbs-container-margin-bottom":"24px"},o={},c=s.stc.bind(null,n),u=s.sts.bind(null,n),l=u},4502:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>r,cssStates:()=>c,keyframes:()=>a,namespace:()=>n,st:()=>l,stVars:()=>i,style:()=>u,vars:()=>o});const n="o265",r={root:"s1348"},a={},i={},o={},c=s.stc.bind(null,n),u=s.sts.bind(null,n),l=u},29688:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>r,cssStates:()=>c,keyframes:()=>a,namespace:()=>n,st:()=>l,stVars:()=>i,style:()=>u,vars:()=>o});const n="o71",r={root:"s603",componentView:"s604",topBar:"s605",tableTitle:"s606"},a={},i={},o={},c=s.stc.bind(null,n),u=s.sts.bind(null,n),l=u},94551:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>r,cssStates:()=>c,keyframes:()=>a,namespace:()=>n,st:()=>l,stVars:()=>i,style:()=>u,vars:()=>o});const n="o72",r={root:"s607",heading:"s608",title:"s609",subtitle:"s610",index:"s611",indexLink:"s612",sectionTitle:"s613",schemaViewWrapper:"s614"},a={},i={},o={},c=s.stc.bind(null,n),u=s.sts.bind(null,n),l=u},45451:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>r,cssStates:()=>c,keyframes:()=>a,namespace:()=>n,st:()=>l,stVars:()=>i,style:()=>u,vars:()=>o});const n="o266",r={root:"s1349"},a={},i={},o={},c=s.stc.bind(null,n),u=s.sts.bind(null,n),l=u},73766:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>r,cssStates:()=>c,keyframes:()=>a,namespace:()=>n,st:()=>l,stVars:()=>i,style:()=>u,vars:()=>o});const n="o73",r={root:"s615",withPadding:"s616",spinnerContainer:"s617"},a={},i={},o={},c=s.stc.bind(null,n),u=s.sts.bind(null,n),l=u},32512:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>r,cssStates:()=>c,keyframes:()=>a,namespace:()=>n,st:()=>l,stVars:()=>i,style:()=>u,vars:()=>o});const n="o431",r={root:"s1792",largeSpinner:"s1791"},a={},i={},o={},c=s.stc.bind(null,n),u=s.sts.bind(null,n),l=u},47090:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENT_DOC_PANEL_ID=t.REF_DOC_PANEL_ID=t.AUTODOCS_PANEL_ENTRY_LABEL=t.AUTODOCS_PANEL_ENTRY_ID=t.AUTODOCS_PANEL_TYPE=void 0;const n=s(5163),r=s(93849),a=n.__importDefault(s(93208)),i=n.__importDefault(s(2206)),o=n.__importDefault(s(82026)),c=n.__importDefault(s(45463)),u=n.__importDefault(s(67809));t.AUTODOCS_PANEL_TYPE="autodocs-panel",t.AUTODOCS_PANEL_ENTRY_ID="open_autodocs",t.AUTODOCS_PANEL_ENTRY_LABEL="View API",t.REF_DOC_PANEL_ID="ref-doc",t.COMPONENT_DOC_PANEL_ID="comp-doc",t.default=new r.Feature({id:"autodocs",api:{},dependencies:[a.default.asEntity,i.default.asEntity,o.default.asEntity,u.default.asEntity,c.default.asEntity]})},37419:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(5163),r=s(69202),a=s(91570),i=s(5689),o=s(73286),c=n.__importDefault(s(87363)),u=s(56392),l=s(50950),d=s(73766),f=s(78149),m=n.__importStar(s(47090));m.default.setup(i.mainEnv,(({run:e},{project:{fileManagerMain:t,projectService:s},projectUI:{openFileSlot:n},symbolSchemaExtract:{moduleSymbolsSchemaManagerMain:i,componentSchemaManagerMain:p,refSchemaManagerMain:g,schemaService:y},gui:{panelFactory:h}})=>{n.register(m.AUTODOCS_PANEL_ENTRY_ID,{label:m.AUTODOCS_PANEL_ENTRY_LABEL,actionIcon:c.default.createElement(r.ArticleIcon,null),test:a.isTypeScriptFile,panelFactoryType:m.AUTODOCS_PANEL_TYPE,factory:({filePath:e})=>{const n=new f.MdFileService(s,t,e);return c.default.createElement(u.ModuleView,{filePath:e,moduleSymbolsSchemaManager:i,schemaService:y,mdFileService:n})}}),h.register({id:m.COMPONENT_DOC_PANEL_ID,factory:({filePath:e,exportName:n})=>{const r=new f.MdFileService(s,t,e);return c.default.createElement(u.ComponentView,{filePath:e,exportName:n,componentSchemaManager:p,schemaService:y,mdFileService:r})},route:e=>{const{filePath:t,exportName:s}=e;if(!t||"string"!=typeof t)throw new Error("filePath query param missing");if(!s||"string"!=typeof s)throw new Error("exportName query param missing");return{icon:c.default.createElement(r.ArticleIcon,null),title:s,id:`${t}#${s}`,props:{filePath:t,exportName:s}}}}),h.register({id:m.REF_DOC_PANEL_ID,factory:({schemaRef:e})=>c.default.createElement(l.RefDoc,{schemaRef:e,refSchemaManager:g,className:d.classes.withPadding,schemaService:y}),route:e=>{const{schemaRef:t}=e;if(!t||"string"!=typeof t)throw new Error("schemaRef query param missing");return{icon:c.default.createElement(r.ArticleIcon,null),title:(0,o.getTypeNameFromRef)(t),id:t,props:{schemaRef:t}}}}),e((()=>null))}))},5705:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=s(5163);var r=s(47090);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.__importDefault(r).default}}),n.__exportStar(s(47090),t)},47265:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutodocsView=void 0;const n=s(5163).__importStar(s(87363)),r=s(67586),a=s(79719),i=s(83135);t.AutodocsView=({children:e,rootName:t,schemaService:s,mdFileService:o,containerRef:c})=>{const{track:u}=(0,n.useContext)(i.AnalyticsContext),l=(0,n.useRef)(null),{overlayContainer:d}=(0,n.useContext)(i.AreasContext);return(0,n.useEffect)((()=>{var e;null===(e=l.current)||void 0===e||e.resetToRoot()}),[e]),n.default.createElement("div",{className:a.classes.root},n.default.createElement(r.SchemaViewsContextProvider,{containerRef:c,resolveSymbolSchemasByReference:null==s?void 0:s.getSymbolSchemasByReference,mdFileService:o,trackMethod:u,targetContainer:(0,n.useMemo)((()=>d?()=>d:null),[d])},n.default.createElement(r.Breadcrumbs,{className:a.classes.breadcrumbsContainer,rootName:t}),n.default.createElement("div",{className:a.classes.docPageContainer},n.default.createElement(r.DocPage,{ref:l},e))))}},22102:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentView=void 0;const n=s(5163).__importStar(s(87363)),r=s(67586),a=s(27941),i=s(16042),o=s(29688),c=s(47265);s(4502);const u=["componentDidCatch","componentDidMount","componentDidUpdate","componentWillMount","componentWillReceiveProps","componentWillUnmount","componentWillUpdate","forceUpdate","getSnapshotBeforeUpdate","render","setState","shouldComponentUpdate","UNSAFE_componentWillMount","UNSAFE_componentWillReceiveProps","UNSAFE_componentWillUpdate"];t.ComponentView=n.default.memo((function({filePath:e,exportName:t,componentSchemaManager:s,mdFileService:l,schemaService:d}){var f,m,p,g,y,h;const _=(0,i.useVisibility)(),E=(0,a.useResourceValue)({resourceManager:s,resourceId:(0,n.useMemo)((()=>({filePath:e,componentSymbolName:t})),[t,e]),enabled:_}),v=(0,n.useRef)(null),S=(0,n.useRef)(null),b=null===(f=null==E?void 0:E.componentSchema)||void 0===f?void 0:f.definition,M=null==b?void 0:b.properties,R=(0,n.useMemo)((()=>M&&{...b,properties:Object.fromEntries(Object.entries(M).filter((([e,t])=>"common/function"===t.type&&!u.includes(e))))}),[b,M]),O=null===(m=null==E?void 0:E.componentSchema.property)||void 0===m?void 0:m.jsDoc;return(0,n.useEffect)((()=>{var e;null===(e=v.current)||void 0===e||e.resetToRoot()}),[E]),E?n.default.createElement("div",{className:o.classes.root,"data-autodocs":e},n.default.createElement("div",{className:o.classes.topBar},`‘${null!==(p=E.componentSchema.name)&&void 0!==p?p:""}’ Documentation`),n.default.createElement("div",{className:(0,o.style)(o.classes.componentView),ref:S},n.default.createElement(c.AutodocsView,{schemaService:d,mdFileService:l,containerRef:S,rootName:E.componentSchema.name},n.default.createElement(r.Header,{entity:"component",name:null!==(g=E.componentSchema.name)&&void 0!==g?g:""}),n.default.createElement(r.Description,{content:null==O?void 0:O.description,mdPath:null===(h=null===(y=null==O?void 0:O.tags)||void 0===y?void 0:y.find((e=>"link"===e.tagName)))||void 0===h?void 0:h.text}),E.propsSchema.properties&&n.default.createElement(r.EntityDoc,{schema:E.propsSchema,showHeader:!1}),R&&Object.keys(R.properties).length>0&&n.default.createElement(n.default.Fragment,null,n.default.createElement("h3",{className:o.classes.tableTitle},"Methods"),n.default.createElement(r.EntityDoc,{schema:R,showHeader:!1}))))):n.default.createElement("span",null,"loading...")}))},78985:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleView=void 0;const n=s(5163).__importStar(s(87363)),r=s(67586),a=s(94551),i=s(27941),o=s(95157),c=s(16042),u=s(47265);t.ModuleView=n.default.memo((({moduleSymbolsSchemaManager:e,filePath:t,mdFileService:s,schemaService:l})=>{const d=(0,c.useVisibility)(),f=(0,i.useResourceValue)({resourceManager:e,resourceId:t,enabled:d}),{containerRef:m,handleLinkClick:p}=(0,o.useLinkHandler)(t,void 0!==f),g=(0,n.useMemo)((()=>Boolean(f&&f.exportedSymbols.length>0)),[f]),y=(0,n.useMemo)((()=>Boolean(f&&f.localSymbols.length>0)),[f]),h=(0,n.useCallback)((e=>{const t=`#/definitions/${e.name}`;return n.default.createElement("a",{onClick:e=>p(e,t),href:(0,o.buildLinkFromRef)(t)},e.name)}),[p]);return f?n.default.createElement("div",{"data-autodocs":t,className:(0,a.style)(a.classes.root),ref:m},n.default.createElement(u.AutodocsView,{schemaService:l,mdFileService:s,containerRef:m},n.default.createElement("div",{className:a.classes.heading},n.default.createElement("h1",{className:a.classes.title},"Module ",(e=>{const t=e.substr(e.lastIndexOf("/")+1);return t.substr(0,t.lastIndexOf("."))})(t)," "),n.default.createElement("h3",{className:a.classes.subtitle},"File path: ",t," ")),(g||y)&&n.default.createElement(n.default.Fragment,null,n.default.createElement("h2",{className:a.classes.sectionTitle},"Index"),n.default.createElement("ul",{className:a.classes.index},f.exportedSymbols.map((e=>n.default.createElement("li",{key:e.name,className:a.classes.indexLink},h(e)))),f.localSymbols.map((e=>n.default.createElement("li",{key:e.name,className:a.classes.indexLink},h(e)))))),g&&n.default.createElement(n.default.Fragment,null,n.default.createElement("h2",{className:a.classes.sectionTitle},"Exported:"),f.exportedSymbols.map((e=>n.default.createElement("div",{key:e.name,className:a.classes.schemaViewWrapper},n.default.createElement(r.EntityDoc,{schema:e}))))),y&&n.default.createElement(n.default.Fragment,null,n.default.createElement("h2",{className:a.classes.sectionTitle},"Local:"),f.localSymbols.map((e=>n.default.createElement(r.EntityDoc,{key:e.name,schema:e})))))):n.default.createElement("span",null,"loading...")})),t.ModuleView.displayName="ModuleView"},50950:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RefDoc=void 0;const n=s(5163).__importStar(s(87363)),r=s(67586),a=s(70268),i=s(73766),o=s(32512);s(45451);const c=s(27941),u=s(16042),l=s(47265);t.RefDoc=({schemaRef:e,refSchemaManager:t,className:s,schemaService:d})=>{const f=(0,n.useRef)(null),m=(0,u.useVisibility)(),p=(0,c.useResourceValue)({resourceManager:t,resourceId:e,enabled:m});return p?n.default.createElement("div",{className:(0,i.style)(i.classes.root,s),ref:f},n.default.createElement(l.AutodocsView,{schemaService:d,rootName:p.name,containerRef:f},n.default.createElement(r.EntityDoc,{schema:p}))):n.default.createElement("div",{className:(0,i.style)(i.classes.root,i.classes.spinnerContainer)},n.default.createElement(a.Spinner,{className:o.classes.largeSpinner}))}},95157:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useLinkHandler=t.buildLinkFromRef=void 0;const n=s(87363),r=s(83135),a=s(5705);t.buildLinkFromRef=e=>{const[t]=e.split("#"),s=t?{filePath:t}:{};return(0,r.getURLQueryParams)(a.AUTODOCS_PANEL_TYPE,s,window.location)};const i=({type:e})=>e===a.AUTODOCS_PANEL_TYPE||e===a.COMPONENT_DOC_PANEL_ID;t.useLinkHandler=function(e,t){const{filePath:s,innerRef:o,type:c}=(()=>{const e=(0,r.useQueryParams)(["type","filePath","innerRef"],i);if("string"!=typeof e.type||"string"!=typeof e.filePath||void 0!==e.innerRef&&"string"!=typeof e.innerRef)throw new Error("Invalid query params");return{type:e.type,filePath:e.filePath,innerRef:e.innerRef}})(),u=(0,n.useRef)(null),l=(e,t)=>{if(!e.current)return;const s=e.current.querySelector(`[data-ref='${t}']`);s&&requestAnimationFrame((()=>{s.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}))};(0,n.useEffect)((()=>{t&&o&&s===e&&l(u,o)}),[t,e,s,o]);const d=(0,n.useCallback)(((t,s)=>{const[n,i]=s.split("#"),d=n||e;t.preventDefault(),(0,r.navigateToPanel)({type:d===e?c:a.AUTODOCS_PANEL_TYPE,props:{filePath:d,innerRef:i}}),i===o&&l(u,o)}),[e,o,c]);return{containerRef:u,handleLinkClick:d}}},56392:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(5163);n.__exportStar(s(22102),t),n.__exportStar(s(78985),t),n.__exportStar(s(95157),t),n.__exportStar(s(13468),t)},78149:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MdFileService=void 0;const n=s(5163).__importDefault(s(73654)),r=s(91570),{posix:a}=n.default;t.MdFileService=class{constructor(e,t,s){this.projectService=e,this.fileManager=t,this.filePath=s,this.subscribers=new Map,this.fileResources=new Map,this.fileResourceHandlers=new Map}subscribe(e,t){if(this.subscribers.has(e))return void this.subscribers.get(e).subscribe(t);const s=(0,r.setupSubscribers)();s.subscribe(t),this.subscribers.set(e,s);const[n,i]=e.split("#"),o=a.isAbsolute(n)?n:a.resolve(a.dirname(this.filePath),n);this.getMdFileResource(o).then((t=>{if(t&&!this.fileResourceHandlers.has(e)){this.fileResourceHandlers.set(e,(()=>{const e=t.getLatest(),n=i&&this.getAnchorSection(e,i)||e;s.internals.notify(n)}));const n=this.fileResourceHandlers.get(e);t.subscribe(n),n()}})).catch(r.reportError)}unsubscribe(e,t){if(this.subscribers.has(e)){this.subscribers.get(e).unsubscribe(t),this.subscribers.delete(e);const[s]=e.split("#"),n=a.isAbsolute(s)?s:a.resolve(a.dirname(this.filePath),s);if(this.fileResources.has(n)){const t=this.fileResources.get(n);this.fileResourceHandlers.has(e)&&(t.unsubscribe(this.fileResourceHandlers.get(e)),this.fileResourceHandlers.delete(e)),1===t.subscribers.size&&(t.release(this),this.fileResources.delete(n))}}}async getMdFileResource(e){if(e.match(/\.md$/)&&await this.projectService.entityExists(e)){const t=await this.fileManager.getReady(e,this);return this.fileResources.set(e,t),t}return null}getAnchorSection(e,t){const s=this.getSections(e),n=s.findIndex((e=>e.id===t));if(n>=0){let e="";const t=s[n].level;e+=s[n].content;for(let r=n+1;r<s.length&&s[r].level>t;r++)e+=s[r].content;return e}return null}getSections(e){const t=[],s=e.split("\n");let n;for(const e of s){const s=e.match(/^#{1,6}/g);if(s){const r=s[0].length;n={id:e.replace(/^#{1,6} */g,"").replace(/[^a-zA-Z0-9]/g,"-").toLowerCase(),level:r,content:e},t.push(n)}else n&&(n.content+=`\n${e}`)}return t}}},13468:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDocPopupLayout=void 0,t.getDocPopupLayout=(e,t)=>({height:"auto",width:"700px",left:`calc(${e}px - 700px)`,top:`min(calc(${t}px - 100px), calc(100% - 600px))`})},44544:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(5163),r=s(93849),a=n.__importDefault(s(91821)),i=n.__importDefault(s(93208)),o=n.__importDefault(s(45463)),c=n.__importDefault(s(2206)),u=n.__importDefault(s(82026)),l=n.__importDefault(s(93673)),d=s(5689);t.default=new r.Feature({id:"componentTab",dependencies:[i.default.asEntity,a.default.asEntity,c.default.asEntity,o.default.asEntity,u.default.asEntity,l.default.asEntity],api:{sectionSlot:r.OrderedSlot.withType().defineEntity(d.mainEnv),sectionSlotOrder:new r.Config([["id",["simulations"]]])}})},55176:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=s(5163);var r=s(44544);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.__importDefault(r).default}}),n.__exportStar(s(44544),t)},67809:(e,t,s)=>{e.exports=s(55176)},68941:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;const n=s(5163),r=s(93849),a=n.__importStar(s(2206));t.default=new r.Feature({id:"gitCommands",dependencies:[a.default.asEntity],api:{gitCommandsService:r.Service.withType().defineEntity(a.processingEnv).allowRemoteAccess((0,r.declareComEmitter)("subscribe","unsubscribe"))},context:{gitCommandsContext:a.processingEnv.withContext()}}),t.Context=a.processingEnv.useContext("live-server")},54718:function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(68941);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},35784:(e,t,s)=>{e.exports=s(54718)},20137:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(5163),r=s(93849),a=s(32510),i=n.__importDefault(s(35784)),o=n.__importStar(s(2206)),c=s(5689),u=(0,a.defineOneWayResource)().defineEntity(o.processingEnv),l=(0,a.defineOneWayResource)().defineEntity(o.processingEnv),d=(0,a.defineComputedResource)().defineEntity(o.processingEnv),f=(0,a.defineOneWayResource)().defineEntity(o.processingEnv),m=(0,a.defineOneWayResource)().defineEntity(o.processingEnv),p=(0,a.defineOneWayResource)().defineEntity(o.processingEnv),g=(0,a.defineComputedResource)().defineEntity(o.processingEnv);t.default=new r.Feature({id:"gitRevision",dependencies:[o.default.asEntity,i.default.asEntity],api:{gitService:r.Service.withType().defineEntity(o.processingEnv).allowRemoteAccess(),gitDetector:r.Service.withType().defineEntity(o.processingEnv).allowRemoteAccess(),gitFetcher:r.Service.withType().defineEntity(o.processingEnv).allowRemoteAccess(),gitFetcherOption:new r.Config({fetchInterval:6e5,enabled:!0}),gitSyncRepoService:r.Service.withType().defineEntity(o.processingEnv).allowRemoteAccess(),gitHeadResourceManager:u,gitHeadResourceManagerMain:u.defineConsumer(c.mainEnv),gitRepoStatusResourceManager:l,gitRepoStatusResourceManagerMain:l.defineConsumer(c.mainEnv),gitFileStatusResourceManager:d,gitFileStatusResourceManagerMain:d.defineConsumer(c.mainEnv),gitBranchListResourceManager:f,gitBranchListResourceManagerMain:f.defineConsumer(c.mainEnv),gitMergeStateResourceManager:m,gitMergeStateResourceManagerMain:m.defineConsumer(c.mainEnv),gitSyncRepoResourceManager:p,gitSyncRepoResourceManagerMain:p.defineConsumer(c.mainEnv),gitTrackingBranchResourceManager:g,gitTrackingBranchResourceManagerMain:g.defineConsumer(c.mainEnv),gitConflictsService:r.Service.withType().defineEntity(o.processingEnv).allowRemoteAccess(),gitEventEmitter:r.Service.withType().defineEntity(o.processingEnv),gitMonitoringService:r.Service.withType().defineEntity(o.processingEnv).allowRemoteAccess()}})},3486:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=s(5163);n.__exportStar(s(20137),t);var r=s(20137);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.__importDefault(r).default}})},72975:(e,t,s)=>{e.exports=s(3486)},83135:(e,t,s)=>{e.exports=s(77467)},78432:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useResources=t.useResource=t.useResourceApplyChange=t.useResourceValidity=t.useResourceValue=t.useResourceState=t.useApplyChange=t.useValidity=t.useValue=t.useResourceSubscriber=t.useHoldResource=t.useResourceInstance=void 0;const n=s(87363),r=s(93849),a=s(60814),i=s(69202);function o({resource:e,defaultValue:t,enabled:s=!0}){const a=(0,i.useForceUpdate)(),o=(0,n.useRef)(!1),c=(0,i.useLatest)(s),u=(0,n.useCallback)((()=>{c.current&&!o.current&&a()}),[c,a]);return(0,n.useEffect)((()=>(e&&e.subscribe(u),(null==e?void 0:e.ready)&&e.ready.then(u).catch(r.reportError),()=>{null==e||e.unsubscribe(u)})),[u,e]),(0,n.useEffect)((()=>()=>{o.current=!0}),[]),function(e,t){return e&&e.isReady()&&e.isValid()?e.getLatest():t}(e,t)}function c({resource:e,enabled:t=!0}){const[s,r]=(0,n.useState)(),a=(0,n.useCallback)((()=>{if(t){const t=e&&e.isReady()?e.isValid():void 0;r(t)}}),[e,t]);return(0,n.useEffect)((()=>{var s;if(!e)return void(t&&r(void 0));let n=!1;const i=()=>{n||a()};return e.subscribe(i),i(),null===(s=e.ready)||void 0===s||s.then(i).catch(i),()=>{n=!0,e.unsubscribe(i)}}),[e,a,t]),s}function u(e){return(0,n.useCallback)((t=>{null==e||e.applyChange(t)}),[e])}function l(e){return!!e.ids}t.useResourceInstance=({resourceManager:e,resourceId:t,enabled:s=!0})=>{const r=(0,n.useMemo)((()=>({})),[]),a=(0,n.useRef)({resourceManager:e,resourceId:t}),i=(0,n.useMemo)((()=>{if(void 0===t)return;const{current:n}=a;return function(e,t,s){return e||t.resourceId!==s.resourceId||t.resourceManager!==s.resourceManager}(s,n,{resourceManager:e,resourceId:t})?e.get(t,r):n.resourceInstance}),[t,s,e,r]);return a.current={resourceManager:e,resourceId:t,resourceInstance:i},(0,n.useEffect)((()=>()=>null==i?void 0:i.release(r)),[i,r]),i},t.useHoldResource=e=>{(0,n.useEffect)((()=>{const t={};return e.use(t),()=>{e.release(t)}}),[e])},t.useResourceSubscriber=(e,t)=>{(0,n.useEffect)((()=>{const s=()=>t(e.getLatest());return e.subscribe(s),()=>e.unsubscribe(s)}),[t,e])},t.useValue=o,t.useValidity=c,t.useApplyChange=u,t.useResourceState=function({resource:e,enabled:t,defaultValue:s}){const r=o({resource:e,enabled:t,defaultValue:(null==e?void 0:e.getLatest())||s}),i=u(e),c=(0,n.useCallback)((e=>i((0,a.fullChange)(e))),[i]);return[r,c,e]},t.useResourceValue=function({resourceManager:e,resourceId:s,defaultValue:n,enabled:r=!0}){return o({resource:(0,t.useResourceInstance)({resourceManager:e,resourceId:s,enabled:r}),defaultValue:n,enabled:r})},t.useResourceValidity=function({resourceManager:e,resourceId:s,enabled:n=!0}){return c({resource:(0,t.useResourceInstance)({resourceManager:e,resourceId:s,enabled:n}),enabled:n})},t.useResourceApplyChange=function({resourceManager:e,resourceId:s}){return u((0,t.useResourceInstance)({resourceManager:e,resourceId:s}))},t.useResource=function(e,t){const[s,r]=(0,n.useState)(t);return(0,n.useEffect)((()=>{var s;let n=!1;if(!e)return;const a=()=>{n||(e.isReady()&&e.isValid()?r(e.getLatest()):r(t))};return e.subscribe(a),a(),null===(s=e.ready)||void 0===s||s.then(a).catch(a),()=>{n=!0,e.unsubscribe(a)}}),[e,t]),e&&e.isReady()?e.getLatest():s};const d=new WeakMap,f=e=>{const t=d.get(e);if(t)for(const s of Object.keys(t))for(const n of Object.keys(t[s]))t[s][n].resource.isReady()&&t[s][n].resource.release(e)},m=(e,t,s,n,r)=>{const a=t.getType();t.isReady()||r.push(t.ready),e[a]||(e[a]={}),e[a][t.getSerializedId()]={resource:t,field:s,isInnerRecord:n}},p={valid:!1,message:"Loading"},g=(e,t)=>{for(const s of Object.keys(e))if(t[s])for(const n of t[s])if(e[s][n])return!0;return!1};t.useResources=function(e,t=!0){const s=(e=>JSON.stringify(e,((e,t)=>t instanceof a.ResourceManager?t.getTypeName():t)))(e),[i]=(0,n.useState)({cleanupRequested:!1,enabled:t,hasChanges:!1,used:new Set});i.enabled=t;const[o,c]=(0,n.useState)(0),u=Object.keys(e),y=u.length?e[u[0]].resourceManager.getBatcher():void 0,h=d.get(i)||{},_=(0,n.useCallback)((e=>{if(!i.enabled)return;const t=g(h,e.changed),s=g(h,e.changedStatus);(t||s)&&c(Math.random())}),[h,i]);return d.has(i)||(d.set(i,h),y.subscribe(_)),(0,n.useMemo)((()=>{const t=[];i.enabled&&(y.batchAll((()=>{const s=new Set;for(const[n,r]of Object.entries(e))if(l(r))for(const e of r.ids){const a=r.resourceManager.get(e,i);s.add(a),m(h,a,n,!0,t)}else if(r.id){const e=r.resourceManager.get(r.id,i);s.add(e),m(h,e,n,!0,t)}for(const e of Object.values(h))for(const[t,n]of Object.entries(e))s.has(n.resource)||(n.resource.isReady()?(n.resource.release(i),delete e[t]):n.resource.ready.then((()=>{i.used.has(n.resource)||(n.resource.release(i),delete e[t])})).catch(r.reportError));i.used=s})),t.length&&i.enabled&&Promise.all(t).then((e=>{i.cleanupRequested?f(i):c(Math.random())})).catch((e=>{throw e})))}),[s,i,y,h]),(0,n.useEffect)((()=>()=>{f(i),y.unsubscribe(_),i.cleanupRequested=!0}),[i]),(0,n.useMemo)((()=>{return Object.keys(e).reduce(((s,n)=>{const r=e[n];if(l(r))s[n]={getResource:e=>t(n,e),getValue(e){const s=t(n,e);return s&&s.isValid()?s.getLatest():r.defaultValue},getStatus(e){const s=t(n,e);return s&&s.isReady()?s.getStatus():p}};else{const e=t(n,r.id);s[n]={value:e&&e.isValid()?e.getLatest():r.defaultValue,status:e?e.getStatus():p,resource:e}}return s}),{});function t(t,s){const n=e[t],r=l(n)?s:n.id;if(!r||!h[n.resourceManager.getTypeName()])return;const i=h[n.resourceManager.getTypeName()][(0,a.serializeId)(r)];return i&&i.resource&&i.resource.isReady()?i.resource:void 0}}),[o,t,s])}},40386:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(5163);n.__exportStar(s(78432),t),n.__exportStar(s(23496),t)},23496:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createJSONResource=void 0;const n=s(60814);t.createJSONResource=function(e){return new n.JSONResource("data",{provider:{provide:()=>({value:e})},resourceType:"state-resource",batcher:new n.Batcher})}},27941:(e,t,s)=>{e.exports=s(40386)},26427:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=s(5163);var r=s(16894);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.__importDefault(r).default}}),n.__exportStar(s(16894),t)},16894:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RECOMPUTE_DEMO_LIST_MARK=t.COMPUTE_DEMO_LIST_MARK=void 0;const n=s(5163),r=s(93849),a=s(5689),i=n.__importStar(s(2206)),o=n.__importDefault(s(94400)),c=n.__importDefault(s(91821)),u=n.__importDefault(s(58729)),l=n.__importDefault(s(72975)),d=n.__importDefault(s(89111)),f=n.__importDefault(s(32562)),m=s(32510),p=n.__importDefault(s(64229)),g=n.__importDefault(s(93104)),y=s(3092);t.COMPUTE_DEMO_LIST_MARK="COMPUTE_DEMO_LIST_MARK",t.RECOMPUTE_DEMO_LIST_MARK="RECOMPUTE_DEMO_LIST_MARK";const h=(0,m.defineComputedResource)().defineEntity(i.processingEnv),_=(0,m.defineTwoWayResource)().defineEntity(i.processingEnv),E=(0,m.defineComputedResource)().defineEntity(i.processingEnv);t.default=new r.Feature({id:"simulationCapabilities",dependencies:[i.default.asEntity,l.default.asEntity,c.default.asEntity,o.default.asEntity,d.default.asEntity,f.default.asEntity,p.default.asEntity,u.default.asEntity,g.default.asEntity],api:{demoListManager:h,demoListManagerMain:h.defineConsumer(a.mainEnv),simulationService:r.Service.withType().defineEntity(a.mainEnv),simulationProcessingService:r.Service.withType().defineEntity(i.processingEnv).allowRemoteAccess(),demoErrorManager:_,demoErrorManagerMain:_.defineConsumer(a.mainEnv),environmentPropsManager:E,environmentPropsManagerMain:E.defineConsumer(a.mainEnv)}}).setup(r.Universal,(({},{simpleAST:{simpleASTPlugin:e}})=>{e.register(y.jsxFunctionPlugin),e.register(y.jsxFilePlugin),e.register(y.jsxOwnerPlugin)}))},93673:(e,t,s)=>{e.exports=s(26427)},31200:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=s(5163);var r=s(98582);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.__importDefault(r).default}}),n.__exportStar(s(98582),t)},98582:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simpleAstNodeSchemaManager=t.refSchemaManager=t.moduleSymbolsSchemaManager=t.componentSchemaManager=void 0;const n=s(5163),r=s(93849),a=s(32510),i=s(5689),o=n.__importStar(s(2206)),c=n.__importDefault(s(89111)),u=n.__importDefault(s(94400));t.componentSchemaManager=(0,a.defineComputedResource)().defineEntity(o.processingEnv),t.moduleSymbolsSchemaManager=(0,a.defineComputedResource)().defineEntity(o.processingEnv),t.refSchemaManager=(0,a.defineComputedResource)().defineEntity(o.processingEnv),t.simpleAstNodeSchemaManager=(0,a.defineComputedResource)().defineEntity(o.processingEnv),t.default=new r.Feature({id:"symbolSchemaExtract",dependencies:[o.default.asEntity,c.default.asEntity,u.default.asEntity],api:{schemaService:r.Service.withType().defineEntity(o.processingEnv).allowRemoteAccess(),componentSchemaManager:t.componentSchemaManager,componentSchemaManagerMain:t.componentSchemaManager.defineConsumer(i.mainEnv),moduleSymbolsSchemaManager:t.moduleSymbolsSchemaManager,moduleSymbolsSchemaManagerMain:t.moduleSymbolsSchemaManager.defineConsumer(i.mainEnv),refSchemaManager:t.refSchemaManager,refSchemaManagerMain:t.refSchemaManager.defineConsumer(i.mainEnv),simpleAstNodeSchemaManager:t.simpleAstNodeSchemaManager,simpleAstNodeSchemaManagerMain:t.simpleAstNodeSchemaManager.defineConsumer(i.mainEnv),schemaConfig:new r.Config({getSchemasDebounceTime:500,getSchemasMaxDebounceTime:2e3}),computeSchemaCacheEnvs:r.Service.withType().defineEntity(o.processingEnv)},context:{schemaExtractContext:o.processingEnv.withContext()}})},49262:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(5163);n.__exportStar(s(53661),t),n.__exportStar(s(93608),t)},93608:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},53661:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getArrayItemSchema=t.getFileFromRef=t.getDefinitionFromRef=t.getTypeNameFromRef=t.getSimplifiedRef=void 0,t.getSimplifiedRef=e=>{const[t,s]=e.split("#"),n=s.lastIndexOf("/");return-1===n?`${t}#${s}`:`${t}#${s.substr(n+1)}`},t.getTypeNameFromRef=function(e){const t=e.split("#")[1].split("/");return t[t.length-1].replace("default.","")},t.getDefinitionFromRef=function(e){if(e.includes("#")&&e.split("#")[1].includes("/definitions/"))return e.split("#")[1].split("/definitions/")[1]},t.getFileFromRef=function(e){if(e.includes("#"))return e.split("#")[0]},t.getArrayItemSchema=function(e,t){const s=e.items;return Array.isArray(s)?s[t]:s}},45463:(e,t,s)=>{e.exports=s(31200)},73286:(e,t,s)=>{e.exports=s(49262)}}]);