(self.webpackChunk_wixc3_component_playground=self.webpackChunk_wixc3_component_playground||[]).push([[5856],{45219:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAppliedChanges=void 0,t.getAppliedChanges=function(e){const t=e.map((e=>({newText:e.newText,span:{length:e.span.length,start:e.span.start}})));for(let e=0;e<t.length;e++){const n=t[e],r=n.newText.length-n.span.length;for(let o=e+1;o<t.length;o++)t[o].span.start>=n.span.start&&(t[o].span.start+=r)}return t}},58665:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.escapeDblQuote=t.escapeSingleQuote=t.isValidIdentifierName=void 0,t.isValidIdentifierName=e=>e.length&&!/[^\d\w]/g.test(e),t.escapeSingleQuote=e=>e.replace(/\\/g,"\\\\").replace(/'/g,"\\'"),t.escapeDblQuote=e=>e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')},60147:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAstFromString=void 0;const r=n(5163).__importDefault(n(60270));t.createAstFromString=function(e){const t=r.default.createSourceFile("createAstFromString.ts",`0,${e}`,r.default.ScriptTarget.Latest,!1,r.default.ScriptKind.TSX);if(1!==t.statements.length)throw new Error("Failed to parse partial code: too many statements");const n=t.statements[0];if(r.default.isExpressionStatement(n)&&r.default.isBinaryExpression(n.expression))return n.expression.right;throw new Error("Failed to parse partial code: statement is not an expression")}},49001:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findConvertor=void 0,t.findConvertor=(e,t)=>e.find((e=>e.isApplicable(t,null)))},22161:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getModification=void 0;const r=n(49001);t.getModification=(e,t,n)=>{const o=(0,r.findConvertor)(e.convertors,t);if(!o)throw new Error("can't find convertor");const i=o.modifications[n];if(!i)throw new Error(`no modification: ${n}`);return i}},79606:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5163);r.__exportStar(n(45219),t),r.__exportStar(n(58665),t),r.__exportStar(n(60147),t),r.__exportStar(n(59750),t),r.__exportStar(n(81315),t),r.__exportStar(n(48475),t),r.__exportStar(n(96689),t),r.__exportStar(n(81238),t),r.__exportStar(n(22161),t),r.__exportStar(n(49001),t)},59750:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLeadingSpaces=t.findCommaBeforeNode=t.findCommaAfterNode=t.mergeWithPreviousChanges=t.mergeChanges=t.getAddedChars=void 0,t.getAddedChars=e=>e.newContent.reduce(((e,t)=>"string"==typeof t?e+t.length:e),0),t.mergeChanges=(e,n)=>n.map((n=>(0,t.mergeWithPreviousChanges)(e,n))),t.mergeWithPreviousChanges=(e,n)=>{let r=n.from,o=n.to;for(const n of e){const e=n.from-n.to+(0,t.getAddedChars)(n);n.to<=r?(r+=e,o+=e):n.from<r&&(o+=e)}return{from:r,to:o,newContent:n.newContent}},t.findCommaAfterNode=function(e,t){const n=e.findIndex((e=>e===t)),r=e[n+1];if(r&&","===r.getText())return r},t.findCommaBeforeNode=function(e,t){const n=e.findIndex((e=>e===t)),r=e[n-1];if(r&&","===r.getText())return r},t.getLeadingSpaces=function(e){return e.getFullText().slice(0,e.getLeadingTriviaWidth()).replace(/./g," ")}},81315:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.printWithIds=void 0;const r=n(5163).__importDefault(n(60270)),o=n(36136);t.printWithIds=function(e,t){const n=e.getFullText(),i={},a=e=>{const n=t(e);n&&(i[e.getStart()]=i[e.getStart()]||[],i[e.getEnd()]=i[e.getEnd()]||[],i[e.getStart()].push((0,o.startNode)(n,e.kind)),i[e.getEnd()].push((0,o.endNode)(n))),r.default.forEachChild(e,a)},s=[];a(e);let d=0;const l=Object.keys(i).map((e=>parseInt(e))).sort(((e,t)=>e-t));for(const t of l){const r=t-e.getFullStart();s.push(n.slice(d,r)),d=r,s.push(...i[t])}return s.push(n.slice(d)),s}},96689:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMainSymbolDeclaration=t.getEachChild=void 0,t.getEachChild=function(e){const t=[];return e.forEachChild((e=>{t.push(e)})),t},t.getMainSymbolDeclaration=function(e){return e.valueDeclaration||(e.declarations?e.declarations[0]:void 0)}},81238:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.template=void 0;const r=n(5163).__importDefault(n(60270));t.template=function(e){const t=r.default.createSourceFile("template.ts",e,r.default.ScriptTarget.Latest,!1,r.default.ScriptKind.TSX);return e=>r.default.createPrinter().printFile(r.default.transform(t,[t=>n=>{const o=n=>r.default.isIdentifier(n)&&e[n.text]?e[n.text]:r.default.visitEachChild(n,o,t);return r.default.visitNode(n,o)}]).transformed[0])}},48475:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addImports=t.createEnsureImportTypescript=t.computeNewLocalName=t.escapeFileName=t.getImportsOfModule=t.getReferenceTarget=t.scanModuleImports=t.scanModuleVars=t.getAccessibleScopes=t.getVariableScope=t.isVariableBlockingNode=t.isNamedAccess=t.isNamedDeclaration=t.isNamedAssignment=t.isReferencableDeclaration=t.isTypeLike=void 0;const r=n(5163).__importDefault(n(60270)),o=n(60814);function i(e){return r.default.isTypeAliasDeclaration(e)||r.default.isInterfaceDeclaration(e)||r.default.isTypeNode(e)}function a(e){return r.default.isVariableDeclaration(e)||r.default.isParameter(e)||r.default.isImportClause(e)||r.default.isNamespaceImport(e)||r.default.isImportSpecifier(e)||r.default.isEnumDeclaration(e)||r.default.isClassDeclaration(e)||r.default.isFunctionDeclaration(e)||r.default.isBindingElement(e)||r.default.isFunctionLike(e)}function s(e){return r.default.isPropertyDeclaration(e)||r.default.isPropertyAssignment(e)}function d(e){return r.default.isFunctionLike(e)||r.default.isBlock(e)||r.default.isSourceFile(e)}function l(e){const t=[];for(;e.parent&&!r.default.isSourceFile(e.parent);)d(e=e.parent)&&t.push(e);return t.push(e.getSourceFile()),t}t.isTypeLike=i,t.isReferencableDeclaration=a,t.isNamedAssignment=s,t.isNamedDeclaration=function(e){return a(e)||s(e)},t.isNamedAccess=function(e){return r.default.isPropertyAccessExpression(e)},t.isVariableBlockingNode=d,t.getVariableScope=function(e){for(;e.parent&&!r.default.isSourceFile(e.parent);)if(d(e=e.parent))return e;return e.getSourceFile()},t.getAccessibleScopes=l;const c=new WeakMap,u=new WeakMap;function g(e){return e.statements.reduce(((e,t)=>{var n;if(r.default.isImportDeclaration(t)){const o=t.moduleSpecifier;if(t.importClause&&r.default.isStringLiteral(o)){const i=o.text;e.toDeclaration[i]=e.toDeclaration[i]||[],e.toDeclaration[i].push(t),e.toLocal[i]=e.toLocal[i]||{},t.importClause.name&&(e.toLocal[i].default=t.importClause.name.text);const a=t.importClause.namedBindings;if(a)if(r.default.isNamespaceImport(a))e.toLocal[i]["*"]=a.name.text;else for(const t of a.elements)e.toLocal[i][(null===(n=t.propertyName)||void 0===n?void 0:n.text)||t.name.text]=t.name.text}}return e}),{toDeclaration:{},toLocal:{}})}function f(e){return e.slice(e.lastIndexOf("/")+1).split("-").map((e=>e[0].toUpperCase()+e.slice(1))).join("").split(".").join("_")}function p(e,t,n,r){const o="*"===t||"default"===t?f(e):t;let i=0,a=o;for(;n[a]||r.has(a);)a=o+i,i++;return a}t.scanModuleVars=e=>{if(c.has(e))return c.get(e);const t={},n=new Set;n.add(e);let o=e;const s=l=>{if(!i(l)){const i=o;r.default.isIdentifier(l)?a(l.parent)&&l.parent.name===l&&(t[l.text]=t[l.text]||new Map,t[l.text].set(r.default.isFunctionDeclaration(l.parent)?e:o,l.parent)):d(l)&&(o=l,n.add(l)),l.forEachChild(s),o=i}};e.forEachChild(s);const l={variableScopeMap:t,scopes:n};return c.set(e,l),l},t.scanModuleImports=e=>{if(u.has(e))return u.get(e);const t=g(e);return u.set(e,t),t},t.getReferenceTarget=e=>{const n=(0,t.scanModuleVars)(e.getSourceFile()),r=l(e),o=n.variableScopeMap[e.text];if(!o)return;const i=r.find((e=>o.has(e)));return i?o.get(i):void 0},t.getImportsOfModule=g,t.escapeFileName=f,t.computeNewLocalName=p;const h=e=>{const t={...e};return delete t["*"],delete t.default,{default:e.default,"*":e["*"],named:t}};t.createEnsureImportTypescript=function(e,n){return(r,o,i)=>{const a=(0,t.scanModuleImports)(r);if(a.toLocal[o]&&a.toLocal[o][i])return a.toLocal[o][i];if(e[o]&&e[o][i])return e[o][i];const s=p(o,i,(0,t.scanModuleVars)(r).variableScopeMap,n);return n.add(s),e[o]=e[o]||{},e[o][i]=s,s}};const m=e=>e.importClause&&(!e.importClause.namedBindings||r.default.isNamedImports(e.importClause.namedBindings));t.addImports=function(e,n){var i,a,s;if(0===Object.keys(n).length)return[];const d=(0,t.scanModuleImports)(e),l=[],c=Object.keys(n).filter((e=>d.toDeclaration[e]&&d.toDeclaration[e].find(m))).map((e=>{const t=d.toDeclaration[e].find(m);return{filePath:e,pos:t.getStart(),decl:t}})).sort(((e,t)=>t.pos-e.pos));for(const{filePath:e,decl:t}of c){const r=h(n[e]),d=Object.keys(r.named);if(d.length){const e=d.map((e=>r.named[e]!==e?` ${e} as ${r.named[e]}`:" "+e)).join();if(null===(i=t.importClause)||void 0===i?void 0:i.namedBindings){const n=t.importClause.namedBindings,r=n.elements[n.elements.length-1].getEnd();l.push((0,o.stringPartialChangeByValues)("",","+e,r,r))}else{const n=(null===(a=t.importClause)||void 0===a?void 0:a.name)?t.importClause.name.getEnd():t.getChildAt(0).getEnd();l.push((0,o.stringPartialChangeByValues)("",`${(null===(s=t.importClause)||void 0===s?void 0:s.name)?",":""} {${e} }`,n,n))}if(t.importClause.isTypeOnly){const e=t.importClause.getChildAt(0);l.push((0,o.stringPartialChangeByValues)("type ","",e.getStart(),e.getEnd()+1))}}if(r.default){const e=t.getChildAt(0).getEnd();l.push((0,o.stringPartialChangeByValues)(""," "+r.default+",",e,e))}}let u;for(const t of e.statements)r.default.isImportDeclaration(t)&&(u=t);const g=u?u.getEnd():0;for(const e of Object.keys(n)){const t=h(n[e]);let r="";if(!d.toDeclaration[e]){const n=Object.keys(t.named);r+="\nimport",t.default&&(r+=" "+t.default),n.length&&(r+=t.default?", {":" {",r+=n.map((e=>t.named[e]===e?" "+e:` ${e} as ${t.named[e]}`)).join(),r+=" }"),r+=` from '${e}';`}t["*"]&&(r+=`\nimport * as ${t["*"]} from '${e}';`),r.length&&l.unshift((0,o.stringPartialChangeByValues)("",r,g,g))}return l}},7122:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.basePlugins=void 0;const r=n(35018),o=n(35770),i=n(53235),a=n(1249),s=n(42169),d=n(79378),l=n(7387),c=n(1491),u=n(17853),g=n(6679),f=n(55286),p=n(19316);t.basePlugins=[r.sourceFileConvertor,o.variableDeclarationConvertor,i.numberConvertor,i.booleanConvertor,i.nullConvertor,i.undefinedConvertor,s.arrayConvertor,a.objectConvertor,a.namedPropertyConvertor,p.functionConvertor,d.jsxConvertor,d.jsxTextConvertor,d.jsxExpressionConvertor,l.trinaryConvertor,c.referenceConvertor,u.propertyAccessConvertor,u.propertyAccessIndexConvertor,i.stringConvertor,g.templateStringConvertor,d.jsxPropConvertor,d.jsxSpreadPropConvertor,f.callConvertor]},53516:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeService=void 0;const r=n(60814);t.CodeService=class{constructor(e,t){this.idService=e,this.fileManager=t}getCode(e,t){const n=this.idService.getLanguage(e);if(!n)return"";const r=this.idService.getFileAPI(e).getNodeByID(t);return r?n.getFullText(r):""}setCode(e,t,n){if(!this.idService.getLanguage(e))return;const o=this.idService.getFileAPI(e).getNodeByID(t),i=this.fileManager.get(e),a=(0,r.stringPartialChange)(n,o.pos,o.end,i);a&&i.applyChange(a)}}},88206:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.genericUnParsedConvertor=void 0;const r=n(36136),o=n(23987);t.genericUnParsedConvertor=e=>({kind:"UnparsedNode",isApplicable:()=>!0,convert:(t,n)=>(0,o.createUnparsedNode)({astNodeId:n.getNodeId(t),code:e.getText(t)}),modifications:{},defaultConfig:{},generate:e=>[(0,r.startNode)(e.astNodeId),e.code,(0,r.endNode)(e.astNodeId)],language:e.language})},66877:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findComponents=void 0;const r=n(46726);function o(e){return(0,r.isSimpleFileReferenceNode)(e)&&(e.targetFile.startsWith(".")||e.targetFile.startsWith("/"))}t.findComponents=function(e,t){if(!e)return[];if((0,r.isSimpleFileReferenceNode)(e))return[e];const n=[];return(0,r.walkProjectedNodes)(e,t,(e=>((0,r.isJSXElementNode)(e)&&(0,r.isSimpleFileReferenceNode)(e.type)&&n.push(e.type),!0))),n.filter(o)}},13218:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(5163).__exportStar(n(61515),t)},61515:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatDiagnostics=t.tsPlugin=void 0;const r=n(5163).__importStar(n(60270)),o=n(91570),i=n(60814),a=n(96689),s=n(35018),d=n(48475),l=n(73027),c=n(32393),u=n(45219);t.tsPlugin=(e,n,g)=>{const f=(e,t)=>r.default.createSourceFile(null!=t?t:"",e,r.default.ScriptTarget.ESNext,!0),p=new WeakMap,h=(e,t)=>{var n;if(t&&p.has(t)){const r=null===(n=p.get(t))||void 0===n?void 0:n.get(e);if(r)return t.text.slice(r.start,r.end)}return e.getText()};return{getChildren:a.getEachChild,getKind:e=>e.kind,getPosition:(e,t)=>{var n;if(t&&p.has(t)){const r=null===(n=p.get(t))||void 0===n?void 0:n.get(e);if(r)return r}return{start:e.getStart(),end:e.getEnd()}},getAST:t=>{const n=e(t);return f(n,t)},getASTFromContents:f,isApplicable:e=>(0,o.isTypeScriptFile)(e)||(0,o.isJavaScriptFile)(e),getText:h,createEmptyRoot:()=>r.default.factory.createSourceFile([],r.default.factory.createToken(r.default.SyntaxKind.EndOfFileToken),0),getName:(e,t)=>(0,r.isVariableStatement)(e)?e.declarationList.declarations.map((e=>h(e.name,t))).join(","):(0,d.isNamedDeclaration)(e)&&e.name?h(e.name,t):void 0,getFullText:(e,t)=>{var n;if(t&&p.has(t)){const r=null===(n=p.get(t))||void 0===n?void 0:n.get(e);if(r)return t.text.slice(r.fullStart,r.fullEnd)}return e.getFullText()},updateAst(e,t,n,r){const o=new Map;return p.set(t,o),(0,c.visitAst)(this.getChildren,t,(e=>{o.set(e,{fullStart:e.getFullStart(),start:e.getStart(),end:e.end,fullEnd:e.end})})),t.update(n,r)},language:"typescript",getFormattingChanges(e){const t=g?r.default.toEditorSettings(g):r.default.getDefaultFormatCodeSettings(),n=r.default.formatting.formatDocument(e,r.default.formatting.getFormatContext(t)),o=[];let a=e.getFullText();for(const e of(0,u.getAppliedChanges)(n)){const{start:t,length:n}=e.span,r=a.substr(t,n),s=(0,i.stringPartialChangeByValues)(r,e.newText,t,t+n);s&&(o.push(s),a=i.stringManipulator.reducer(a,s).value)}return o},defaultRootConvertor:s.sourceFileConvertor,getSyntacticDiagnostics(e){return n?[...n.getLanguageController(e,this).languageService.getSyntacticDiagnostics(e)].map(t.formatDiagnostics):[]},getSemanticDiagnostics(e){return n?[...n.getLanguageController(e,this).languageService.getSemanticDiagnostics(e)].map(t.formatDiagnostics):[]},getJSDocs:e=>(0,l.getJsDocInfo)(e),getExports(e){if(!n)return{};const t=n.getLanguageController(e,this).languageService.getProgram(),o=null==t?void 0:t.getTypeChecker(),i=null==t?void 0:t.getSourceFile(e);if(!i||!o)return{};const s=o.getSymbolAtLocation(i);return(o.getExportsOfModule(s)||[]).reduce(((e,t)=>{const n=(0,a.getMainSymbolDeclaration)(t);if(n){const i=t.getFlags()&r.default.SymbolFlags.Alias?o.getAliasedSymbol(t).getName():t.getName();e[t.getName()]={node:n,symbolName:i}}return e}),{})},addImports:d.addImports,createEnsureImport:d.createEnsureImportTypescript}},t.formatDiagnostics=e=>({category:e.category,code:e.code,length:e.length||0,start:e.start||0,messageText:"string"==typeof e.messageText?e.messageText:e.messageText.messageText})},70089:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IDService=void 0;const r=n(32393);t.IDService=class{constructor(e,t){this.getFileContent=e,this.langs=t,this.listeners={},this.errors={},this.openFiles={}}getLanguage(e){return[...this.langs].find((t=>t.isApplicable(e)))}getLangOrThrow(e){const t=this.getLanguage(e);if(!t)throw new Error("could not find language plugin for "+e);return t}getFileAPI(e){const t=this.getLangOrThrow(e),n=()=>{try{return this.errors[e]=null,t.getAST(e)}catch(n){return this.errors[e]=n,t.createEmptyRoot(e)}},o=()=>{const t=this.getFileContent(e);if(this.openFiles[e].fileContent===t)return;this.openFiles[e].fileContent=t;const r=n();this.errors[e]||(this.openFiles[e].idService.remarkWithRef(r,this.openFiles[e].file),this.openFiles[e].file=r)};this.openFiles[e]?o():(this.openFiles[e]={file:n(),fileContent:this.getFileContent(e),idService:(0,r.createIdentificationService)(t)},this.openFiles[e].idService.markAst(this.openFiles[e].file));const i=(e,n,r,o)=>{const a=t.getPosition(e);if(a.start>n||a.end<r)return null;if(a.start===n&&a.end===r&&t.getKind(e)===o)return e;const s=t.getChildren(e);for(const e of s){const t=i(e,n,r,o);if(t)return t}},a={filePath:e,getNodeByID:t=>{if(!this.errors[e])return this.openFiles[e].idService.idsToNodes.get(t)},getNodeID:t=>this.errors[e]?"":this.openFiles[e].idService.nodesToIds.get(t),getSourceFile:()=>(o(),this.errors[e]?t.createEmptyRoot(e):this.openFiles[e].file),getUnderlyingIDService:()=>{if(this.errors[e]){const n=this.openFiles[e].idService.clone();return n.markAst(t.createEmptyRoot(e)),n}return this.openFiles[e].idService},getNodeIdByPos:(t,n,r)=>{if(o(),this.errors[e])return;const a=this.openFiles[e].file,s=i(a,t,n,r);return s?this.openFiles[e].idService.nodesToIds.get(s):void 0},getParsingErrors:()=>this.errors[e],getExports:()=>{const t=this.getLanguage(e);return(null==t?void 0:t.getExports)?t.getExports(e):{}},getName:t=>{const n=this.getLanguage(e);return null==n?void 0:n.getName(t)}};return this.listeners[e]=this.listeners[e]||new Set,this.listeners[e].add(a),a}isFileOpen(e){return!!this.openFiles[e]}setOpenFile(e,t,n){this.openFiles[e]={idService:t,file:n,fileContent:this.getFileContent(e)}}releaseAPI(e){this.listeners[e.filePath].delete(e),0===this.listeners[e.filePath].size&&(delete this.listeners[e.filePath],delete this.openFiles[e.filePath])}}},45856:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5163);r.__exportStar(n(79606),t),r.__exportStar(n(7122),t),r.__exportStar(n(53516),t),r.__exportStar(n(70089),t),r.__exportStar(n(13218),t),r.__exportStar(n(32393),t),r.__exportStar(n(19316),t),r.__exportStar(n(29231),t),r.__exportStar(n(96589),t),r.__exportStar(n(59541),t),r.__exportStar(n(79063),t),r.__exportStar(n(52855),t),r.__exportStar(n(78237),t),r.__exportStar(n(4075),t),r.__exportStar(n(66877),t)},73027:(e,t)=>{"use strict";function n(e){return void 0===e||"string"==typeof e?e:e.map((e=>e.text)).join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.getJsDocInfo=void 0,t.getJsDocInfo=function(e){const t=e.jsDoc;if(t&&t.length){const e=t[0],r={};if(e.comment&&(r.description=n(e.comment)),e.tags&&e.tags.length){r.tags=[];for(const t of e.tags)if(t.tagName){const e=t.tagName.escapedText;let o,i=n(t.comment)||"";if("param"===e){const e=i.trim().replace(/\s.*/,""),t=i.trim().replace(/^[^\s]*\s*/,"");o=e,i=t}const a={tagName:e,text:i,param:o};r.tags.push(a)}}return r}}},40977:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.moveNode=void 0;const r=n(79606),o=n(22161);t.moveNode=function(e,t,{newParentId:n,node:i,...a}){const s=t.getNodeByID(n);if(!s)throw new Error(`couldn't find new parent with id: ${n}`);const d=t.getNodeByID(i.astNodeId);if(!d)throw new Error(`couldn't find child with id: ${i.astNodeId} to move`);const l=(0,o.getModification)(t,d.parent,"removeChild"),c={childId:i.astNodeId,placeholderId:a.placeholderId},u=l(d.parent,t,c),g=(0,o.getModification)(t,s,"addChild")(s,t,{newChild:i,...a}),f=(0,r.mergeChanges)(u,g);return[...u,...f]}},32393:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findInIdMap=t.createIdentificationService=t.visitAstAndBreak=t.visitAst=void 0;const r=n(15089);function o(e,t,n){n(t);for(const r of e(t))o(e,r,n)}t.visitAst=o,t.visitAstAndBreak=function e(t,n,r){if(r(n))for(const o of t(n))e(t,o,r)};const i=({referenceData:e,data:t},n)=>{const r={matched:[],unmatched:{data:[],referenceData:[]}},o=[...e];for(let e=0;e<t.length;e++){const i=t[e],a=o.findIndex(((t,r)=>n(i,t,e,r)));if(-1!==a){const[e]=o.splice(a,1);r.matched.push({data:i,ref:e})}else r.unmatched.data.push(i)}return r.unmatched.referenceData=o,r};function a({getKind:e,getPosition:t},n,r){if(!r)return;const{end:o,start:i}=t(n),a=Object.entries(r).find((([t,r])=>r.start===i&&r.end===o&&(!r.nodeKind||r.nodeKind===e(n))));return a?a[0]:void 0}t.createIdentificationService=function e(t,n="p",s=0,d=new Map,l=new Map){const{nextId:c,currentCount:u}=(0,r.createPrefixCounter)(n,s),{getChildren:g}=t;function f(e,n){const r=new Set;return o(g,e,(e=>{const o=n&&a(t,e,n);if(o){const t=l.get(e);t&&t!==o&&d.delete(t)}m(e,o),r.add(e)})),r}function p(e,n,r,s,u=new Map,v){const N=l.get(n)||c();d.set(N,e),l.delete(n),l.set(e,N);const I=[...g(n)],S=g(e);for(const e of s||[]){const t=d.get(e),n=I.indexOf(t);-1!==n&&(h(I[n]),u.set(t,e),I.splice(n,1))}const x=i({referenceData:I,data:S},((e,t)=>e===t)),C=[...x.unmatched.referenceData],y=[],_=({data:e,ref:t})=>{p(e,t,r,s,u,v)};for(const e of x.unmatched.data){const n=r&&a(t,e,r);if(n){const i=d.get(n);if(i&&x.unmatched.referenceData.includes(i)){_({data:e,ref:i});const t=C.indexOf(i);C.splice(t,1)}else o(g,e,(e=>m(e,a(t,e,r))))}else y.push(e)}const w=i({data:y,referenceData:C},((e,n)=>{const r=I.filter((e=>t.getKind(e)===t.getKind(n))).findIndex((e=>e===n));return S.filter((n=>t.getKind(n)===t.getKind(e))).findIndex((t=>t===e))===r&&t.getKind(e)===t.getKind(n)&&t.getText(e)===t.getText(n,v)})),E=i(w.unmatched,((e,n)=>t.getKind(e)===t.getKind(n)&&t.getText(e)===t.getText(n,v))),T=i(E.unmatched,((e,n)=>t.getKind(e)===t.getKind(n)&&!!t.getName(e)&&t.getName(e)===t.getName(n,v))),A=i(T.unmatched,((e,n)=>t.getKind(e)===t.getKind(n)));w.matched.forEach(_),E.matched.forEach(_),T.matched.forEach(_),A.matched.forEach(_);for(const e of A.unmatched.referenceData)h(e,u);for(const e of A.unmatched.data)f(e,r);return u}function h(e,t){o(g,e,(e=>function(e,t){const n=l.get(e);n&&(l.delete(e),d.delete(n),t&&t.set(e,n))}(e,t)))}function m(e,t){const n=t||l.get(e)||c(),r=d.get(n);r&&r!==e&&l.delete(r),d.set(n,e),l.set(e,n)}return{markAst:function(e){o(g,e,m)},remarkAst:function(e,t){const n=new Map(l.entries()),r=f(e,t);for(const[e,t]of n)r.has(e)?n.delete(e):(d.delete(t),l.delete(e));return n},nextId:c,nodesToIds:l,idsToNodes:d,remarkWithRef:function(e,t,n,r,o=new Map){return p(e,t,n,r,o,t)},clone:function(){return e(t,n,u(),new Map(d.entries()),new Map(l.entries()))}}},t.findInIdMap=a},42169:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayConvertor=void 0;const r=n(5163).__importDefault(n(60270)),o=n(68029),i=n(36136),a=n(81315),s=n(59750),d=n(46726);function l(e){return e.getChildren()[1].getChildren()}function c(e,t){const n=e.elements.indexOf(t);if(n<0)throw new Error("node not found in array");return n}t.arrayConvertor={kind:"array",language:"typescript",isApplicable:e=>r.default.isArrayLiteralExpression(e),convert(e,t){const n=t.getJsDoc(e),r=e.elements.map((e=>t.convertLeaf(e))),i=(0,o.createArrayNode)({astNodeId:t.getNodeId(e),elements:r});return n&&(i.jsdoc=n),i},modifications:{removeChild:(e,n,{childId:r})=>t.arrayConvertor.modifications.removeElement(e,n,{elementId:r}),removeElement(e,t,{elementId:n}){const r=t.getNodeByID(n);if(!r)throw new Error("node does not exist");c(e,r);const o=l(e),a=(0,s.findCommaAfterNode)(o,r);if(a){const e=r.getFullStart(),t=a.getEnd();return[(0,i.ASTChange)(e,t,[],[n])]}{const e=r.getFullStart(),t=r.getEnd();return[(0,i.ASTChange)(e,t,[],[n])]}},insertAtBeginning(e,t,{value:n}){const r=e.elements[0];if(r){const e=r.getFullStart(),o=(0,s.getLeadingSpaces)(r);return[(0,i.ASTChange)(e,e,[o,...t.generate(n),","])]}{const r=e.getStart()+1;return[(0,i.ASTChange)(r,r,t.generate(n))]}},insertAtEnd(e,t,{value:n}){const r=e.elements[e.elements.length-1];if(r){const o=l(e),a=(0,s.findCommaAfterNode)(o,r);let d=r.getEnd(),c=(0,s.getLeadingSpaces)(r);return a?d=a.getEnd():c=","+c,[(0,i.ASTChange)(d,d,[c,...t.generate(n)])]}{const r=e.getStart()+1,o=" ";return[(0,i.ASTChange)(r,r,[o,...t.generate(n)])]}},addChild(e,n,r){if((0,d.isAddInsteadModArgs)(r))return t.arrayConvertor.modifications.setElement(e,n,{elementId:r.insteadOfChildId,value:r.node});if((0,d.isAddBeforeModArgs)(r))return r.beforeChildId?t.arrayConvertor.modifications.insertBefore(e,n,{targetId:r.beforeChildId,value:r.node}):t.arrayConvertor.modifications.insertAtEnd(e,n,{value:r.node});throw new Error("ArrayNode only supports add of kind add-instead or add-before")},insertBefore(e,t,{targetId:n,value:r}){const o=t.getNodeByID(n);if(!o)throw new Error("node does not exist");c(e,o);const a=o.getFullStart(),s=o.getFullText().slice(0,o.getLeadingTriviaWidth()).replace(/./g," ");return[(0,i.ASTChange)(a,a,[s,...t.generate(r),","])]},insertAfter(e,t,{targetId:n,value:r}){const o=t.getNodeByID(n);if(!o)throw new Error("node does not exist");c(e,o);const a=l(e),d=(0,s.findCommaAfterNode)(a,o);let u=o.getEnd(),g=(0,s.getLeadingSpaces)(o);return d?u=d.getEnd():g=","+g,[(0,i.ASTChange)(u,u,[g,...t.generate(r),","])]},setElement(e,t,{elementId:n,value:r}){const o=t.getNodeByID(n);if(!o)throw new Error("node does not exist");c(e,o);const a=o.getStart(),s=o.getEnd();return[(0,i.ASTChange)(a,s,t.generate(r),[n])]},moveBefore(e,t,{elementId:n,targetId:r}){if(n===r)return[];const o=t.getNodeByID(n),d=t.getNodeByID(r);if(!o)throw new Error("node does not exist");if(!d)throw new Error("node does not exist");if(c(e,o)+1===c(e,d))return[];const u=(0,a.printWithIds)(o,t.getNodeID),g=(0,i.ASTChange)(o.getFullStart(),o.getEnd(),[],[n]),f=l(e),p=(0,s.findCommaAfterNode)(f,o);if(p){const e=p.getFullText();u.push(e),g.to+=e.length}else u.push(",");const h=d.getFullStart(),m=[(0,i.ASTChange)(h,h,u)],v=[g],N=(0,s.mergeChanges)(v,m);return[...v,...N]},moveAfter(e,t,{elementId:n,targetId:r}){if(n===r)return[];const o=t.getNodeByID(n),d=t.getNodeByID(r);if(!o)throw new Error("element not found");if(!d)throw new Error("target not found");if(c(e,o)-1===c(e,d))return[];const u=(0,a.printWithIds)(o,t.getNodeID),g=(0,i.ASTChange)(o.getFullStart(),o.getEnd(),[],[n]),f=l(e),p=(0,s.findCommaAfterNode)(f,o);if(p){const e=p.getFullText();u.push(e),g.to+=e.length}else u.push(",");let h=d.getEnd();const m=(0,s.findCommaAfterNode)(f,d);m?h=m.getEnd():u.unshift(",");const v=[(0,i.ASTChange)(h,h,u)],N=[g],I=(0,s.mergeChanges)(N,v);return[...N,...I]}},defaultConfig:{},generate:(e,t)=>[(0,i.startNode)(e.astNodeId),"[",...e.elements.flatMap(((n,r)=>r<e.elements.length-1?t.generate(n).concat(","):t.generate(n))),"]",(0,i.endNode)(e.astNodeId)]}},2927:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(5163).__exportStar(n(42169),t)},55286:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getArgumentsWithCommas=t.callConvertor=void 0;const r=n(5163).__importDefault(n(60270)),o=n(42143),i=n(59750),a=n(36136),s=n(79606);function d(e){return e.getChildren()[2].getChildren()}function l(e,t){const n=e.arguments.indexOf(t);if(n<0)throw new Error("node not found in call arguments");return n}t.callConvertor={kind:"call",language:"typescript",isApplicable:e=>r.default.isCallExpression(e)||r.default.isNewExpression(e),convert(e,t){var n;const i=t.convertLeaf(e.expression),a=null===(n=e.arguments)||void 0===n?void 0:n.map((e=>t.convertLeaf(e)));return(0,o.createCallNode)({astNodeId:t.getNodeId(e),method:i,hasNewKeyword:r.default.isNewExpression(e),args:a})},modifications:{replaceMethod(e,t,{method:n}){const r=t.generate(n);return[{from:e.expression.getStart(),to:e.expression.getEnd(),newContent:r,removedIds:[t.getNodeID(e.expression)]}]},addArg(e,n,{arg:r,beforeArg:o}){const a=n.generate(r);if(o){const r=e.arguments.find((e=>n.getNodeID(e)===o));if(!r)throw new Error("arg not found");const s=(0,i.getLeadingSpaces)(r);if(r===e.arguments[0])return[{from:r.getFullStart(),to:r.getFullStart(),newContent:[s,...a," ,"]}];{const n=(0,i.findCommaBeforeNode)((0,t.getArgumentsWithCommas)(e),r);if(!n)throw new Error("arg comma not found");return[{from:n.getFullStart(),to:n.getFullStart(),newContent:[" ,",s,...a]}]}}return[{from:e.getEnd()-1,to:e.getEnd()-1,newContent:[e.arguments.length&&!e.arguments.hasTrailingComma?", ":" ",...a," "]}]},replaceArg(e,t,{arg:n,oldChildId:r}){const o=e.arguments.find((e=>t.getNodeID(e)===r));if(!o)throw new Error("arg not found");const i=t.generate(n);return[{from:o.getStart(),to:o.getEnd(),newContent:i}]},removeArg(e,n,{argId:r}){const o=e.arguments.find((e=>n.getNodeID(e)===r));if(!o)throw new Error("arg not found");const a=(0,i.findCommaAfterNode)((0,t.getArgumentsWithCommas)(e),o),s=(0,i.findCommaBeforeNode)((0,t.getArgumentsWithCommas)(e),o);return s&&!a?[{from:s.getFullStart(),to:o.getEnd(),newContent:[],removedIds:[r]}]:[{from:o.getFullStart(),to:a?a.getEnd():o.getEnd(),newContent:[],removedIds:[r]}]},moveArgBefore(e,t,{argId:n,targetId:r}){if(n===r)return[];const o=t.getNodeByID(n),c=t.getNodeByID(r);if(!o)throw new Error("node does not exist");if(!c)throw new Error("node does not exist");if(l(e,o)+1===l(e,c))return[];const u=(0,s.printWithIds)(o,t.getNodeID),g=(0,a.ASTChange)(o.getFullStart(),o.getEnd(),[],[n]),f=d(e),p=(0,i.findCommaAfterNode)(f,o);if(p){const e=p.getFullText();u.push(e),g.to+=e.length}else u.push(",");const h=c.getFullStart(),m=[(0,a.ASTChange)(h,h,u)],v=[g],N=(0,i.mergeChanges)(v,m);return[...v,...N]},moveArgAfter(e,t,{argId:n,targetId:r}){if(n===r)return[];const o=t.getNodeByID(n),c=t.getNodeByID(r);if(!o)throw new Error("element not found");if(!c)throw new Error("target not found");if(l(e,o)-1===l(e,c))return[];const u=(0,s.printWithIds)(o,t.getNodeID),g=(0,a.ASTChange)(o.getFullStart(),o.getEnd(),[],[n]),f=d(e),p=(0,i.findCommaAfterNode)(f,o);if(p){const e=p.getFullText();u.push(e),g.to+=e.length}else u.push(",");let h=c.getEnd();const m=(0,i.findCommaAfterNode)(f,c);m?h=m.getEnd():u.unshift(",");const v=[(0,a.ASTChange)(h,h,u)],N=[g],I=(0,i.mergeChanges)(N,v);return[...N,...I]},removeArgsInRange(e,n,{from:r,to:o}){const a=e.arguments.slice(r,null!=o?o:e.arguments.length),s=(0,i.findCommaBeforeNode)((0,t.getArgumentsWithCommas)(e),a[0]),d=(0,i.findCommaAfterNode)((0,t.getArgumentsWithCommas)(e),a[a.length-1]);return[{from:s?o&&o<e.arguments.length?s.getEnd():s.getFullStart():a[0].getFullStart(),to:d?d.getEnd():a[a.length-1].getEnd(),newContent:[],removedIds:a.map((e=>{var t;return null!==(t=n.getNodeID(e))&&void 0!==t?t:""}))}]}},generate:(e,t)=>[(0,a.startNode)(e.astNodeId),...t.generate(e.method),"(",...e.args.flatMap(((e,n)=>n>0?[","].concat(t.generate(e)):t.generate(e))),")",(0,a.endNode)(e.astNodeId)],defaultConfig:{}},t.getArgumentsWithCommas=e=>{const t=[...e.getChildren()];t.reverse();const n=t.find((e=>e.kind===r.default.SyntaxKind.SyntaxList));return n?n.getChildren():[]}},31716:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(5163).__exportStar(n(55286),t)},58555:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.functionConvertor=void 0;const r=n(5163),o=n(56533),i=r.__importDefault(n(60270));t.functionConvertor={kind:"function",language:"typescript",isApplicable:e=>i.default.isFunctionLike(e),convert(e,t){var n;const r=e.name?i.default.isComputedPropertyName(e.name)?t.convertLeaf(e.name):e.name.text:"";if(e.kind===i.default.SyntaxKind.FunctionDeclaration||e.kind===i.default.SyntaxKind.FunctionExpression||e.kind===i.default.SyntaxKind.ArrowFunction||e.kind===i.default.SyntaxKind.MethodDeclaration){if(!e.body)return t.unparsedConvertor.convert(e,t);if(!i.default.isBlock(e.body))return t.unparsedConvertor.convert(e,t);const a=t.getJsDoc(e),s=null!==(n=e.body.statements.map((e=>t.convert(e))).flat())&&void 0!==n?n:[],d=e.parameters.map((e=>t.convertLeaf(e))),l=(0,o.createFunctionNode)({astNodeId:t.getNodeId(e),name:r,body:s,args:d});return a&&(l.jsdoc=a),l}return e.kind,i.default.SyntaxKind.MethodSignature,t.unparsedConvertor.convert(e,t)},modifications:{},defaultConfig:{}}},22784:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(5163).__exportStar(n(58555),t)},19316:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5163);r.__exportStar(n(2927),t),r.__exportStar(n(31716),t),r.__exportStar(n(22784),t),r.__exportStar(n(15115),t),r.__exportStar(n(45668),t),r.__exportStar(n(61274),t),r.__exportStar(n(99661),t),r.__exportStar(n(47995),t),r.__exportStar(n(8994),t),r.__exportStar(n(8554),t),r.__exportStar(n(94165),t),r.__exportStar(n(7387),t)},79378:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jsxSpreadPropConvertor=t.jsxTextConvertor=t.jsxExpressionConvertor=t.jsxPropConvertor=t.jsxConvertor=t.isJsxNode=void 0;const r=n(5163).__importStar(n(60270)),o=n(46726),i=n(10766),a=n(36136),s=n(87185),d=n(79606),l=n(34580),c=n(40977);function u(e){return r.default.isJsxElement(e)||r.default.isJsxFragment(e)||r.default.isJsxSelfClosingElement(e)}t.isJsxNode=u;const g=(e,t,n)=>{const r=e.getNodeByID(t);if(!r)throw new Error(n+" node not found using id "+t);return r},f=(e,t,n)=>!0===n?[t]:[t,"=",...p(e,n)];function p(e,t){return"string"==typeof t?['"'+(0,d.escapeDblQuote)(t)+'"']:(0,o.isJSXExpressionNode)(t)?e.generate(t):["{",...e.generate(t),"}"]}function h(e,t,n){if(r.default.isJsxSelfClosingElement(e)||n.idx<0||n.idx>=e.children.length)return[];const o=t.getNodeID(e.children[n.idx]),s=o?[o]:[],d=e.children[n.idx];let l=r.default.isJsxText(d)?d.getFullStart():d.getStart(),c=d.getEnd(),u=!1,g=" ";if(n.idx>0){const o=e.children[n.idx-1];r.default.isJsxText(o)&&(0!==o.getText().trim().length?(g=(0,i.getSummarizedEndSpace)(o.getText()),u=!0):(s.push(t.getNodeID(o)),l=o.getFullStart()));const d=t.getNodeID(o);if(n.idx<e.children.length-1){const i=e.children[n.idx+1];if(r.default.isJsxText(i))if(n.idx==e.children.length-2&&0===i.getText().trim().length)c=i.getEnd(),s.push(t.getNodeID(i));else if(u)return s.push(t.getNodeID(i)),[{from:o.getStart(),to:i.getEnd(),newContent:[(0,a.startNode)(d),o.getText().trimEnd(),g,i.getText(),(0,a.endNode)(d)],removedIds:s}]}}return[{from:l,to:c,newContent:[],removedIds:s}]}function m(e,t){const n=t.getNodeByID(e.astNodeId),r=n&&(0,d.printWithIds)(n,t.getNodeID);return r?function(e,t){const n=e.findIndex((e=>(0,a.isStartNode)(e)&&e.id===t)),r=function(e,t){for(let n=e.length-1;n>=0;n--)if(t(e[n]))return n;return e.length}(e,a.isEndNode);return n<0||r>=e.length?[]:e.slice(n,r+1)}(r,e.astNodeId):t.generate(e)}t.jsxConvertor={kind:"jsx-element",language:"typescript",isApplicable:u,convert:(e,t)=>(e.getSourceFile().referencedFiles,{kind:"jsx-element",astNodeId:t.getNodeId(e),type:t.convertLeaf((0,l.getJSXTagName)(e)),children:(0,l.getJSXChildren)(e).map((e=>t.convertLeaf(e))),props:(0,l.getJSXProps)(e).map((e=>t.convertLeaf(e)))}),modifications:{removeChild(e,t,{childId:n}){if(r.default.isJsxSelfClosingElement(e))return[];const o=g(t,n,"node to remove"),i=e.children.indexOf(o);return h(e,t,{idx:i})},removeChildWithIndex:h,addChild(e,t,n){if(!(0,s.isAddBeforeModArgs)(n)&&!(0,s.isAddAfterModArgs)(n)||void 0===n.spaceBeforeId||void 0===n.spaceAfterId)throw new Error("jsx only supports add-before, add-after with spaceBeforeId & spaceAfterId");const{newChild:o,spaceAfterId:i,spaceBeforeId:l}=n,c=(0,s.isAddBeforeModArgs)(n)?n.beforeChildId:function(e,t,n){if(r.default.isJsxSelfClosingElement(e))return;if(void 0===t)return n.getNodeID(e.children[0]);const o=e.children.findIndex((e=>n.getNodeID(e)===t));if(o<0||o==e.children.length-1)return;const i=o+1;return n.getNodeID(e.children[i])}(e,n.afterChildId,t);return((e,t,{beforeChildId:n,spaceBeforeId:o,spaceAfterId:i,newChild:s,isAddingText:l})=>{let c,u,f=-1;if(n){const r=g(t,n,"child to insert before");if(!r)return[];u=r,c=e.children[e.children.indexOf(r)-1],f=r.getFullStart()}else{if(r.default.isJsxSelfClosingElement(e)){const n=(0,d.printWithIds)(e,t.getNodeID);n.find((n=>"string"!=typeof n&&"start"===n.kind&&n.id===t.getNodeID(e))).nodeKind=r.default.SyntaxKind.JsxElement;const c=n.length-[...n].reverse().findIndex((e=>"string"==typeof e&&e.includes("/")))-1;return n.splice(c,1,n[c].replace(/ \/|\//,""),"\n",(0,a.startNode)(o),(0,a.endNode)(o),...s,l?"":"\n",(0,a.startNode)(i),(0,a.endNode)(i),"</",e.tagName.getText(),">"),[{from:e.getFullStart(),to:e.getEnd(),newContent:n}]}e.children.length?(f=e.children[e.children.length-1].getEnd(),c=e.children[e.children.length-1]):r.default.isJsxElement(e)?f=e.openingElement.getEnd():r.default.isJsxFragment(e)&&(f=e.openingFragment.getEnd())}const p=[];if(l){if(c&&r.default.isJsxText(c)){const e=[...s],t=e.findIndex((e=>"string"!=typeof e));return e.splice(t+1,0,c.getText()),[{from:c.getStart(),to:f,newContent:e}]}if(u&&r.default.isJsxText(u)){const e=[...s],t=[...s];t.reverse();const n=t.length-1-t.findIndex((e=>"string"!=typeof e)),r=u.getEnd();return e.splice(n,0,u.text),[{from:f,to:r,newContent:e}]}}return l||c&&r.default.isJsxText(c)||p.push("\n",(0,a.startNode)(o),(0,a.endNode)(o)),p.push(...s),l||u&&r.default.isJsxText(u)||p.push("\n",(0,a.startNode)(i),(0,a.endNode)(i)),[{from:f,to:f,newContent:p}]})(e,t,{beforeChildId:c,isAddingText:(0,s.isNodeOfKind)("jsx-text-element",o),spaceAfterId:i,spaceBeforeId:l,newChild:m(o,t)})},moveChild:c.moveNode,replaceChild(e,t,{childId:n,target:o}){const i=[n],a=g(t,n,"node to remove");return(0,r.isJsxSelfClosingElement)(e)||-1===e.children.indexOf(a)?[]:[{from:a.getStart(),to:a.getEnd(),newContent:t.generate(o),removedIds:i}]},addProp(e,t,{prop:n}){if(r.default.isJsxFragment(e))throw new Error("cant add prop to a fragment");const o=r.default.isJsxElement(e)?e.openingElement:e,i=o.attributes.properties[o.attributes.properties.length-1],d=i?i.getEnd():o.getEnd()-(r.default.isJsxSelfClosingElement(e)?2:1),l=i?i.getFullText().slice(0,i.getLeadingTriviaWidth()):" ";if((0,s.isNodeOfKind)("jsx-prop",n)){const o=f(t,n.name,n.value);if(r.default.isJsxFragment(e))throw new Error("cant add prop to a fragment");return[{from:d,to:d,newContent:[l,(0,a.startNode)(n.astNodeId,r.default.SyntaxKind.JsxAttribute),...o,(0,a.endNode)(n.astNodeId)]}]}return[{from:d,to:d,newContent:[l,...t.generate(n)]}]},removeProp(e,t,{propId:n}){const r=g(t,n,"edited prop");return[{from:r.getFullStart(),to:r.getEnd(),newContent:[],removedIds:[n]}]},setProperty(e,t,{propId:n,value:o}){const i=g(t,n,"edited prop"),s=f(t,i.name.text,o);return[{from:i.getStart(),to:i.getEnd(),newContent:[" ",(0,a.startNode)(n,r.default.SyntaxKind.JsxAttribute),...s,(0,a.endNode)(n)],removedIds:[]}]},setPropertyLike(e,t,{propLike:n}){const r=g(t,n.astNodeId,"edited prop");return[{from:r.getStart(),to:r.getEnd(),newContent:[" ",...t.generate(n)],removedIds:[]}]}},generate(e,t){const n=!e.children.length,i=e.props.reduce(((e,n)=>(e.push(" "),(0,s.isNodeOfKind)("jsx-prop",n)?(e.push((0,a.startNode)(n.astNodeId,r.default.SyntaxKind.JsxAttribute)),"string"==typeof n.value?e.push(n.name+'="'+n.value+'"'):!0===n.value?e.push(n.name):(e.push(n.name+"="),e.push("{ ",...t.generate(n.value)," }")),e.push((0,a.endNode)(n.astNodeId)),e):(e.push(...t.generate(n)),e))),[]);if(n)return[(0,a.startNode)(e.astNodeId),"<",...t.generate(e.type),...i," />",(0,a.endNode)(e.astNodeId)];const d=e.children.reduce(((e,n)=>(e.push(...t.generate(n)),e)),[]),l=(0,o.isUnparsedNode)(e.type)&&"<>"===e.type.code;return[(0,a.startNode)(e.astNodeId),"<",...l?[]:t.generate(e.type),...i,">",...d,"</",...l?[]:t.generate(e.type).filter((e=>"string"==typeof e)),">",(0,a.endNode)(e.astNodeId)]},defaultConfig:{}},t.jsxPropConvertor={kind:"jsx-prop",isApplicable:r.default.isJsxAttribute,language:"typescript",defaultConfig:{},modifications:{setValue(e,t,{value:n}){const r=f(t,e.name.getText(),n);return[{from:e.getStart(),to:e.getEnd(),newContent:r}]},addChild(e,n,r){if(!(0,s.isAddInsteadModArgs)(r))throw new Error("props only support add instead");return t.jsxPropConvertor.modifications.setValue(e,n,{value:r.newChild})},removeChild(e,t,{childId:n,placeholderId:r}){if(!e.initializer)return[];if(!r)throw new Error("no new id for null to replace prop value");return[{from:e.initializer.getStart(),to:e.initializer.getEnd(),removedIds:[n],newContent:p(t,(0,o.createNullNode)({astNodeId:r}))}]}},convert(e,t){const n=e.name.text,o=e.initializer,i=t.getNodeId(e);return o?r.default.isStringLiteral(o)?{kind:"jsx-prop",astNodeId:i,name:n,value:o.text}:{kind:"jsx-prop",astNodeId:i,name:n,value:o.expression?t.convertLeaf(o.expression):void 0}:{kind:"jsx-prop",astNodeId:i,name:n,value:!0}}},t.jsxExpressionConvertor={kind:"jsx-expression",language:"typescript",isApplicable:e=>r.default.isJsxExpression(e),convert(e,t){const n={kind:"jsx-expression",astNodeId:t.getNodeId(e),code:e.getText()};return e.expression&&(n.expression=t.convertLeaf(e.expression)),n},modifications:{setExpression(e,t,{expression:n}){const r=t.generate(n);return e.expression?[{from:e.expression.getStart(),to:e.expression.getEnd(),newContent:r}]:[]},removeChild:(e,t,{childId:n,placeholderId:r})=>e.expression&&r?[{from:e.expression.getStart(),to:e.expression.getEnd(),removedIds:[n],newContent:t.generate((0,o.createNullNode)({astNodeId:r}))}]:[],addChild(e,t,n){if(!(0,s.isAddInsteadModArgs)(n))throw new Error("jsx-expression only supports add-instead");return[{from:e.getStart(),to:e.getEnd(),removedIds:[n.insteadOfChildId],newContent:["{",...t.generate(n.newChild),"}"]}]}},generate:(e,t)=>[(0,a.startNode)(e.astNodeId),"{",...e.expression?t.generate(e.expression):[],"}",(0,a.endNode)(e.astNodeId)],defaultConfig:{}},t.jsxTextConvertor={kind:"jsx-text-element",language:"typescript",isApplicable:e=>r.default.isJsxText(e),convert:(e,t)=>({kind:"jsx-text-element",astNodeId:t.getNodeId(e),value:(0,o.trimJsxText)(e.getFullText())}),modifications:{setValue(e,t,n){const r=t.getNodeID(e),o=n.value.trimStart()!==n.value;return[{from:e.getFullStart(),to:e.getEnd(),newContent:r?o?[n.value[0],(0,a.startNode)(r),n.value.slice(1),(0,a.endNode)(r)]:[(0,a.startNode)(r),n.value,(0,a.endNode)(r)]:[n.value]}]}},generate(e){const t=e.value.trimStart();return[e.value.slice(0,e.value.length-t.length),(0,a.startNode)(e.astNodeId),t,(0,a.endNode)(e.astNodeId)]},defaultConfig:{}},t.jsxSpreadPropConvertor={kind:"jsx-spread-prop",language:"typescript",isApplicable:e=>r.default.isJsxSpreadAttribute(e),convert:(e,t)=>(0,o.createJSXSpreadPropertyNode)({astNodeId:t.getNodeId(e),value:t.convertLeaf(e.expression)}),modifications:{},generate:(e,t)=>[(0,a.startNode)(e.astNodeId),"{ ...",...t.generate(e.value)," }",(0,a.endNode)(e.astNodeId)],defaultConfig:{}}},15115:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5163);r.__exportStar(n(79378),t),r.__exportStar(n(34580),t)},34580:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getJSXProps=t.getJSXChildren=t.getJSXTagName=void 0;const r=n(5163).__importDefault(n(60270));t.getJSXTagName=function(e){return r.default.isJsxElement(e)?e.openingElement.tagName:r.default.isJsxSelfClosingElement(e)?e.tagName:e.openingFragment},t.getJSXChildren=function(e){return r.default.isJsxElement(e)?e.children:r.default.isJsxSelfClosingElement(e)?r.default.createNodeArray():r.default.isJsxFragment(e)?e.children:r.default.createNodeArray()},t.getJSXProps=function(e){let t;return t=r.default.isJsxElement(e)?e.openingElement.attributes.properties:r.default.isJsxSelfClosingElement(e)?e.attributes.properties:r.default.createNodeArray(),t}},1249:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.namedPropertyConvertor=t.getTrailingCommaNode=t.convertPropertyName=t.objectConvertor=void 0;const r=n(5163).__importDefault(n(60270)),o=n(23987),i=n(4697),a=n(36136),s=n(58665),d=n(61285),l=n(87185);function c(e,t,n,r,o,i){if((0,l.isNodeOfKind)("string",r)){let d=r.value;return(0,s.isValidIdentifierName)(d)||(d=`'${(0,s.escapeSingleQuote)(d)}'`),[(0,a.ASTChange)(t,t,[n,(0,a.startNode)(i),(0,a.startNode)(r.astNodeId),`${d}`,(0,a.endNode)(r.astNodeId),": ",...e.generate(o),(0,a.endNode)(i)])]}return[(0,a.ASTChange)(t,t,[n,(0,a.startNode)(i),...e.generate(r),": ",...e.generate(o),(0,a.endNode)(i)])]}function u(e,t,n){const r=t.getNodeId(e),o=f(e.name,t),i=(0,d.createPropertyNode)({astNodeId:r,name:o,initializer:t.convertLeaf(e.initializer)});return n&&(i.jsdoc=n),i}function g(e,t){if((0,l.isNodeOfKind)("property",e)){const n=(0,l.isNodeOfKind)("string",e.name)?(0,s.isValidIdentifierName)(e.name.value)?[(0,a.startNode)(e.name.astNodeId),e.name.value,(0,a.endNode)(e.name.astNodeId)]:[(0,a.startNode)(e.name.astNodeId),`'${e.name.value}'`,(0,a.endNode)(e.name.astNodeId)]:t(e.name);return[(0,a.startNode)(e.astNodeId),...n,":",...t(e.initializer),(0,a.endNode)(e.astNodeId)]}throw"TODO"}function f(e,t){return r.default.isComputedPropertyName(e)?t.convertLeaf(e):(0,i.createStringNode)({astNodeId:t.getNodeId(e),value:e.text})}function p(e){if(e.properties.hasTrailingComma){const t=e.getChildren()[1].getChildren();return t[t.length-1]}}t.objectConvertor={kind:"object",language:"typescript",isApplicable:e=>r.default.isObjectLiteralExpression(e),convert(e,t){const n=t.getJsDoc(e),i=e.properties.map((e=>{const n=t.getJsDoc(e);if(r.default.isPropertyAssignment(e)||r.default.isShorthandPropertyAssignment(e)||r.default.isMethodDeclaration(e)||r.default.isGetAccessorDeclaration(e)||r.default.isSetAccessorDeclaration(e)){const i=t.getNodeId(e),a=f(e.name,t);if(r.default.isPropertyAssignment(e))return u(e,t,n);if(r.default.isShorthandPropertyAssignment(e)){const r=(0,d.createPropertyNode)({astNodeId:i,name:a,initializer:t.convertLeaf(e.name)});return n&&(r.jsdoc=n),r}if(r.default.isMethodDeclaration(e)||r.default.isGetAccessorDeclaration(e)||r.default.isSetAccessorDeclaration(e)){const r=(0,d.createPropertyNode)({astNodeId:i,name:a,initializer:t.convertLeaf(e)});return n&&(r.jsdoc=n),r}return(0,o.createUnparsedNode)({astNodeId:i,code:""})}return t.convertLeaf(e)})),a=(0,d.createObjectNode)({astNodeId:t.getNodeId(e),properties:i});return n&&(a.jsdoc=n),a},modifications:{addProperty(e,t,{name:n,value:r,propertyId:o}){const i=e.properties[e.properties.length-1];if(i){const a=p(e);let s=i.getEnd(),d=i.getFullText().slice(0,i.getLeadingTriviaWidth()).replace(/./g," ");return a?s=a.getEnd():d=","+d,c(t,s,d,n,r,o)}return c(t,e.getStart()+1,"\n",n,r,o)},removeProperty(e,t,{childId:n}){const o=[n],i=t.getNodeByID(n);if(!i||!r.default.isObjectLiteralElementLike(i))throw new Error("Cannot find prop to remove");if(-1===e.properties.indexOf(i))return[];const a=i.getFullStart();let s=i.getEnd();const d=e.getChildren()[1].getChildren(),l=d.findIndex((e=>e===i));let c=d[l+1];if(c&&","===c.getText()&&(c=d[l+2]),c||(c=e.getChildren()[2]),c){const e=c.getFullText().slice(0,c.getLeadingTriviaWidth());s=/\S/.test(e)?c.getFullStart():c.getStart()}return[{from:a,to:s,newContent:[],removedIds:o}]},setProperty(e,t,{childId:n,value:o}){const i=t.getNodeByID(n);if(!i||!e.properties.includes(i))throw new Error("node not found for rename");if(!r.default.isPropertyAssignment(i))throw new Error("node is not a propery assignment");return[(0,a.ASTChange)(i.initializer.getStart(),i.initializer.getEnd(),[...t.generate(o)])]},renameProperty(e,t,{childId:n,newName:o}){const i=t.getNodeByID(n);if(!i||!e.properties.includes(i))throw new Error("node not found for rename");if(!r.default.isPropertyAssignment(i))throw new Error("node is not a propery assignment");let d=o;(0,s.isValidIdentifierName)(o)||(d=`'${o}'`);const l=t.getNodeID(i.name);return[(0,a.ASTChange)(i.name.getStart(),i.name.getEnd(),[(0,a.startNode)(l),d,(0,a.endNode)(l)])]}},defaultConfig:{},generate:(e,t)=>[(0,a.startNode)(e.astNodeId),"{\n",...e.properties.flatMap(((n,r)=>r<e.properties.length-1?g(n,t.generate).concat(","):g(n,t.generate))),"}",(0,a.endNode)(e.astNodeId)]},t.convertPropertyName=f,t.getTrailingCommaNode=p,t.namedPropertyConvertor={language:"typescript",kind:"property",isApplicable:r.default.isPropertyAssignment,convert:u,modifications:{removeChild(e,t,{childId:n,placeholderId:r}){if(void 0===r)throw new Error("property needs a placeholderId to remove value, and replace it with null");return[{from:e.initializer.getStart(),to:e.initializer.getEnd(),removedIds:[n],newContent:t.generate((0,i.createNullNode)({astNodeId:r}))}]}},defaultConfig:{},generate:(e,t)=>g(e,t.generate)}},45668:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(5163).__exportStar(n(1249),t)},53235:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.undefinedConvertor=t.nullConvertor=t.booleanConvertor=t.numberConvertor=t.stringConvertor=void 0;const r=n(5163),o=n(36136),i=r.__importDefault(n(60270)),a=n(4697),s=n(58665);t.stringConvertor={language:"typescript",isApplicable:e=>i.default.isStringLiteral(e),convert:(e,t)=>(0,a.createStringNode)({astNodeId:t.getNodeId(e),value:e.text}),modifications:{setValue:(e,t,{value:n})=>(n=(e.getText().startsWith("'")?s.escapeSingleQuote:s.escapeDblQuote)(n),[(0,o.ASTChange)(e.getStart()+1,e.getEnd()-1,[n])])},generate(e,t,n){const r=n.useSingleQuotes?s.escapeSingleQuote:s.escapeDblQuote,i=n.useSingleQuotes?"'":'"';return[(0,o.startNode)(e.astNodeId),i+r(e.value)+i,(0,o.endNode)(e.astNodeId)]},kind:"string",defaultConfig:{useSingleQuotes:!0}},t.numberConvertor={language:"typescript",isApplicable:e=>!!i.default.isNumericLiteral(e)||!!i.default.isPrefixUnaryExpression(e)&&e.operator===i.default.SyntaxKind.MinusToken&&i.default.isNumericLiteral(e.operand),convert:(e,t)=>i.default.isNumericLiteral(e)?(0,a.createNumberNode)({astNodeId:t.getNodeId(e),value:parseFloat(e.text)}):(0,a.createNumberNode)({astNodeId:t.getNodeId(e),value:-1*parseFloat(e.operand.text)}),modifications:{setValue(e,t,{value:n}){const r=t.getNodeID(e);return[(0,o.ASTChange)(e.getStart(),e.getEnd(),[(0,o.startNode)(r),n.toString(),(0,o.endNode)(r)])]}},generate:e=>[(0,o.startNode)(e.astNodeId),e.value.toString(),(0,o.endNode)(e.astNodeId)],kind:"number",defaultConfig:{}},t.booleanConvertor={language:"typescript",isApplicable:e=>e.kind===i.default.SyntaxKind.TrueKeyword||e.kind===i.default.SyntaxKind.FalseKeyword,convert:(e,t)=>(0,a.createBooleanNode)({astNodeId:t.getNodeId(e),value:e.kind===i.default.SyntaxKind.TrueKeyword}),modifications:{setValue(e,t,{value:n}){const r=t.getNodeID(e);return[(0,o.ASTChange)(e.getStart(),e.getEnd(),[(0,o.startNode)(r),n.toString(),(0,o.endNode)(r)])]}},generate:e=>[(0,o.startNode)(e.astNodeId),e.value.toString(),(0,o.endNode)(e.astNodeId)],kind:"boolean",defaultConfig:{}},t.nullConvertor={language:"typescript",isApplicable:e=>e.kind===i.default.SyntaxKind.NullKeyword,convert:(e,t)=>({astNodeId:t.getNodeId(e),kind:"null"}),modifications:{},generate:e=>[(0,o.startNode)(e.astNodeId),"null",(0,o.endNode)(e.astNodeId)],kind:"null",defaultConfig:{}},t.undefinedConvertor={language:"typescript",isApplicable:e=>i.default.isIdentifier(e)&&"undefined"===e.text,convert:(e,t)=>({astNodeId:t.getNodeId(e),kind:"undefined"}),modifications:{},generate:e=>[(0,o.startNode)(e.astNodeId),"undefined",(0,o.endNode)(e.astNodeId)],kind:"undefined",defaultConfig:{}}},61274:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(5163).__exportStar(n(53235),t)},17853:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.propertyAccessIndexConvertor=t.propertyAccessConvertor=void 0;const r=n(5163).__importDefault(n(60270)),o=n(36136),i=n(51201),a=n(87185),s=n(58665);t.propertyAccessConvertor={language:"typescript",kind:"property-access",isApplicable:e=>r.default.isPropertyAccessExpression(e)||r.default.isElementAccessExpression(e),convert(e,t){const n=t.convertLeaf(e.expression),o=t.convertLeaf(r.default.isPropertyAccessExpression(e)?e.name:e.argumentExpression),s=(0,a.isNodeOfKind)("property-access",n)?[...n.accessPath,o]:[o];return(0,i.createPropertyAccessNode)({astNodeId:t.getNodeId(e),reference:(0,a.isNodeOfKind)("property-access",n)?n.reference:n,accessPath:s})},modifications:{setValue(e,t,{reference:n,accessPath:r}){const i=[];for(const e of r)i.push(...t.generate(e));const a=t.getNodeID(e);return a?[(0,o.ASTChange)(e.getStart(),e.getEnd(),[(0,o.startNode)(a),...t.generate(n),...i,(0,o.endNode)(a)])]:[]}},defaultConfig:{},generate(e,t){const n=[];for(const r of e.accessPath)n.push(...t.generate(r));return[(0,o.startNode)(e.astNodeId),...t.generate(e.reference),...n,(0,o.endNode)(e.astNodeId)]}},t.propertyAccessIndexConvertor={language:"typescript",kind:"property-access-index",isApplicable:e=>e.parent&&(r.default.isPropertyAccessExpression(e.parent)&&e.parent.name===e||r.default.isElementAccessExpression(e.parent)&&e.parent.argumentExpression===e&&!r.default.isIdentifier(e)),convert:(e,t)=>r.default.isIdentifier(e)||r.default.isStringLiteral(e)?{astNodeId:t.getNodeId(e),kind:"property-access-index",accessKey:e.text}:{astNodeId:t.getNodeId(e),kind:"property-access-index",accessKey:parseFloat(e.text)},modifications:{},defaultConfig:{},generate:(e,t)=>[(0,o.startNode)(e.astNodeId),"number"==typeof e.accessKey||e.accessKey===`${parseInt(e.accessKey)}`?`[${e.accessKey}]`:(0,s.isValidIdentifierName)(e.accessKey)?`.${e.accessKey}`:`['${e.accessKey}']`,(0,o.endNode)(e.astNodeId)]}},99661:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(5163).__exportStar(n(17853),t)},1491:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.referenceConvertor=t.getParentImportDeclaration=void 0;const r=n(5163).__importDefault(n(60270)),o=n(89038),i=n(36136),a=n(48475);function s(e){if(r.default.isImportDeclaration(e))return e;if(r.default.isSourceFile(e))throw new Error("Cannot find parent import declaration");return s(e.parent)}t.getParentImportDeclaration=s,t.referenceConvertor={language:"typescript",isApplicable:e=>{if(r.default.isIdentifier(e)){if(((0,a.isNamedDeclaration)(e.parent)||(0,a.isNamedAccess)(e.parent)||(0,a.isNamedAssignment)(e.parent))&&e.parent.name===e)return!1;if((r.default.isJsxSelfClosingElement(e.parent)||r.default.isJsxOpeningElement(e.parent))&&e.parent.tagName===e&&e.text[0]===e.text[0].toLowerCase())return!1;const t=(0,a.getReferenceTarget)(e);if(t)return!(0,a.isReferencableDeclaration)(t)||t.name!==e}return!1},convert(e,t){var n,i;const s=(0,a.getReferenceTarget)(e),d=s?t.getNodeId(s):void 0;if(s){if(r.default.isImportSpecifier(s)&&r.default.isStringLiteral(s.parent.parent.parent.moduleSpecifier))return(0,o.createFileReferenceNode)({astNodeId:t.getNodeId(e),targetExport:(s.propertyName||s.name).getText(),targetFile:s.parent.parent.parent.moduleSpecifier.text,targetId:d});if(r.default.isImportClause(s)&&r.default.isStringLiteral(s.parent.moduleSpecifier))return(0,o.createFileReferenceNode)({astNodeId:t.getNodeId(e),targetExport:"default",symbolName:null===(i=null===(n=s.parent.importClause)||void 0===n?void 0:n.name)||void 0===i?void 0:i.getText(),targetFile:s.parent.moduleSpecifier.text,targetId:d})}return(0,o.createReferenceNode)({astNodeId:t.getNodeId(e),name:e.text,targetId:d})},kind:"ref",modifications:{changeModuleSpecifier(e,t,{moduleSpecifier:n}){const r=(0,a.getReferenceTarget)(e);if(!r)throw new Error("Cannot resolve ref");const o=s(r);return[{from:o.moduleSpecifier.getStart()+1,to:o.moduleSpecifier.getEnd()-1,newContent:[n]}]}},generate(e,t){if("between-file"===e.refType){if(t.ensureImport)return[(0,i.startNode)(e.astNodeId),t.ensureImport(e.targetFile,e.targetExport),(0,i.endNode)(e.astNodeId)];throw new Error("Language Plugin does not support adding imports")}return[(0,i.startNode)(e.astNodeId),e.name,(0,i.endNode)(e.astNodeId)]},defaultConfig:{}}},47995:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(5163).__exportStar(n(1491),t)},35018:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sourceFileConvertor=void 0;const r=n(5163).__importDefault(n(60270)),o=n(36136);t.sourceFileConvertor={language:"typescript",isApplicable:e=>r.default.isSourceFile(e),convert:(e,t)=>({kind:"root",astNodeId:t.getNodeId(e),statements:e.statements.map((e=>t.convert(e))).flat()}),kind:"root",modifications:{addStatement(e,t,{newStatement:n,beforeStatementId:r}){let i=e.getEnd();if(r){const n=t.getNodeByID(r);if(!n)throw new Error("reference node not found");let o=n;for(;o.parent!==e;)o=o.parent;i=o.getStart()}return[(0,o.ASTChange)(i,i,t.generate(n))]},removeStatement(e,t,{}){throw new Error('modification "removeStatement" not supported in TS')}},defaultConfig:{}}},8994:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(5163).__exportStar(n(35018),t)},6679:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.templateStringConvertor=void 0;const r=n(5163).__importDefault(n(60270)),o=n(36136),i=n(3097);function a(e,t,n,a){if(r.default.isNoSubstitutionTemplateLiteral(e)){if((0,i.isTemplateText)(n)){const t=a?e.getEnd()-1:e.getStart()+1;return[(0,o.ASTChange)(t,t,[n.text],[])]}const r=t.getNodeID(e),s=[(0,o.startNode)(r),a?(0,o.startNode)(r+"_text"):"","`",a?e.text:"","${",a?(0,o.endNode)(r+"_text"):"",...t.generate(n),a?"":(0,o.startNode)(r+"_text"),"}",a?"":e.text,"`",a?"":(0,o.endNode)(r+"_text"),(0,o.endNode)(r)];return[(0,o.ASTChange)(e.getStart(),e.getEnd(),s,[])]}if(!a||a===e.head){if((0,i.isTemplateText)(n)){const r=t.getNodeID(e.head),i=a?e.head.text+n.text:n.text+e.head.text;return[(0,o.ASTChange)(e.head.getStart(),e.head.getEnd(),[(0,o.startNode)(n.astNodeId),"`",i,"${",(0,o.endNode)(n.astNodeId)],[r])]}if(a)return[(0,o.ASTChange)(e.head.getEnd(),e.head.getEnd(),[(0,o.startNode)(n.astNodeId+"_span"),...t.generate(n),"}${",(0,o.endNode)(n.astNodeId+"_span")],[])];{const r=t.getNodeID(e.head);return[(0,o.ASTChange)(e.getStart(),e.getStart()+3,[(0,o.startNode)(n.astNodeId+"_head"),"`${",(0,o.endNode)(n.astNodeId+"_head"),(0,o.startNode)(n.astNodeId+"_span"),...t.generate(n),"}${",(0,o.endNode)(n.astNodeId+"_span")],[r])]}}const s=a.parent;if((0,i.isTemplateText)(n)){const e=r.default.isTemplateMiddleOrTemplateTail(a)?a.text+n.text:n.text+s.literal.text;return[(0,o.ASTChange)(s.literal.getStart(),s.literal.getEnd(),[(0,o.startNode)(n.astNodeId),"}",e,r.default.isTemplateTail(s.literal)?"`":"${",(0,o.endNode)(n.astNodeId)],[])]}if(r.default.isTemplateMiddle(a))return[(0,o.ASTChange)(a.getEnd(),a.getEnd(),[(0,o.startNode)(n.astNodeId+"_span"),"}${",...t.generate(n),(0,o.endNode)(n.astNodeId+"_span")],[])];if(r.default.isTemplateTail(a)){const e=t.getNodeID(a);return[(0,o.ASTChange)(a.getStart(),a.getEnd(),[(0,o.startNode)(e),"}",a.text,"${",(0,o.endNode)(e),(0,o.startNode)(n.astNodeId+"_span"),...t.generate(n),"}`",(0,o.endNode)(n.astNodeId+"_span")],[])]}const d=t.getNodeID(s.literal);return[(0,o.ASTChange)(s.literal.getStart(),s.literal.getEnd(),["}${",...t.generate(n),(0,o.startNode)(d),"}",s.literal.text,r.default.isTemplateTail(s.literal)?"`":"${",(0,o.endNode)(d)],[])]}t.templateStringConvertor={language:"typescript",kind:"template-string",isApplicable:e=>r.default.isTemplateLiteral(e),convert(e,t){if(r.default.isNoSubstitutionTemplateLiteral(e))return(0,i.createTemplateNode)({astNodeId:t.getNodeId(e),elements:e.text?[(0,i.createTemplateText)({astNodeId:t.getNodeId(e)+"_text",text:e.text})]:[]});const n=[];e.head.text&&n.push((0,i.createTemplateText)({astNodeId:t.getNodeId(e.head),text:e.head.text}));for(const r of e.templateSpans)n.push(t.convertLeaf(r.expression)),r.literal.text&&n.push((0,i.createTemplateText)({astNodeId:t.getNodeId(r.literal),text:r.literal.text}));return(0,i.createTemplateNode)({astNodeId:t.getNodeId(e),elements:n})},modifications:{removeElement(e,t,{elementId:n}){const i=t.getNodeID(e);if(r.default.isNoSubstitutionTemplateLiteral(e)){if(n!==i+"_text")throw new Error("unknown nodeid "+i);return[(0,o.ASTChange)(e.getStart()+1,e.getEnd()-1,[],[n])]}const a=t.getNodeByID(n);if(!a)throw new Error("node does not exist");if(a===e.head)return[(0,o.ASTChange)(a.getStart()+1,a.getEnd(),[],[n])];const s=function(e,t){const n=e.templateSpans.findIndex((e=>e.literal===t||e.expression===t));if(n<0)throw new Error("node not found in template string");return n}(e,a),d=e.templateSpans[s],l=t.getNodeID(d);return a===d.literal?[(0,o.ASTChange)(a.getStart()+1,a.getEnd()-1,[],[n])]:1===e.templateSpans.length?[(0,o.ASTChange)(e.getStart(),e.getEnd(),[(0,o.startNode)(i),"`",e.head.text,d.literal.text,"`",(0,o.endNode)(i)],[n])]:[(0,o.ASTChange)(a.getFullStart()-2,a.getEnd()+1,[],[n,l])]},insertAtBeginning:(e,t,{value:n})=>a(e,t,n),insertAtEnd:(e,t,{value:n})=>r.default.isNoSubstitutionTemplateLiteral(e)?a(e,t,n,e):a(e,t,n,e.templateSpans[e.templateSpans.length-1].literal),insertBefore(e,t,{targetId:n,value:o}){if(r.default.isNoSubstitutionTemplateLiteral(e))return a(e,t,o);const i=t.getNodeByID(n);if(!i)throw new Error("node does not exist");if(i===e.head)return a(e,t,o);const s=i.parent;if(s.literal===i)return a(e,t,o,s.expression);const d=e.templateSpans.indexOf(s);return a(e,t,o,0===d?e.head:e.templateSpans[d-1].literal)},insertAfter(e,t,{targetId:n,value:r}){const o=t.getNodeByID(n);if(!o)throw new Error("node does not exist");return a(e,t,r,o)}},defaultConfig:{},generate(e,t,n){const r=e.elements[0];return 0===e.elements.length?[(0,o.startNode)(e.astNodeId),"``",(0,o.endNode)(e.astNodeId)]:1===e.elements.length&&(0,i.isTemplateText)(r)?[(0,o.startNode)(e.astNodeId),"`",r.text,"`",(0,o.endNode)(e.astNodeId)]:[(0,o.startNode)(e.astNodeId),...e.elements.reduce(((e,t)=>{const n=e[e.length-1];return n&&(0,i.isTemplateText)(n)&&(0,i.isTemplateText)(t)?n.text+=t.text:e.push(t),e}),[]).flatMap(((e,n,r)=>{const a=[];return(0,i.isTemplateText)(e)?(a.push((0,o.startNode)(e.astNodeId)),a.push(0===n?"`":"}"),a.push(e.text),a.push(n===r.length-1?"`":"${"),a.push((0,o.endNode)(e.astNodeId))):(0===n?a.push("`${"):(0,i.isTemplateText)(r[n-1])||a.push("}${"),a.push(...t.generate(e)),n===r.length-1&&a.push("}`")),a})),(0,o.endNode)(e.astNodeId)]}}},8554:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(5163).__exportStar(n(6679),t)},7387:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trinaryConvertor=void 0;const r=n(5163).__importDefault(n(60270)),o=n(36136),i=n(46726);function a(e,t,n,r){if(!e)return[];const o=(0,i.createNullNode)({astNodeId:n}),a=r.generate(o);return[{from:e.getStart(),to:e.getEnd(),newContent:a,removedIds:[t]}]}function s(e,t,n,r,o){return{kind:"trinary",astNodeId:e.getNodeId(t),condition:e.convertLeaf(n),whenTrue:e.convertLeaf(r),whenFalse:e.convertLeaf(o)}}function d(e,t,n,r,i){return function(e,t,n,r){return[(0,o.startNode)(e),...t,` ${n} `,...r,(0,o.endNode)(e)]}(e,i(t),n,i(r))}t.trinaryConvertor={kind:"trinary",language:"typescript",isApplicable:e=>{return r.default.isConditionalExpression(e)||(t=e,r.default.isBinaryExpression(t)&&(t.operatorToken.kind===r.default.SyntaxKind.BarBarToken||t.operatorToken.kind===r.default.SyntaxKind.AmpersandAmpersandToken||t.operatorToken.kind===r.default.SyntaxKind.QuestionQuestionToken));var t},convert(e,t){if(r.default.isBinaryExpression(e)&&(e.operatorToken.kind==r.default.SyntaxKind.BarBarToken||e.operatorToken.kind==r.default.SyntaxKind.QuestionQuestionToken))return s(t,e,e.left,e.left,e.right);if(r.default.isBinaryExpression(e)&&e.operatorToken.kind==r.default.SyntaxKind.AmpersandAmpersandToken)return s(t,e,e.left,e.right,e.left);if(r.default.isConditionalExpression(e))return s(t,e,e.condition,e.whenTrue,e.whenFalse);throw new Error(`Conditional Expression cannot convert node with kind: ${e.getFullText()}`)},modifications:{addChild(e,t,n){if(!(0,i.isAddInsteadModArgs)(n))throw new Error("trinary only supports add-instead");const r=t.getNodeByID(n.insteadOfChildId);if(!r)throw new Error(`can't find child with id: ${n.insteadOfChildId}`);const o=(0,i.isJSXExpressionNode)(n.newChild)?n.newChild.expression:n.newChild;if(!o)throw new Error("can't add empty node");return[{from:r.getFullStart(),to:r.getEnd(),newContent:t.generate(o),removedIds:[n.insteadOfChildId]}]},removeChild:(e,t,{childId:n,placeholderId:o})=>r.default.isBinaryExpression(e)?function(e,t,n,r){return a(function(e,t,n){return function(e,t,n){return e.getNodeID(t.left)===n}(n,e,t)?e.left:function(e,t,n){return e.getNodeID(t.right)===n}(n,e,t)?e.right:void 0}(e,n,t),n,r,t)}(e,t,n,o):function(e,t,n,r){const o=t.getNodeByID(n);if(o&&(function(e,t,n){return e.getNodeID(t.whenTrue)===n}(t,e,n)||function(e,t,n){return e.getNodeID(t.whenFalse)===n}(t,e,n)))return a(o,n,r,t);throw new Error(`childId: ${n} is not whenTrue, or whenFalse`)}(e,t,n,o)},generate:(e,t)=>e.condition.astNodeId===e.whenFalse.astNodeId?d(e.astNodeId,e.condition,"&&",e.whenTrue,t.generate):e.condition.astNodeId===e.whenTrue.astNodeId?d(e.astNodeId,e.condition,"||",e.whenFalse,t.generate):function(e,t){return[(0,o.startNode)(e.astNodeId),...t(e.condition)," ? ",...t(e.whenTrue)," : ",...t(e.whenFalse),(0,o.endNode)(e.astNodeId)]}(e,t.generate),defaultConfig:{}}},35770:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.variableDeclarationConvertor=void 0;const r=n(5163).__importDefault(n(60270)),o=n(36136);function i(e){const t=e.parent;return t.flags&r.default.NodeFlags.Const?"const":t.flags&r.default.NodeFlags.Let?"let":"var"}t.variableDeclarationConvertor={language:"typescript",isApplicable:e=>e.kind===r.default.SyntaxKind.VariableDeclaration,convert(e,t){e.kind;const n=i(e),o=t.getJsDoc(e),a={kind:"variable",varKind:n,astNodeId:t.getNodeId(e),name:e.name.kind===r.default.SyntaxKind.Identifier?e.name.text:t.convertLeaf(e.name),initializer:e.initializer?t.convertLeaf(e.initializer):void 0};return o&&(a.jsdoc=o),a},kind:"variable",modifications:{inlineRename:(e,t,{name:n})=>[(0,o.ASTChange)(e.name.getStart(),e.name.getEnd(),[n])],changeVarKind(e,t,{varKind:n}){const r=i(e).length,a=e.parent.getStart();return[(0,o.ASTChange)(a,a+r,[n])]}},generate(e,t){let n=[];e.initializer&&(n=[" = ",...t.generate(e.initializer)]);const r="string"==typeof e.name?[e.name]:t.generate(e.name);return["\n",e.varKind," ",(0,o.startNode)(e.astNodeId),...r,...n,(0,o.endNode)(e.astNodeId),";"]},defaultConfig:{}}},94165:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(5163).__exportStar(n(35770),t)},29231:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parenthesizedExpressionPassThrough=t.variableStatementPassThrough=t.expressionStatementPassThrough=void 0;const r=n(5163).__importDefault(n(60270));t.expressionStatementPassThrough={language:"typescript",isApplicable:e=>e.kind===r.default.SyntaxKind.ExpressionStatement,getChildren:e=>e.expression},t.variableStatementPassThrough={language:"typescript",isApplicable:e=>e.kind===r.default.SyntaxKind.VariableStatement,getChildren:e=>e.declarationList.declarations},t.parenthesizedExpressionPassThrough={language:"typescript",isApplicable:e=>r.default.isParenthesizedExpression(e),getChildren:e=>e.expression}},96589:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectionConvertor=void 0;const r=n(32393),o=n(88206);function i(e){if(Array.isArray(e)){if(1===e.length)return e[0];throw new Error("Expected one item or array with length of 1 but got array with length of "+e.length)}return e}t.ProjectionConvertor=class{constructor(e,t,n,i=(0,r.createIdentificationService)(t)){this.filePath=e,this.lang=t,this.sourceFile=n,this.idService=i,this.currentConvertor=this.lang.defaultRootConvertor,this.convertors=new Map,this.passThroughConvertors=new Map,this.idService.markAst(this.sourceFile),this.unparsedConvertor=(0,o.genericUnParsedConvertor)(t)}registerConvertor(e,t=this.lang.defaultRootConvertor){const n=this.convertors.get(t);n?n.push(e):this.convertors.set(t,[e])}registerPassThroughConvertor(e,t=this.lang.defaultRootConvertor){const n=this.passThroughConvertors.get(t);n?n.push(e):this.passThroughConvertors.set(t,[e])}getConvertors(e){return(this.convertors.get(this.lang.defaultRootConvertor)||[]).concat(this.convertors.get(e)||[])}getPassConvertors(e){return(this.passThroughConvertors.get(this.lang.defaultRootConvertor)||[]).concat(this.passThroughConvertors.get(e)||[])}convertFrom(e){const t=this.idService.idsToNodes.get(e);if(!t)throw new Error("Could not find node with astNodeId: "+e);return this.convertLeaf(t)}convertRoot(){return i(this.convert(this.sourceFile))}convert(e){const t=this.getConvertors(this.currentConvertor).find((t=>t.isApplicable(e,this)));if(t)return t.convert(e,this);{const t=this.getPassConvertors(this.currentConvertor).find((t=>t.isApplicable(e)));if(t){const n=t.getChildren(e,this);return Array.isArray(n)?n.map((e=>this.convert(e))).flat():this.convert(n)}return this.unparsedConvertor.convert(e,this)}}convertLeaf(e){return i(this.convert(e))}getNodeId(e){const t=this.idService.nodesToIds.get(e);if(!t)throw new Error(`Missing ast node id: ${e.kind}`);return t}getJsDoc(e){return this.lang.getJSDocs(e)}}},59541:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.editProjection=t.createIdMap=void 0;const r=n(60814),o=n(60109),i=n(91570),a=n(88206),s=n(79606);function d(e,t=0,n={}){for(const r of e)if("string"==typeof r)t+=r.length;else if("start"===r.kind){if(n[r.id])throw new Error("2 positions determind for same node");n[r.id]={start:t,nodeKind:r.nodeKind}}else{if(!n[r.id])throw new Error("node end declared without start");n[r.id].end=t}return n}function l(e,t,n,r,o,i,a){const s={},d=new Set,l=null==a?void 0:a(s,d),c=l&&((e,n)=>l(t,e,n)),u=t=>{const r=n.find((e=>e.kind===t.kind));if(!r||!r.generate)throw new Error("node does not support generation "+t.kind);return r.generate(t,{generate:u,ensureImport:c,getFilePath:()=>e},o[t.kind]||r.defaultConfig)};return{api:{convertors:n,generate:u,getNodeByID:e=>r.idsToNodes.get(e),getNodeID:e=>r.nodesToIds.get(e),getFilePath:()=>e,getConfig(e){var t,r;const i=n.find((t=>t.kind===e));return null!==(r=null!==(t=o[e])&&void 0!==t?t:null==i?void 0:i.defaultConfig)&&void 0!==r?r:{}},lang:i},addedToFile:s}}t.createIdMap=d,t.editProjection=function(e,t,n,c,u,g,f,p,h=!1,m,v){let N=n.getFullText(c);const I=[],S=(0,a.genericUnParsedConvertor)(n);let x={};for(const a of f){const C=g.getASTInfo(t).idToNode.get(a.targetId),y=u.idsToNodes.get(a.targetId);if(!y)throw new Error("simple ast recompute back, node not found");if(!C)throw new Error("simple ast recompute back, simpleASTNode not found");const _=p.find((e=>e.kind===C.kind));if(!_)throw new Error("simple ast recompute back, convertor not found");const w=_.modifications[a.modification],E=[...p,S],{api:T,addedToFile:A}=l(e,c,E,u,m,n,n.createEnsureImport);let P;try{P=w(y,T,a.modificationArgs)}catch(e){P=[]}let b=N;const D=P.map((e=>{const t=e.newContent.filter((e=>"string"==typeof e)).join(""),n=(0,r.stringPartialChangeByValues)(b.slice(e.from,e.to),t,e.from,e.to);return n&&(b=r.stringManipulator.reducer(N,n).value),n})),F=[],M=n.addImports?n.addImports(c,A):[];for(const e of M)F.push(...r.stringManipulator.merger(N,F,[e]).changesToApply);const j=r.stringManipulator.squasher(F)[0];let k;if(j){const e=(0,r.parseChangeMetadata)(j,"");k=e.replacements,D.push(j)}x={};const L=new Set,O=e=>{let t=0;if(!k)return 0;for(const n of k){if(n.from>e)break;t+=n.newLength-n.length}return t};for(const[e,t]of P.entries()){const n=(0,s.mergeWithPreviousChanges)(P.slice(e+1),t),r=n.from+O(n.from);if(d(t.newContent,r,x),t.removedIds)for(const e of t.removedIds)L.add(e)}const B=r.stringManipulator.squasher(D.filter(i.notNullish));if(I.push(...B),h||a!==f[f.length-1]){const i=(0,o.calcChangeRange)(N,B);for(const e of B)N=r.stringManipulator.reducer(N,e).value;const s=c;c=n.updateAst(e,c,N,{span:{start:i.start,length:i.length},newLength:i.newLength}),u.remarkWithRef(c,s,x,[...L]),t=v(t,a)}}const C=n.getFormattingChanges?n.getFormattingChanges(c):[];return I.push(...C),{fileChanges:I,updatedSourceFile:c,idService:u,idMapping:x}}},79063:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupDiagnostics=void 0;const r=n(93849),o=n(60814),i=n(91570),a=n(32393);t.setupDiagnostics=(e,t,n,s,d)=>{const l=e=>{try{const r=s.getLanguage(e.filePath);if(!r)throw new Error("unknown language");const o=t.get(e).getLatest(),i=n.getASTInfo(o),d=new Set(i.idToNode.keys()),l=s.getFileAPI(e.filePath),c=r.getSyntacticDiagnostics?r.getSyntacticDiagnostics(e.filePath):[],u=r.getSemanticDiagnostics?r.getSemanticDiagnostics(e.filePath):[],g=[...c,...u],f=new Map;(0,a.visitAst)(r.getChildren,l.getSourceFile(),(e=>{const t=l.getNodeID(e);if(d.has(t)){const n=g.filter((t=>{const n=t.start||0,o=n+(t.length||0),{end:i,start:a}=r.getPosition(e);return n>=a&&o<=i}));for(const e of n)f.set(e,t)}}));const p=[...f.entries()].reduce(((e,[t,n])=>(e[n]=e[n]||[],e[n].push(t),e)),{});return p}catch(e){return{}}},c=d(l),u=new i.Debouncer((()=>{const e=c.getOpenResources();for(const t of e){const e=(0,o.deserializeId)(t);if(c.isOpen(e)){const t=c.get(e),n=l(e);JSON.stringify(t.getLatest())!==JSON.stringify(n)&&t.applyChange((0,o.fullChange)(n))}}}),300,1e3);return e.watchService.addGlobalListener((()=>{u.trigger().catch(r.reportError)})),c}},52855:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleAstHandler=void 0;const r=n(5163),o=n(60814),i=r.__importDefault(n(78435)),a=n(96589),s=n(59541);t.SimpleAstHandler=class{constructor(e,t,n,r,o,i){this.idService=e,this.fileManager=t,this.convertors=n,this.passConvertorMap=r,this.simpleASTPluginRepo=o,this.projectedNodeManipulator=i,this.openIdServices={},this.openProjections={}}compute({filePath:e,astNodeId:t,parsers:n},r){var o;const i=this.idService.getLanguage(e);if(!i)throw Error(`Unknown language for file path: ${e}`);const s=r.getSerializedId();if(this.openIdServices[e]||(this.openIdServices[e]=this.idService.getFileAPI(e)),this.openProjections[s])this.openProjections[s].sourceFile=this.openIdServices[e].getSourceFile();else{const t=new a.ProjectionConvertor(e,i,this.openIdServices[e].getSourceFile(),this.openIdServices[e].getUnderlyingIDService());for(const e of(null===(o=this.convertors.get(i.language))||void 0===o?void 0:o.values())||[])n.includes(e.kind)&&t.registerConvertor(e);for(const e of this.passConvertorMap.get(i.language)||[])t.registerPassThroughConvertor(e);this.openProjections[s]=t}let d;const l=this.fileManager.get(e),c=new Set([l]);if(!l.isValid())return{status:{valid:!1,message:l.getInvalidationMessage()},value:d,dependencies:c};if(t){const n=this.openIdServices[e].getNodeByID(t);d=this.openProjections[s].convertLeaf(n)}else d=this.openProjections[s].convertRoot();return{status:{valid:!0},value:d,dependencies:c}}recompute(e,t,n,r){const a=e.getSerializedId(),{filePath:s,astNodeId:d}=e.getId(),l=this.idService.getLanguage(s),c=this.fileManager.get(s);if(!l||!c.isValid())return{status:{valid:!1,message:c.getInvalidationMessage()},changes:[],dependencies:r};const u=this.openIdServices[s].getSourceFile();if(this.openIdServices[s].getParsingErrors()||l.getSyntacticDiagnostics&&l.getSyntacticDiagnostics(s).length)return{status:{valid:!1},changes:[],dependencies:r};this.openProjections[a].sourceFile=u;const g=[],f=e.getLatest();let p;if(d){const e=this.openIdServices[s].getNodeByID(d);p=e?this.openProjections[a].convertLeaf(e):f}else p=this.openProjections[a].convertRoot();if(!(0,i.default)(f,p)){const e=[];for(const r of n){const n=t[r.getType()][r.getSerializedId()],o=r.getChangesFromVersion(n);e.push(...o)}e.length&&g.push((0,o.fullChange)(p))}return{status:{valid:!0},changes:g,dependencies:r}}recomputeBack(e,t,n){const r=t.getId().filePath,o=this.idService.getLanguage(r);if(!o)throw new Error("unknown language");const i=t.getSerializedId(),a=t.getChangesFromVersion(n),d=this.fileManager.get(r),l=this.openIdServices[r],{fileChanges:c,updatedSourceFile:u}=(0,s.editProjection)(r,t.getProjection(n),o,l.getSourceFile(),l.getUnderlyingIDService(),this.simpleASTPluginRepo,a,this.convertors.get(o.language)||[],!0,{},((e,t)=>this.projectedNodeManipulator.reducer(e,t).value));return this.idService.setOpenFile(r,l.getUnderlyingIDService(),u),this.openProjections[i].sourceFile=u,{[this.fileManager.getTypeName()]:{[d.getSerializedId()]:c}}}}},78237:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceIdsHandler=void 0;const r=n(60814);t.SourceIdsHandler=class{constructor(e,t){this.idService=e,this.fileManager=t,this.openIds={},this.computeIds=e=>{const t=this.idService.getLanguage(e);if(!t)throw new Error("source id handler, language not found");this.openIds[e]?this.openIds[e].getSourceFile():this.openIds[e]=this.idService.getFileAPI(e);const n=this.openIds[e].getUnderlyingIDService(),r={};return n.idsToNodes.forEach(((e,n)=>{r[n]={...t.getPosition(e),kind:t.getKind(e)}})),r}}compute(e){return{value:this.computeIds(e),dependencies:new Set([this.fileManager.get(e)]),status:{valid:!0}}}recompute(e){const t=this.computeIds(e.getId()),n=[];return JSON.stringify(t)!==JSON.stringify(e.getLatest())&&n.push((0,r.fullChange)(t)),{changes:n,dependencies:new Set([this.fileManager.get(e.getId())]),status:{valid:!0}}}}},4075:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},98658:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5163);r.__exportStar(n(13672),t),r.__exportStar(n(13672),t),r.__exportStar(n(52182),t),r.__exportStar(n(91968),t),r.__exportStar(n(70975),t),r.__exportStar(n(95390),t)},60109:(e,t,n)=>{e.exports=n(98658)}}]);