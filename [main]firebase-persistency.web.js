/*! For license information please see [main]firebase-persistency.web.js.LICENSE.txt */
(self.webpackChunk_wixc3_component_playground=self.webpackChunk_wixc3_component_playground||[]).push([[5585],{49459:(e,t,i)=>{"use strict";i.r(t),i.d(t,{classes:()=>r,cssStates:()=>c,keyframes:()=>s,namespace:()=>n,st:()=>d,stVars:()=>o,style:()=>u,vars:()=>a});const n="o126",r={root:"s853",cloneButton:"s854",newButton:"s855"},s={},o={},a={},c=i.stc.bind(null,n),u=i.sts.bind(null,n),d=u},14480:(e,t,i)=>{"use strict";i.r(t),i.d(t,{classes:()=>r,cssStates:()=>c,keyframes:()=>s,namespace:()=>n,st:()=>d,stVars:()=>o,style:()=>u,vars:()=>a});const n="o151",r={root:"s919"},s={},o={},a={},c=i.stc.bind(null,n),u=i.sts.bind(null,n),d=u},72321:(e,t,i)=>{e.exports=globalThis.performance||i(44378)},44378:e=>{const t=new Map,i=Date.now(),n=`__init__${Math.random().toString(16).slice(2)}`,r={duration:0,entryType:"mark",name:n,startTime:i,toJSON:()=>({name:n,initialStartTime:i})},s=new Map;function o({defaultMark:e,markName:t}){const{startTime:i}=t&&s.get(t)?s.get(t).slice(-1)[0]:e;return i}function a(){return{name:this.name,startTime:this.startTime,duration:this.duration,entryType:this.type}}e.exports={mark:e=>{const t=s.get(e),i={duration:0,entryType:"mark",name:e,startTime:Date.now()-r.startTime,toJSON:a};t?t.push(i):s.set(e,[i])},measure:(e,i,n)=>{const s={startTime:Date.now()},c=o({markName:i,defaultMark:r}),u=o({markName:n,defaultMark:s}),d=t.get(e),l={duration:u-c,startTime:c,entryType:"measure",name:e,toJSON:a};d?d.push(l):t.set(e,[l])},getEntriesByType:e=>{switch(e){case"mark":return[].concat(...s.values());case"measure":return[].concat(...t.values());default:return[]}},clearMarks:e=>{e?s.delete(e):s.clear()},clearMeasures:e=>{e?t.delete(e):t.clear()}}},35532:(e,t,i)=>{"use strict";i.r(t),i.d(t,{FirebaseError:()=>n.FirebaseError,SDK_VERSION:()=>n.SDK_VERSION,_DEFAULT_ENTRY_NAME:()=>n._DEFAULT_ENTRY_NAME,_addComponent:()=>n._addComponent,_addOrOverwriteComponent:()=>n._addOrOverwriteComponent,_apps:()=>n._apps,_clearComponents:()=>n._clearComponents,_components:()=>n._components,_getProvider:()=>n._getProvider,_registerComponent:()=>n._registerComponent,_removeServiceInstance:()=>n._removeServiceInstance,deleteApp:()=>n.deleteApp,getApp:()=>n.getApp,getApps:()=>n.getApps,initializeApp:()=>n.initializeApp,onLog:()=>n.onLog,registerVersion:()=>n.registerVersion,setLogLevel:()=>n.setLogLevel});var n=i(85500);(0,n.registerVersion)("firebase","9.6.8","app")},64049:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(93849),r=i(5689);t.default=new n.Feature({id:"shortcuts",dependencies:[],api:{shortcutService:n.Service.withType().defineEntity(r.mainEnv),actionService:n.Service.withType().defineEntity(r.mainEnv)}})},24577:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(64049);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},20329:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.universalCtrl=t.MOUSE=t.KEYBOARD=void 0;const n=i(91570);t.KEYBOARD={UNIDENTIFIED:"Unidentified",ESCAPE:"Escape",MINUS:"Minus",DASH:"Minus",EQUALS:"Equal",BACK_SPACE:"Backspace",TAB:"Tab",ENTER:"Enter",RETURN:"Enter",SHIFT:"Shift",CONTROL:"Control",ALT:"Alt",PAUSE:"Pause",CAPS_LOCK:"CapsLock",SPACE:"Space",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",END:"End",HOME:"Home",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",PRINTSCREEN:"PrintScreen",INSERT:"Insert",DELETE:"Delete",0:"Digit0",1:"Digit1",2:"Digit2",3:"Digit3",4:"Digit4",5:"Digit5",6:"Digit6",7:"Digit7",8:"Digit8",9:"Digit9",A:"KeyA",B:"KeyB",C:"KeyC",D:"KeyD",E:"KeyE",F:"KeyF",G:"KeyG",H:"KeyH",I:"KeyI",J:"KeyJ",K:"KeyK",L:"KeyL",M:"KeyM",N:"KeyN",O:"KeyO",P:"KeyP",Q:"KeyQ",R:"KeyR",S:"KeyS",T:"KeyT",U:"KeyU",V:"KeyV",W:"KeyW",X:"KeyX",Y:"KeyY",Z:"KeyZ",META:"Meta",OS_LEFT:"OSLeft",CONTEXT_MENU:"ContextMenu",NUMPAD0:"Numpad0",NUMPAD1:"Numpad1",NUMPAD2:"Numpad2",NUMPAD3:"Numpad3",NUMPAD4:"Numpad4",NUMPAD5:"Numpad5",NUMPAD6:"Numpad6",NUMPAD7:"Numpad7",NUMPAD8:"Numpad8",NUMPAD9:"Numpad9",NUMPAD_MULTIPLY:"NumpadMultiply",NUMPAD_ADD:"NumpadAdd",NUMPAD_SUBTRACT:"NumpadSubtract",NUMPAD_DECIMAL:"NumpadDecimal",NUMPAD_DIVIDE:"NumpadDivide",NUMPAD_ENTER:"NumpadEnter",F1:"F1",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",F10:"F10",F11:"F11",F12:"F12",F13:"F13",F14:"F14",F15:"F15",F16:"F16",F17:"F17",F18:"F18",F19:"F19",F20:"F20",F21:"F21",F22:"F22",F23:"F23",F24:"F24",NUM_LOCK:"NumLock",SCROLL_LOCK:"ScrollLock",SEMICOLON:"Semicolon",COMMA:"Comma",PERIOD:"Period",SLASH:"Slash",BACK_QUOTE:"Backquote",OPEN_BRACKET:"BracketLeft",BACK_SLASH:"Backslash",CLOSE_BRACKET:"BracketRight",QUOTE:"Quote",UNIVERSAL_CONTROL:n.isMac?"Meta":"Control"},t.MOUSE={WHEEL_VERTICAL:"wheelVertical",WHEEL_HORIZONTAL:"wheelHorizontal"},t.universalCtrl=n.isMac?t.KEYBOARD.META:t.KEYBOARD.CONTROL},1529:(e,t,i)=>{e.exports=i(24577)},33248:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(93849);t.default=new n.Feature({id:"analytics",dependencies:[],api:{analyticsConfig:new n.Config({}),analyticsService:n.Service.withType().defineEntity(n.Universal),analyticsSlot:n.Slot.withType().defineEntity(n.Universal),indentifySlot:n.Slot.withType().defineEntity(n.Universal),registerSlot:n.Slot.withType().defineEntity(n.Universal)}}).setup(n.Universal,(({analyticsSlot:e,indentifySlot:t,registerSlot:i})=>({analyticsService:{register:e=>{for(const t of i)try{t(e)}catch(e){}},identify:e=>{for(const i of t)try{i(e)}catch(e){}},track:(t,i)=>{for(const n of e)try{n(t,i)}catch(e){}}}})))},92279:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(33248);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(r).default}})},60456:(e,t,i)=>{e.exports=i(92279)},94703:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(5163),r=i(93849),s=i(5689),o=n.__importDefault(i(93208)),a=i(9011);t.default=new r.Feature({id:"firebasePersistency",dependencies:[o.default.asEntity],api:{firebasePersistencyServiceOptions:new r.Config({rootCollectionId:"projects",testingMode:!1}),firebaseConfig:new r.Config(a.firebaseConfig),firebasePersistencyService:r.Service.withType().defineEntity(s.mainEnv),firebaseAuthService:r.Service.withType().defineEntity(s.mainEnv),firebaseCloneHandlers:r.Slot.withType().defineEntity(s.mainEnv)}})},85225:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(5163),r=n.__importDefault(i(87363)),s=i(5689),o=n.__importDefault(i(94703)),a=i(35532),c=i(61008),u=i(75102),d=i(88967),l=i(85470),f=i(71831),p=i(49459),h="localhost";o.default.setup(s.mainEnv,(({run:e,onDispose:t,firebaseConfig:i,firebaseCloneHandlers:n,firebasePersistencyServiceOptions:s},{gui:{headerPanelSlot:o}})=>{const E=(0,a.initializeApp)(i),y=(0,c.initializeFirestore)(E,{});s.testingMode&&(0,c.connectFirestoreEmulator)(y,h,8080);const m=(0,u.initializeAuth)(E,{persistence:u.browserLocalPersistence});s.testingMode&&(0,u.connectAuthEmulator)(m,`http://${h}:8081`,{disableWarnings:!0});const _=new l.FirebaseAuthService(m),g=new d.FirebasePersistencyService(_,y,n,s);return o.register({id:"firebaseClone",alignment:"right",Header:function(){return r.default.createElement(f.FirebaseButton,{onClick:async()=>{const e=g.getRootDocumentId();if(e){const t=await g.getDocumentOwnerId(e),i=_.getCurrentUser();if(t&&i){const t=await g.read(e);t&&await g.clone(t)}}},className:p.classes.cloneButton},"Clone")}}),o.register({id:"firebaseCreateNew",alignment:"right",Header:function(){return r.default.createElement(f.FirebaseButton,{onClick:()=>{g.setRootDocumentId("")},className:p.classes.newButton},"New")}}),e((async()=>{})),t((()=>{_.onDispose()})),{firebaseAuthService:_,firebasePersistencyService:g}}))},71831:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FirebaseButton=void 0;const n=i(5163).__importStar(i(87363)),r=i(70268),s=i(63372),o=i(14480);t.FirebaseButton=(0,n.memo)((e=>n.default.createElement(r.Button,{...e,className:(0,o.st)(o.classes.root,e.className,s.classes.primaryDarkButton)}))),t.FirebaseButton.displayName="FirebaseButton"},85470:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FirebaseAuthService=void 0;const n=i(93849),r=i(75102);t.FirebaseAuthService=class{constructor(e){this.firebaseAuth=e,this.currentUser=null,this.firebaseAuthEvents=new n.EventEmitter,this.unsubscribeFromFirebaseAuth=(0,r.onAuthStateChanged)(this.firebaseAuth,(e=>{this.currentUser=e,this.firebaseAuthEvents.emit("change",this.currentUser),e||this.signInAnonymously().catch(n.reportError)}))}onDispose(){this.unsubscribeFromFirebaseAuth()}subscribeToAuthChange(e){this.firebaseAuthEvents.subscribe("change",e)}unsubscribeToAuthChange(e){this.firebaseAuthEvents.subscribe("change",e)}getAuth(){return this.firebaseAuth}getCurrentUser(){return this.currentUser}async signInAnonymously(){await(0,r.signInAnonymously)(this.firebaseAuth)}async signOut(){return this.firebaseAuth.signOut()}async deleteUser(e){await e.delete()}}},88967:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FirebasePersistencyService=t.ReadinessEvent=t.URL_PROJECT_ID_KEY=t.UPGRADE_PENDING_FIELD=t.OWNER_ID_FIELD=void 0;const n=i(93849),r=i(83135),s=i(61008);var o;t.OWNER_ID_FIELD="ownerId",t.UPGRADE_PENDING_FIELD="upgradePending",t.URL_PROJECT_ID_KEY="projectId",function(e){e[e.INVALID_ID_EVENT=0]="INVALID_ID_EVENT",e[e.READY_EVENT=1]="READY_EVENT",e[e.NEW_PROJECT_EVENT=2]="NEW_PROJECT_EVENT"}(o=t.ReadinessEvent||(t.ReadinessEvent={})),t.FirebasePersistencyService=class{constructor(e,t,i,r){this.firebaseAuth=e,this.firestore=t,this.cloneHandlers=i,this.rootCollectionId="projects",this.upgradePending=!1,this.firebasePersistencyEvents=new n.EventEmitter,this.rootCollectionId=(null==r?void 0:r.rootCollectionId)||this.rootCollectionId,this.firebaseAuth.subscribeToAuthChange(this.onAuthChange.bind(this))}async onAuthChange(){const e=new URL(document.location.toString()).searchParams.get(t.URL_PROJECT_ID_KEY);if(e&&!this.rootDocumentId){const i=`${this.rootCollectionId}/${e}`;if(await this.read(i))this.setRootDocumentId(i),this.firebasePersistencyEvents.emit("readiness",o.READY_EVENT);else{this.firebasePersistencyEvents.emit("readiness",o.INVALID_ID_EVENT);const e=new URL(document.location.toString());e.searchParams.delete(t.URL_PROJECT_ID_KEY),r.historyController.push(e.toString()),this.firebasePersistencyEvents.emit("readiness",o.READY_EVENT)}}else e||this.firebasePersistencyEvents.emit("readiness",o.NEW_PROJECT_EVENT)}getRootCollectionId(){return this.rootCollectionId}getRootDocumentId(){return this.rootDocumentId}setRootDocumentId(e){const i=new URL(document.location.toString()),n=i.searchParams.get(t.URL_PROJECT_ID_KEY);if(e)this.rootDocumentId!==e&&(this.rootDocumentId=e,n!==e&&(i.searchParams.set(t.URL_PROJECT_ID_KEY,e.slice(this.rootCollectionId.length+1)),r.historyController.push(i.toString())));else if(this.rootDocumentId=void 0,n){const e=new URL(document.location.toString());e.searchParams.delete(t.URL_PROJECT_ID_KEY),r.historyController.push(e.toString()),document.location.reload()}}async assureRootDocumentExists(){const e=this.rootDocumentId?await this.read(this.rootDocumentId):await this.create(this.rootCollectionId,{});return e&&this.setRootDocumentId(e.getId()),e}async getDocumentOwnerId(e){var i;const n=await this.read(e);return null===(i=null==n?void 0:n.getValue(t.OWNER_ID_FIELD))||void 0===i?void 0:i.getLatest()}setDocumentOwnerId(e,i){return this.update(e,t.OWNER_ID_FIELD,i)}createCollection(e,t){if(t){const i=(0,s.doc)(this.firestore,t);(0,s.collection)(i,e)}else(0,s.collection)(this.firestore,e)}async create(e,t,i){const n=(0,s.collection)(this.firestore,e),r=this.firebaseAuth.getCurrentUser();if(e===this.rootCollectionId&&r&&(t.ownerId=r.uid),i){const e=(0,s.doc)(this.firestore,n.path,i);return await(0,s.setDoc)(e,t),this.read(e.path)}{const e=await(0,s.addDoc)(n,t);return this.read(e.path)}}async read(e){const t=(0,s.doc)(this.firestore,e),i=await(0,s.getDoc)(t);return i.exists()?this.getActiveDocument(e,i):void 0}async update(e,t,i){const n=(0,s.doc)(this.firestore,e);await(0,s.updateDoc)(n,t,i).catch((e=>{this.firebasePersistencyEvents.emit("permissionMismatch",void 0)}))}async prepareUserOwnershipChange(){var e,i;const n=this.getRootDocumentId();if(n&&(null===(e=this.firebaseAuth.getCurrentUser())||void 0===e?void 0:e.isAnonymous)){const e=await this.getDocumentOwnerId(n);(null===(i=this.firebaseAuth.getCurrentUser())||void 0===i?void 0:i.uid)===e&&(this.upgradePending=!0,await this.update(n,t.UPGRADE_PENDING_FIELD,!0))}}async cancelUserOwnershipChange(){var e;const i=this.getRootDocumentId();if(i&&this.upgradePending){const n=await this.getDocumentOwnerId(i);(null===(e=this.firebaseAuth.getCurrentUser())||void 0===e?void 0:e.uid)===n&&(await this.deleteField(i,t.UPGRADE_PENDING_FIELD),this.upgradePending=!1)}}isUserOwnershipChangePending(){return this.upgradePending}deleteDoc(e){const t=(0,s.doc)(this.firestore,e);return(0,s.deleteDoc)(t)}async deleteField(e,t){const i=(0,s.doc)(this.firestore,e);return(0,s.updateDoc)(i,t,(0,s.deleteField)())}async clone(e){const t=(0,s.doc)(this.firestore,e.getId()),i=await(0,s.getDoc)(t),n=await this.create(this.getDocCollectionId(e),i.data());if(n){const t=n.getId(),i=this.firebaseAuth.getCurrentUser();i&&(this.setRootDocumentId(t),await this.setDocumentOwnerId(t,i.uid));for(const t of this.cloneHandlers)await t(e,n)}return n}getDocCollectionId(e){return(0,s.doc)(this.firestore,e.getId()).parent.path}getActiveDocument(e,t){return{getValue:i=>({persist:t=>this.update(e,i,t),persistField:(t,n)=>this.update(e,`${i}.${n}`,t),async getLatest(){const e=await(0,s.getDoc)(t.ref);if(e.exists())return e.get(i)}}),getId:()=>t.ref.path,dispose:()=>{}}}}},9011:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.firebaseConfig=void 0,t.firebaseConfig={apiKey:"AIzaSyD-IS7lkB3o9GioLGayvTlOAgl2EFQnKrY",authDomain:"localhost",projectId:"demo-project",storageBucket:"core3-firebase-9b327.appspot.com",messagingSenderId:"491604166384",appId:"1:491604166384:web:fb676c56b4fdb306bd6435"}},13757:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultConfig=void 0;const n=i(5163),r=i(93849),s=n.__importStar(i(5689)),o=n.__importDefault(i(83654)),a=n.__importDefault(i(1529)),c=n.__importDefault(i(60456)),u=n.__importDefault(i(31197));t.defaultConfig={areas:{content:{type:"grid-area",controls:!0,acceptDrag:!1,activeTab:"",semanticId:"content"}},headerHeight:"42px",layout:{rows:"1fr",columns:"1fr",areas:'"content"'},openPanels:[],overlays:[],panelMinWidth:244,panelMaxWidth:500,focusedTab:{id:"",area:"content"},resizers:!1},t.default=new r.Feature({id:"gui",dependencies:[r.COM.asEntity,s.default.asEntity,o.default.asEntity,a.default.asEntity,c.default.asEntity,u.default.asEntity],api:{headerPanelSlot:r.Slot.withType().defineEntity(s.mainEnv),headerPanelConfig:new r.Config({}),documentTitleSlot:r.Slot.withType().defineEntity(s.mainEnv),panelFactory:r.Slot.withType().defineEntity(s.mainEnv),overlayPanelFactory:r.Slot.withType().defineEntity(s.mainEnv),homeScreenPanelFactory:r.Slot.withType().defineEntity(s.mainEnv),sideBarPanelFactory:r.Slot.withType().defineEntity(s.mainEnv),sideBarConfig:new r.Config({isOpen:!0}),contentConfig:new r.Config(t.defaultConfig),panelStore:r.Service.withType().defineEntity(s.mainEnv),globalWindowEventEmitter:r.Service.withType().defineEntity(s.mainEnv),dragManager:r.Service.withType().defineEntity(s.mainEnv),errorBoundarySlot:r.Slot.withType().defineEntity(s.mainEnv),contextSlot:r.Slot.withType().defineEntity(s.mainEnv),navigationService:r.Service.withType().defineEntity(s.mainEnv).allowRemoteAccess(),track:r.Service.withType().defineEntity(s.mainEnv)}})},23719:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=i(5163);var r=i(13757);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.__importDefault(r).default}}),n.__exportStar(i(13757),t)},93208:(e,t,i)=>{e.exports=i(23719)},83135:(e,t,i)=>{e.exports=i(77467)},31197:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=i(5163);n.__exportStar(i(36041),t);var r=i(36041);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.__importDefault(r).default}})},36041:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineGlobalStateResource=void 0;const n=i(93849),r=i(5689);t.defineGlobalStateResource=()=>n.Service.withType().defineEntity(r.mainEnv);const s=new n.Feature({id:"reactResources",api:{createStateResource:n.Service.withType().defineEntity(r.mainEnv)},dependencies:[]});t.default=s},17362:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=i(5163);n.__exportStar(i(44069),t);var r=i(44069);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.__importDefault(r).default}})},44069:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(93849),r=i(5689);t.default=new n.Feature({id:"storage",dependencies:[],api:{localStorageService:n.Service.withType().defineEntity(r.mainEnv),sessionStorageService:n.Service.withType().defineEntity(r.mainEnv)}})},83654:(e,t,i)=>{e.exports=i(17362)}}]);