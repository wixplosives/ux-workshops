(self.webpackChunk_wixc3_component_playground=self.webpackChunk_wixc3_component_playground||[]).push([[9115],{95944:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_DEMO_EXTENSIONS=void 0;const i=n(5163),o=n(93849),s=i.__importDefault(n(34302)),r=i.__importDefault(n(2206)),a=i.__importDefault(n(58729));t.DEFAULT_DEMO_EXTENSIONS=[".board.tsx"];const u=r.default.api.pluggableProjectConfig.entry(t.DEFAULT_DEMO_EXTENSIONS,"demoExtensions");t.default=new o.Feature({id:"demoDiscovery",dependencies:[s.default.asEntity,r.default.asEntity,a.default.asEntity],api:{demoExtensionsConfig:u}})},7822:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(95944);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(o).default}})},25634:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.demoConvertor=t.getPropInitializerFromDemoNode=void 0;const i=n(5163).__importDefault(n(60270)),o=n(8260);function s(e,t){const n=e.find((e=>{var n;return(null===(n=e.name)||void 0===n?void 0:n.getText())===t}));return n&&i.default.isPropertyAssignment(n)?n:void 0}function r(e,t){return function(e,t){const n=s(e,t);return null==n?void 0:n.initializer}(e.expression.arguments[0].properties,t)}function a(e){if(!e.expression||!i.default.isCallExpression(e.expression))return;if(!e.expression.expression||!i.default.isIdentifier(e.expression.expression))return;if("createBoard"!==e.expression.expression.text)return;if(1!==e.expression.arguments.length)return;const t=e.expression.arguments[0];return i.default.isObjectLiteralExpression(t)?t:void 0}t.getPropInitializerFromDemoNode=r,t.demoConvertor={language:"typescript",kind:"demo",isApplicable:e=>{if(!i.default.isExportAssignment(e))return!1;const t=a(e);if(!(null==t?void 0:t.properties))return!1;const n=s(t.properties,"name");if(!n||!i.default.isStringLiteral(n.initializer))return!1;const o=s(t.properties,"props");if(o&&!i.default.isObjectLiteralExpression(o.initializer))return!1;const r=s(t.properties,"environmentProps");return!(r&&!i.default.isObjectLiteralExpression(r.initializer))&&!!s(t.properties,"Board")},convert(e,t){const n=r(e,"props"),i=r(e,"environmentProps"),o=r(e,"name"),s=r(e,"Board");return{kind:"demo",astNodeId:t.getNodeId(e),name:t.convertLeaf(o),demo:t.convertLeaf(s),props:n&&t.convertLeaf(n),environmentProps:i&&t.convertLeaf(i)}},modifications:{addEnvironmentProps(e,t,{propertyId:n,name:i,value:s}){const r=e.expression.arguments[0];return o.objectConvertor.modifications.addProperty(r,t,{name:i,value:s,propertyId:n})},setName(e,t,{name:n}){const r=a(e);if(!r)throw new Error("Cannot set name on invalid demo node");const u=s(r.properties,"name");if(!u||!i.default.isStringLiteral(u.initializer))throw new Error("Cannot set name on invalid demo node");return o.stringConvertor.modifications.setValue(u.initializer,t,{value:n})},removeProps(e,t){const n=a(e),i=null==n?void 0:n.properties.find((e=>{var t;return"props"===(null===(t=e.name)||void 0===t?void 0:t.getText())})),s=i&&t.getNodeID(i);return n&&s?o.objectConvertor.modifications.removeProperty(n,t,{childId:s}):[]}},defaultConfig:{}}},91788:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(5163).__exportStar(n(25634),t)},25109:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.demoPlugin=t.isDemoNode=void 0;const i=n(9240);t.isDemoNode=e=>!!e&&(0,i.isNodeOfKind)("demo",e),t.demoPlugin=(0,i.packPlugin)()({kind:"demo",modifiers:{addEnvironmentProps:(e,{value:t})=>({...e,environmentProps:t}),setName:(e,{name:t})=>({...e,name:i.stringPlugin.modifiers.setValue(e.name,{value:t})}),removeProps:e=>({...e,props:void 0})},createBlank:e=>({kind:"demo",astNodeId:e(),name:i.stringPlugin.createBlank(e),demo:i.nullPlugin.createBlank(e)}),getNodeChildren:e=>{const t=[e.name,e.demo];return e.props&&t.push(e.props),e.environmentProps&&t.push(e.environmentProps),t},replaceChild:(e,t,n)=>{var o,s;if((0,i.isStringNode)(n)&&e.name.astNodeId===t)return{...e,name:n};if((0,i.isObjectNode)(n)&&(null===(o=e.props)||void 0===o?void 0:o.astNodeId)===t)return{...e,props:n};if((0,i.isObjectNode)(n)&&(null===(s=e.environmentProps)||void 0===s?void 0:s.astNodeId)===t)return{...e,environmentProps:n};if(e.demo.astNodeId===t)return{...e,demo:n};throw new Error("child not found")}})},12836:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5163);i.__exportStar(n(24569),t),i.__exportStar(n(25109),t)},24569:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEMO_FILE_TAG=void 0,t.DEMO_FILE_TAG="demo-file-tag"},45272:(e,t,n)=>{e.exports=n(7822)},26709:(e,t,n)=>{e.exports=n(12836)},56830:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5163),o=n(93849),s=i.__importStar(n(2206)),r=i.__importDefault(n(58729));t.default=new o.Feature({id:"discovery",dependencies:[s.default.asEntity,r.default.asEntity],api:{extensionsConfig:o.Slot.withType().defineEntity(s.processingEnv)}})},8221:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i=n(5163);var o=n(56830);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.__importDefault(o).default}}),i.__exportStar(n(56830),t)},34302:(e,t,n)=>{e.exports=n(8221)},22856:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENTS_TASK_ID=t.FILE_COMPONENTS_TYPE=void 0;const i=n(5163),o=n(93849),s=n(32510),r=n(5689),a=i.__importStar(n(2206)),u=i.__importDefault(n(64229)),p=i.__importDefault(n(45272)),d=i.__importDefault(n(58729)),l=i.__importDefault(n(94400)),c=i.__importDefault(n(27628)),m=i.__importDefault(n(93208)),f=i.__importDefault(n(71815)),g=i.__importDefault(n(89111));t.FILE_COMPONENTS_TYPE="fileComponents",t.COMPONENTS_TASK_ID="components-discovery";const v=(0,s.defineComputedResource)().defineEntity(a.processingEnv),_=(0,s.defineComputedResource)().defineEntity(a.processingEnv);t.default=new o.Feature({id:t.FILE_COMPONENTS_TYPE,api:{demoComponentLocationsManager:v,demoComponentLocationsManagerMain:v.defineConsumer(r.mainEnv),componentsManager:_,componentsManagerMain:_.defineConsumer(r.mainEnv),componentsMapping:new o.Config({})},dependencies:[a.default.asEntity,l.default.asEntity,p.default.asEntity,u.default.asEntity,c.default.asEntity,m.default.asEntity,f.default.asEntity,g.default.asEntity,d.default.asEntity]})},73908:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5163),o=n(93849),s=n(2206),r=i.__importDefault(n(22856)),a=n(72822),u=n(57764),p=n(13445),d=n(90946),l=n(91788);r.default.setup(s.processingEnv,(({run:e,demoComponentLocationsManager:t,componentsManager:n,componentsMapping:i},{project:{fs:r,projectService:c,fileManager:m},simpleAST:{simpleAST:f,languageASTPlugin:g,simpleASTPluginRepo:v},fileAssets:{assets:_},typescriptAssets:{assetTaggerSlots:y,assets:E}})=>{g.register(l.demoConvertor),g.register(p.simulationConvertor),y.register(u.reactComponentAssetTagger);const P=t.provide({dependencies:[_],handler:new d.DemoComponentLocationsResourceComputer(_,f,v,r,i)}),h=c.getProjectPath(),S=n.provide({dependencies:[m],handler:new a.ComponentsResourceHandler(r,m,P,E,h)});return e((()=>{P.getReady(h,s.processingEnv).catch(o.reportError)})),{componentsManager:S,simulationComponentLocationsManager:P,demoComponentLocationsManager:P}}))},29368:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentLocationsResourceComputer=void 0;const i=n(26315),o=n(91570);t.ComponentLocationsResourceComputer=class{constructor(e,t,n,s={},r){this.fileAssetsManager=e,this.simpleAST=t,this.fs=n,this.componentsMapping=s,this.fileTag=r,this.resolveNodeRequest=(0,i.createRequestResolver)({fs:this.fs,extensions:o.resolveExtensions}),this.fromConfig=0!==Object.keys(this.componentsMapping).length}compute(e){const t=this.fileAssetsManager.get(e);if(this.fromConfig)return this.fromConfig=!1,{value:this.componentsMapping,dependencies:new Set([t]),status:{valid:!0}};if(!t.isValid()&&this.fromConfig)return{value:{},dependencies:new Set([t]),status:{valid:!1,message:t.getInvalidationMessage()}};const n=new Set([t]),i=t.getFilesWithTag(this.fileTag),o={};for(const e of i){const t=this.simpleAST.get({filePath:e,parsers:this.getSimpleASTPluginNodeKinds()});n.add(t);const i=t.getLatest();this.getComponentsInfo(i).forEach((t=>{const{exportName:n,symbolName:i,targetFile:s}=t,r=this.resolveNodeRequest(this.fs.dirname(e),s).resolvedFile;r&&(o[r]||(o[r]=[]),o[r].find((e=>e.exportName===n))||o[r].push({exportName:n,symbolName:i}))}))}return{value:o,dependencies:n,status:{valid:!0}}}recompute(e,t,n,i){const o=this.compute(e.getId());return{changes:JSON.stringify(o.value)!==JSON.stringify(e.getLatest())?[{kind:"replace",path:[],value:o.value}]:[],dependencies:o.dependencies,status:o.status}}}},72822:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentsResourceHandler=void 0;const i=n(60814),o=n(9240),s=n(91570);t.ComponentsResourceHandler=class{constructor(e,t,n,i,o){this.fs=e,this.fileManager=t,this.simComponentsManager=n,this.assets=i,this.projectPath=o}compute({filePath:e,exportName:t}){const n=this.fileManager.get(e),i={exportName:"",packagePath:""},s=new Set([n]);if(!n.isValid())return{value:i,dependencies:s,status:{valid:!1,message:n.getInvalidationMessage()}};try{const n=this.getPackagePath(e),i=this.simComponentsManager.get(this.projectPath);s.add(i);let r=(i.getLatest()[e]||[]).find((e=>e.exportName===t));if(!r&&this.assets.isOpen(this.projectPath)){const n=this.assets.get(this.projectPath),i=n.getLatest();s.add(n);const o=i.results[e];o&&o[t]&&o[t].tags.includes("component")&&(r={exportName:t,symbolName:o[t].symbolName})}return r?{value:{exportName:t,packagePath:n,name:(0,o.getComponentName)(e,t,r.symbolName)},dependencies:s,status:{valid:!0}}:{value:{exportName:t,packagePath:n,name:(0,o.getComponentName)(e,t,this.assets.get(this.projectPath).getLatest().results[e][t].symbolName)},dependencies:s,status:{valid:!0}}}catch(e){return{value:i,dependencies:s,status:{valid:!1,message:null==e?void 0:e.message}}}}recompute(e,t,n,o){const s=[...n].every((e=>!!e.isValid())),r=s?this.compute(e.getId()):null;return{status:{valid:s},changes:r?[(0,i.fullChange)(r.value)]:[],dependencies:r?r.dependencies:o}}getPackagePath(e){const t=(0,s.getPackagePath)(e,this.fs);if(!t)throw new Error(`There is no package.json found for the the file ${e}`);return t}}},90946:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DemoComponentLocationsResourceComputer=void 0;const i=n(26709),o=n(9240),s=n(29368),r=n(25109),a=n(8260);class u extends s.ComponentLocationsResourceComputer{constructor(e,t,n,s,u={}){super(e,t,s,u,i.DEMO_FILE_TAG),this.simpleASTPluginRepo=n,this.getComponentsInfo=e=>{const t=(0,o.findNode)(e,this.simpleASTPluginRepo.getPlugins(),r.isDemoNode);return(0,r.isDemoNode)(t)?(0,a.findComponents)(t.demo,this.simpleASTPluginRepo.getPlugins()).map((e=>({exportName:e.targetExport,targetFile:e.targetFile,symbolName:e.symbolName}))):[]}}getSimpleASTPluginNodeKinds(){return[...this.simpleASTPluginRepo.getPlugins().values(),r.demoPlugin].map((e=>e.nodeKind))}}t.DemoComponentLocationsResourceComputer=u},57764:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reactComponentAssetTagger=void 0,t.reactComponentAssetTagger={tags:["component","react-component"],typeFileContents:"\n    import * as React from 'react';\n\n    export type AComponent = React.ComponentType<any>;\n    export type NotAnyFunction = ()=>({__brand: string & number});\n    ",isApplicableToFile:e=>!e.endsWith(".d.ts"),applicableTo:["AComponent"],notApplicableTo:["NotAnyFunction"]}},71797:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i=n(5163);i.__exportStar(n(12803),t);var o=n(12803);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.__importDefault(o).default}})},12803:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(93849),o=n(2206);t.default=new i.Feature({id:"jobManager",dependencies:[i.COM.asEntity],api:{jobRunnersSlot:i.Slot.withType().defineEntity(o.processingEnv),jobs:i.Service.withType().defineEntity(o.processingEnv).allowRemoteAccess()}})},27628:(e,t,n)=>{e.exports=n(71797)},48541:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i=n(5163);i.__exportStar(n(17831),t);var o=n(17831);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.__importDefault(o).default}})},17831:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5163),o=n(93849),s=n(32510),r=i.__importStar(n(2206)),a=i.__importDefault(n(89111)),u=n(5689),p=n(46726),d=(0,s.defineTwoWayComputedResource)().defineEntity(r.processingEnv),l=(0,s.defineOneWayResource)().defineEntity(r.processingEnv),c=(0,s.defineComputedResource)().defineEntity(r.processingEnv);t.default=new o.Feature({id:"simpleAST",dependencies:[r.default.asEntity,a.default.asEntity,o.COM.asEntity],api:{idService:o.Service.withType().defineEntity(r.processingEnv),remoteIdService:o.Service.withType().defineEntity(r.processingEnv).allowRemoteAccess(),codeService:o.Service.withType().defineEntity(r.processingEnv).allowRemoteAccess(),sourceIdResource:c,sourceIdResourceMain:c.defineConsumer(u.mainEnv),idGenerator:o.Service.withType().defineEntity(o.Universal),simpleASTPlugin:o.Slot.withType().defineEntity(o.Universal),languagePlugin:o.Slot.withType().defineEntity(r.processingEnv),languageASTPlugin:o.Slot.withType().defineEntity(r.processingEnv),languageASTFallbackPlugin:o.Slot.withType().defineEntity(r.processingEnv),languageASTPassthroughPlugin:o.Slot.withType().defineEntity(r.processingEnv),simpleAST:d,simpleASTMain:d.defineConsumer(u.mainEnv),simpleASTPluginRepo:o.Service.withType().defineEntity(o.Universal),astVisualizer:o.Slot.withType().defineEntity(u.mainEnv),simpleASTDiagnostics:l,simpleASTDiagnosticsMain:l.defineConsumer(u.mainEnv)}}).setup(o.Universal,(({simpleASTPlugin:e,simpleAST:t},{COM:n})=>{const i=new p.NodePluginRepo;e.stream((e=>{i.registerPlugin(e)})),p.commonSimpleAstParsers.forEach((t=>e.register(t)));const o=n.communication.getEnvironmentId(),s={};return{simpleASTPluginRepo:i,simpleAST:t,idGenerator:{generateId:e=>(s[e]||(s[e]=(0,p.createPrefixCounter)(o).nextId),s[e]())}}}))},94400:(e,t,n)=>{e.exports=n(48541)},8260:(e,t,n)=>{e.exports=n(45856)},9240:(e,t,n)=>{e.exports=n(46726)},75811:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i=n(5163);var o=n(63824);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.__importDefault(o).default}}),i.__exportStar(n(63824),t)},63824:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_SIM_EXTENSIONS=void 0;const i=n(5163),o=n(93849),s=i.__importDefault(n(34302)),r=i.__importDefault(n(2206)),a=i.__importDefault(n(58729));t.DEFAULT_SIM_EXTENSIONS=[".sim.ts",".sim.tsx"];const u=r.default.api.pluggableProjectConfig.entry(t.DEFAULT_SIM_EXTENSIONS,"simulationExtensions");t.default=new o.Feature({id:"simulationDiscovery",dependencies:[s.default.asEntity,r.default.asEntity,a.default.asEntity],api:{simulationExtensionsConfig:u}})},90129:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(5163).__exportStar(n(96560),t)},96560:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simulationConvertor=void 0;const i=n(5163).__importDefault(n(60270));function o(e,t){const n=e.find((e=>{var n;return(null===(n=e.name)||void 0===n?void 0:n.getText())===t}));return n&&i.default.isPropertyAssignment(n)?n:void 0}t.simulationConvertor={language:"typescript",kind:"simulation",isApplicable:e=>{if(!i.default.isExportAssignment(e))return!1;if(!e.expression||!i.default.isCallExpression(e.expression))return!1;if(!e.expression.expression||!i.default.isIdentifier(e.expression.expression))return!1;if("createSimulation"!==e.expression.expression.text)return!1;if(1!==e.expression.arguments.length)return!1;const t=e.expression.arguments[0];if(!i.default.isObjectLiteralExpression(t))return!1;const n=o(e.expression.arguments[0].properties,"name");if(!n||!i.default.isStringLiteral(n.initializer))return!1;const s=o(t.properties,"props");return!(!s||!i.default.isObjectLiteralExpression(s.initializer))&&!!o(t.properties,"componentType")},convert:(e,t)=>({kind:"simulation",astNodeId:t.getNodeId(e),data:t.convertLeaf(e.expression.arguments[0])}),modifications:{},defaultConfig:{}}},64229:(e,t,n)=>{e.exports=n(75811)},13445:(e,t,n)=>{e.exports=n(90129)},94998:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i=n(5163);var o=n(30600);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.__importDefault(o).default}}),i.__exportStar(n(30600),t)},30600:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ANALYZE_FILES_MARK=void 0;const i=n(5163),o=n(93849),s=i.__importDefault(n(89111)),r=i.__importStar(n(2206)),a=i.__importDefault(n(58729)),u=i.__importStar(n(32510)),p=i.__importDefault(n(93104)),d=i.__importDefault(n(32562)),l=n(5689),c=r.default.api.pluggableProjectConfig.entry({},"componentsDiscovery"),m=o.Config.withType().defineEntity({maxWorkTime:130,minSleepTime:50,changeBufferTime:2e3,splitPerFiles:100});t.ANALYZE_FILES_MARK="ANALYZE_FILES_MARK";const f=(0,u.defineIncrementalComputedResource)().defineEntity(r.processingEnv),g=(0,u.defineOneWayResource)().defineEntity(r.processingEnv);t.default=new o.Feature({id:"typescriptAssets",dependencies:[s.default.asEntity,r.default.asEntity,u.default.asEntity,a.default.asEntity,p.default.asEntity,d.default.asEntity],api:{assetsReevaluateService:o.Service.withType().defineEntity(r.processingEnv).allowRemoteAccess(),assetTaggerSlots:o.Slot.withType().defineEntity(r.processingEnv),assets:f,assetsMain:f.defineConsumer(l.mainEnv),openAssets:g,openAssetsMain:g.defineConsumer(l.mainEnv),componentsDiscoveryConfig:c,assetDiscoveryConfig:m}})},71815:(e,t,n)=>{e.exports=n(94998)},48150:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const i=n(5163);i.__exportStar(n(17166),t);var o=n(17166);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.__importDefault(o).default}})},32562:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(5163),o=n(93849),s=i.__importDefault(n(2206)),r=i.__importDefault(n(25447)),a=i.__importDefault(n(93104)),u=i.__importDefault(n(17166));t.default=new o.Feature({id:"typescriptCompiler",dependencies:[s.default.asEntity,r.default.asEntity,a.default.asEntity,u.default.asEntity],api:{}})},89111:(e,t,n)=>{e.exports=n(48150)}}]);