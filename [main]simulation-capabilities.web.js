(self.webpackChunk_wixc3_component_playground=self.webpackChunk_wixc3_component_playground||[]).push([[1330],{68941:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;const n=r(5163),s=r(93849),i=n.__importStar(r(2206));t.default=new s.Feature({id:"gitCommands",dependencies:[i.default.asEntity],api:{gitCommandsService:s.Service.withType().defineEntity(i.processingEnv).allowRemoteAccess((0,s.declareComEmitter)("subscribe","unsubscribe"))},context:{gitCommandsContext:i.processingEnv.withContext()}}),t.Context=i.processingEnv.useContext("live-server")},54718:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(68941);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(s).default}})},35784:(e,t,r)=>{e.exports=r(54718)},20137:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5163),s=r(93849),i=r(32510),a=n.__importDefault(r(35784)),u=n.__importStar(r(2206)),o=r(5689),c=(0,i.defineOneWayResource)().defineEntity(u.processingEnv),d=(0,i.defineOneWayResource)().defineEntity(u.processingEnv),l=(0,i.defineComputedResource)().defineEntity(u.processingEnv),f=(0,i.defineOneWayResource)().defineEntity(u.processingEnv),g=(0,i.defineOneWayResource)().defineEntity(u.processingEnv),p=(0,i.defineOneWayResource)().defineEntity(u.processingEnv),m=(0,i.defineComputedResource)().defineEntity(u.processingEnv);t.default=new s.Feature({id:"gitRevision",dependencies:[u.default.asEntity,a.default.asEntity],api:{gitService:s.Service.withType().defineEntity(u.processingEnv).allowRemoteAccess(),gitDetector:s.Service.withType().defineEntity(u.processingEnv).allowRemoteAccess(),gitFetcher:s.Service.withType().defineEntity(u.processingEnv).allowRemoteAccess(),gitFetcherOption:new s.Config({fetchInterval:6e5,enabled:!0}),gitSyncRepoService:s.Service.withType().defineEntity(u.processingEnv).allowRemoteAccess(),gitHeadResourceManager:c,gitHeadResourceManagerMain:c.defineConsumer(o.mainEnv),gitRepoStatusResourceManager:d,gitRepoStatusResourceManagerMain:d.defineConsumer(o.mainEnv),gitFileStatusResourceManager:l,gitFileStatusResourceManagerMain:l.defineConsumer(o.mainEnv),gitBranchListResourceManager:f,gitBranchListResourceManagerMain:f.defineConsumer(o.mainEnv),gitMergeStateResourceManager:g,gitMergeStateResourceManagerMain:g.defineConsumer(o.mainEnv),gitSyncRepoResourceManager:p,gitSyncRepoResourceManagerMain:p.defineConsumer(o.mainEnv),gitTrackingBranchResourceManager:m,gitTrackingBranchResourceManagerMain:m.defineConsumer(o.mainEnv),gitConflictsService:s.Service.withType().defineEntity(u.processingEnv).allowRemoteAccess(),gitEventEmitter:s.Service.withType().defineEntity(u.processingEnv),gitMonitoringService:s.Service.withType().defineEntity(u.processingEnv).allowRemoteAccess()}})},3486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=r(5163);n.__exportStar(r(20137),t);var s=r(20137);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.__importDefault(s).default}})},72975:(e,t,r)=>{e.exports=r(3486)},78432:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useResources=t.useResource=t.useResourceApplyChange=t.useResourceValidity=t.useResourceValue=t.useResourceState=t.useApplyChange=t.useValidity=t.useValue=t.useResourceSubscriber=t.useHoldResource=t.useResourceInstance=void 0;const n=r(87363),s=r(93849),i=r(60814),a=r(69202);function u({resource:e,defaultValue:t,enabled:r=!0}){const i=(0,a.useForceUpdate)(),u=(0,n.useRef)(!1),o=(0,a.useLatest)(r),c=(0,n.useCallback)((()=>{o.current&&!u.current&&i()}),[o,i]);return(0,n.useEffect)((()=>(e&&e.subscribe(c),(null==e?void 0:e.ready)&&e.ready.then(c).catch(s.reportError),()=>{null==e||e.unsubscribe(c)})),[c,e]),(0,n.useEffect)((()=>()=>{u.current=!0}),[]),function(e,t){return e&&e.isReady()&&e.isValid()?e.getLatest():t}(e,t)}function o({resource:e,enabled:t=!0}){const[r,s]=(0,n.useState)(),i=(0,n.useCallback)((()=>{if(t){const t=e&&e.isReady()?e.isValid():void 0;s(t)}}),[e,t]);return(0,n.useEffect)((()=>{var r;if(!e)return void(t&&s(void 0));let n=!1;const a=()=>{n||i()};return e.subscribe(a),a(),null===(r=e.ready)||void 0===r||r.then(a).catch(a),()=>{n=!0,e.unsubscribe(a)}}),[e,i,t]),r}function c(e){return(0,n.useCallback)((t=>{null==e||e.applyChange(t)}),[e])}function d(e){return!!e.ids}t.useResourceInstance=({resourceManager:e,resourceId:t,enabled:r=!0})=>{const s=(0,n.useMemo)((()=>({})),[]),i=(0,n.useRef)({resourceManager:e,resourceId:t}),a=(0,n.useMemo)((()=>{if(void 0===t)return;const{current:n}=i;return function(e,t,r){return e||t.resourceId!==r.resourceId||t.resourceManager!==r.resourceManager}(r,n,{resourceManager:e,resourceId:t})?e.get(t,s):n.resourceInstance}),[t,r,e,s]);return i.current={resourceManager:e,resourceId:t,resourceInstance:a},(0,n.useEffect)((()=>()=>null==a?void 0:a.release(s)),[a,s]),a},t.useHoldResource=e=>{(0,n.useEffect)((()=>{const t={};return e.use(t),()=>{e.release(t)}}),[e])},t.useResourceSubscriber=(e,t)=>{(0,n.useEffect)((()=>{const r=()=>t(e.getLatest());return e.subscribe(r),()=>e.unsubscribe(r)}),[t,e])},t.useValue=u,t.useValidity=o,t.useApplyChange=c,t.useResourceState=function({resource:e,enabled:t,defaultValue:r}){const s=u({resource:e,enabled:t,defaultValue:(null==e?void 0:e.getLatest())||r}),a=c(e),o=(0,n.useCallback)((e=>a((0,i.fullChange)(e))),[a]);return[s,o,e]},t.useResourceValue=function({resourceManager:e,resourceId:r,defaultValue:n,enabled:s=!0}){return u({resource:(0,t.useResourceInstance)({resourceManager:e,resourceId:r,enabled:s}),defaultValue:n,enabled:s})},t.useResourceValidity=function({resourceManager:e,resourceId:r,enabled:n=!0}){return o({resource:(0,t.useResourceInstance)({resourceManager:e,resourceId:r,enabled:n}),enabled:n})},t.useResourceApplyChange=function({resourceManager:e,resourceId:r}){return c((0,t.useResourceInstance)({resourceManager:e,resourceId:r}))},t.useResource=function(e,t){const[r,s]=(0,n.useState)(t);return(0,n.useEffect)((()=>{var r;let n=!1;if(!e)return;const i=()=>{n||(e.isReady()&&e.isValid()?s(e.getLatest()):s(t))};return e.subscribe(i),i(),null===(r=e.ready)||void 0===r||r.then(i).catch(i),()=>{n=!0,e.unsubscribe(i)}}),[e,t]),e&&e.isReady()?e.getLatest():r};const l=new WeakMap,f=e=>{const t=l.get(e);if(t)for(const r of Object.keys(t))for(const n of Object.keys(t[r]))t[r][n].resource.isReady()&&t[r][n].resource.release(e)},g=(e,t,r,n,s)=>{const i=t.getType();t.isReady()||s.push(t.ready),e[i]||(e[i]={}),e[i][t.getSerializedId()]={resource:t,field:r,isInnerRecord:n}},p={valid:!1,message:"Loading"},m=(e,t)=>{for(const r of Object.keys(e))if(t[r])for(const n of t[r])if(e[r][n])return!0;return!1};t.useResources=function(e,t=!0){const r=(e=>JSON.stringify(e,((e,t)=>t instanceof i.ResourceManager?t.getTypeName():t)))(e),[a]=(0,n.useState)({cleanupRequested:!1,enabled:t,hasChanges:!1,used:new Set});a.enabled=t;const[u,o]=(0,n.useState)(0),c=Object.keys(e),v=c.length?e[c[0]].resourceManager.getBatcher():void 0,M=l.get(a)||{},y=(0,n.useCallback)((e=>{if(!a.enabled)return;const t=m(M,e.changed),r=m(M,e.changedStatus);(t||r)&&o(Math.random())}),[M,a]);return l.has(a)||(l.set(a,M),v.subscribe(y)),(0,n.useMemo)((()=>{const t=[];a.enabled&&(v.batchAll((()=>{const r=new Set;for(const[n,s]of Object.entries(e))if(d(s))for(const e of s.ids){const i=s.resourceManager.get(e,a);r.add(i),g(M,i,n,!0,t)}else if(s.id){const e=s.resourceManager.get(s.id,a);r.add(e),g(M,e,n,!0,t)}for(const e of Object.values(M))for(const[t,n]of Object.entries(e))r.has(n.resource)||(n.resource.isReady()?(n.resource.release(a),delete e[t]):n.resource.ready.then((()=>{a.used.has(n.resource)||(n.resource.release(a),delete e[t])})).catch(s.reportError));a.used=r})),t.length&&a.enabled&&Promise.all(t).then((e=>{a.cleanupRequested?f(a):o(Math.random())})).catch((e=>{throw e})))}),[r,a,v,M]),(0,n.useEffect)((()=>()=>{f(a),v.unsubscribe(y),a.cleanupRequested=!0}),[a]),(0,n.useMemo)((()=>{return Object.keys(e).reduce(((r,n)=>{const s=e[n];if(d(s))r[n]={getResource:e=>t(n,e),getValue(e){const r=t(n,e);return r&&r.isValid()?r.getLatest():s.defaultValue},getStatus(e){const r=t(n,e);return r&&r.isReady()?r.getStatus():p}};else{const e=t(n,s.id);r[n]={value:e&&e.isValid()?e.getLatest():s.defaultValue,status:e?e.getStatus():p,resource:e}}return r}),{});function t(t,r){const n=e[t],s=d(n)?r:n.id;if(!s||!M[n.resourceManager.getTypeName()])return;const a=M[n.resourceManager.getTypeName()][(0,i.serializeId)(s)];return a&&a.resource&&a.resource.isReady()?a.resource:void 0}}),[u,t,r])}},40386:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5163);n.__exportStar(r(78432),t),n.__exportStar(r(23496),t)},23496:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createJSONResource=void 0;const n=r(60814);t.createJSONResource=function(e){return new n.JSONResource("data",{provider:{provide:()=>({value:e})},resourceType:"state-resource",batcher:new n.Batcher})}},27941:(e,t,r)=>{e.exports=r(40386)},16894:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RECOMPUTE_DEMO_LIST_MARK=t.COMPUTE_DEMO_LIST_MARK=void 0;const n=r(5163),s=r(93849),i=r(5689),a=n.__importStar(r(2206)),u=n.__importDefault(r(94400)),o=n.__importDefault(r(91821)),c=n.__importDefault(r(58729)),d=n.__importDefault(r(72975)),l=n.__importDefault(r(89111)),f=n.__importDefault(r(32562)),g=r(32510),p=n.__importDefault(r(64229)),m=n.__importDefault(r(93104)),v=r(3092);t.COMPUTE_DEMO_LIST_MARK="COMPUTE_DEMO_LIST_MARK",t.RECOMPUTE_DEMO_LIST_MARK="RECOMPUTE_DEMO_LIST_MARK";const M=(0,g.defineComputedResource)().defineEntity(a.processingEnv),y=(0,g.defineTwoWayResource)().defineEntity(a.processingEnv),E=(0,g.defineComputedResource)().defineEntity(a.processingEnv);t.default=new s.Feature({id:"simulationCapabilities",dependencies:[a.default.asEntity,d.default.asEntity,o.default.asEntity,u.default.asEntity,l.default.asEntity,f.default.asEntity,p.default.asEntity,c.default.asEntity,m.default.asEntity],api:{demoListManager:M,demoListManagerMain:M.defineConsumer(i.mainEnv),simulationService:s.Service.withType().defineEntity(i.mainEnv),simulationProcessingService:s.Service.withType().defineEntity(a.processingEnv).allowRemoteAccess(),demoErrorManager:y,demoErrorManagerMain:y.defineConsumer(i.mainEnv),environmentPropsManager:E,environmentPropsManagerMain:E.defineConsumer(i.mainEnv)}}).setup(s.Universal,(({},{simpleAST:{simpleASTPlugin:e}})=>{e.register(v.jsxFunctionPlugin),e.register(v.jsxFilePlugin),e.register(v.jsxOwnerPlugin)}))},49659:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5163),s=r(5689),i=r(60814),a=n.__importDefault(r(16894)),u=r(28659),o=r(30802),c=r(94698),d=r(26709);a.default.setup(s.mainEnv,(({demoListManager:e,demoErrorManager:t,simulationProcessingService:r,environmentPropsManager:n},{project:{fileManagerMain:s},simpleAST:{simpleASTPlugin:a,simpleASTMain:l,idGenerator:f}})=>{a.register(o.simulationPlugin),a.register(d.demoPlugin);const g=e.consume({manipulator:c.demoListManipulator}),p=t.consume({}),m=n.consume({manipulator:i.fullChangeManipulator});return{simulationService:new u.SimulationService(g,r,s,m,l,f),demoErrorManagerMain:p,demoListManagerMain:g,environmentPropsManagerMain:m}}))}}]);