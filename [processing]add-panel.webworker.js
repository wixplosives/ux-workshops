(self.webpackChunk_wixc3_component_playground=self.webpackChunk_wixc3_component_playground||[]).push([[2933],{19031:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=s(5163),i=s(93849),n=s(5689),a=o.__importDefault(s(94400)),r=o.__importDefault(s(48785)),l=o.__importDefault(s(93208)),u=o.__importDefault(s(64229)),p=o.__importDefault(s(45272)),c=o.__importStar(s(2206)),m=o.__importDefault(s(91821)),d=o.__importDefault(s(58729)),f=o.__importDefault(s(71815)),h=o.__importDefault(s(49634));t.default=new i.Feature({id:"addPanel",dependencies:[c.default.asEntity,m.default.asEntity,d.default.asEntity,r.default.asEntity,a.default.asEntity,l.default.asEntity,u.default.asEntity,p.default.asEntity,h.default.asEntity,f.default.asEntity],api:{htmlElementsCategory:i.Slot.withType().defineEntity(n.mainEnv),componentsCategory:i.Slot.withType().defineEntity(n.mainEnv),componentsWithSimulationsService:i.Service.withType().defineEntity(c.processingEnv).allowRemoteAccess()}})},99521:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=s(5163),i=s(2206),n=o.__importDefault(s(16035));o.__importDefault(s(19031)).default.setup(i.processingEnv,(({},{fileAssets:{assets:e},typescriptAssets:{assets:t},simpleAST:{simpleAST:s},project:{projectService:o,fs:i},fileComponents:{demoComponentLocationsManager:a}},{})=>{const r=o.getProjectPath();return{componentsWithSimulationsService:new n.default(t,e,a,s,i,r)}}))},16035:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=s(26315),i=s(91570),n=s(65767),a=s(94752),r=s(30802);t.default=class{constructor(e,t,s,n,a,r){this.assets=e,this.fileAssets=t,this.demoComponentLocationsManager=s,this.simpleAstManager=n,this.fs=a,this.projectPath=r,this.resolveRequest=(0,o.createRequestResolver)({fs:this.fs,extensions:i.resolveExtensions})}async getDemoComponents(){const e=(await this.demoComponentLocationsManager.getReady(this.projectPath)).getLatest();return Object.entries(e).flatMap((e=>{const[t,s]=e;return s.map((({exportName:e,symbolName:s})=>({filePath:t,exportName:e,symbolName:s,simulations:[]})))}))}getAllComponents(){if(!this.assets.isOpen(this.projectPath))return[];const e=this.assets.get(this.projectPath).getLatest();return Object.entries(e.results).reduce(((e,[t,s])=>{for(const[o,{tags:i,symbolName:n}]of Object.entries(s))i.includes("component")&&e.push({exportName:o,filePath:t,symbolName:n,simulations:[]});return e}),[])}async getSimulatedComponents(){const e=await this.fileAssets.getReady(this.projectPath),t={},s=e.getFilesWithTag(r.SIMULATION_FILE_TAG);for(const o of s){const s=this.simpleAstManager.get({filePath:o,parsers:n.simulationAstParsers});try{const o=(0,a.getSimulationIdAndName)({simpleAstResource:s,assets:e,fs:this.fs,resolveRequest:this.resolveRequest}),[i,n]=o.id.componentTypeRef.split("#");t[o.id.componentTypeRef]||(t[o.id.componentTypeRef]={exportName:n,filePath:i,simulations:[]}),t[o.id.componentTypeRef].simulations.push(o)}catch{}}return Object.values(t)}}},20183:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const o=s(5163);var i=s(89706);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.__importDefault(i).default}}),o.__exportStar(s(89706),t)},48785:(e,t,s)=>{e.exports=s(20183)},29368:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentLocationsResourceComputer=void 0;const o=s(26315),i=s(91570);t.ComponentLocationsResourceComputer=class{constructor(e,t,s,n={},a){this.fileAssetsManager=e,this.simpleAST=t,this.fs=s,this.componentsMapping=n,this.fileTag=a,this.resolveNodeRequest=(0,o.createRequestResolver)({fs:this.fs,extensions:i.resolveExtensions}),this.fromConfig=0!==Object.keys(this.componentsMapping).length}compute(e){const t=this.fileAssetsManager.get(e);if(this.fromConfig)return this.fromConfig=!1,{value:this.componentsMapping,dependencies:new Set([t]),status:{valid:!0}};if(!t.isValid()&&this.fromConfig)return{value:{},dependencies:new Set([t]),status:{valid:!1,message:t.getInvalidationMessage()}};const s=new Set([t]),o=t.getFilesWithTag(this.fileTag),i={};for(const e of o){const t=this.simpleAST.get({filePath:e,parsers:this.getSimpleASTPluginNodeKinds()});s.add(t);const o=t.getLatest();this.getComponentsInfo(o).forEach((t=>{const{exportName:s,symbolName:o,targetFile:n}=t,a=this.resolveNodeRequest(this.fs.dirname(e),n).resolvedFile;a&&(i[a]||(i[a]=[]),i[a].find((e=>e.exportName===s))||i[a].push({exportName:s,symbolName:o}))}))}return{value:i,dependencies:s,status:{valid:!0}}}recompute(e,t,s,o){const i=this.compute(e.getId());return{changes:JSON.stringify(i.value)!==JSON.stringify(e.getLatest())?[{kind:"replace",path:[],value:i.value}]:[],dependencies:i.dependencies,status:i.status}}}},16403:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=s(5163);o.__exportStar(s(74234),t),o.__exportStar(s(86465),t)},86465:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimulationComponentLocationsResourceComputer=t.simulationAstParsers=void 0;const o=s(30802),i=s(9240),n=s(29368);t.simulationAstParsers=[...i.commonSimpleAstParsers,o.simulationPlugin].map((e=>e.nodeKind));class a extends n.ComponentLocationsResourceComputer{constructor(e,t,s,n={}){super(e,t,s,n,o.SIMULATION_FILE_TAG),this.getComponentsInfo=e=>{if(!(0,i.isSourceFileNode)(e))return[];const t=e.statements.find(o.isSimulationNode);if(!(0,o.isSimulationNode)(t))return[];const s=(0,i.getSimpleObjectProp)(t.data.properties,"componentType").initializer;return(0,i.isSimpleFileReferenceNode)(s)?[{exportName:s.targetExport,targetFile:s.targetFile,symbolName:s.symbolName}]:[]}}getSimpleASTPluginNodeKinds(){return[...i.commonSimpleAstParsers,o.simulationPlugin].map((e=>e.nodeKind))}}t.SimulationComponentLocationsResourceComputer=a},74234:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},65767:(e,t,s)=>{e.exports=s(16403)},94752:(e,t,s)=>{e.exports=s(79628)},51734:function(e,t,s){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(10107);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(i).default}})},10107:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=s(5163),i=s(93849),n=o.__importStar(s(2206)),a=o.__importDefault(s(94400));t.default=new i.Feature({id:"simulationToJsx",dependencies:[a.default.asEntity,n.default.asEntity],api:{simulationToJsxService:i.Service.withType().defineEntity(n.processingEnv).allowRemoteAccess(),componentToJsxService:i.Service.withType().defineEntity(n.processingEnv).allowRemoteAccess()}})},49634:(e,t,s)=>{e.exports=s(51734)}}]);