(self.webpackChunk_wixc3_component_playground=self.webpackChunk_wixc3_component_playground||[]).push([[2721],{37024:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dependencyManipulator=void 0;const n=r(60814);t.dependencyManipulator={reducer:(e,t)=>({value:t.value,invertingChanges:[(0,n.fullChange)(e)]}),squasher:e=>[e[e.length-1]]}},47951:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5163);n.__exportStar(r(37024),t),n.__exportStar(r(65084),t)},65084:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compiledFileId=void 0,t.compiledFileId=(e,t=!1)=>({filePath:e,outputLang:"javascript",excludeEditingTransformers:t})},2542:(e,t,r)=>{e.exports=r(47951)},6308:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(5163).__exportStar(r(15850),t)},15850:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMainWindow=void 0,t.isMainWindow=()=>window===window.parent},52870:(e,t,r)=>{e.exports=r(6308)},68941:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;const n=r(5163),o=r(93849),i=n.__importStar(r(2206));t.default=new o.Feature({id:"gitCommands",dependencies:[i.default.asEntity],api:{gitCommandsService:o.Service.withType().defineEntity(i.processingEnv).allowRemoteAccess((0,o.declareComEmitter)("subscribe","unsubscribe"))},context:{gitCommandsContext:i.processingEnv.withContext()}}),t.Context=i.processingEnv.useContext("live-server")},54718:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(68941);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(o).default}})},35784:(e,t,r)=>{e.exports=r(54718)},20137:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5163),o=r(93849),i=r(32510),s=n.__importDefault(r(35784)),a=n.__importStar(r(2206)),l=r(5689),d=(0,i.defineOneWayResource)().defineEntity(a.processingEnv),c=(0,i.defineOneWayResource)().defineEntity(a.processingEnv),u=(0,i.defineComputedResource)().defineEntity(a.processingEnv),p=(0,i.defineOneWayResource)().defineEntity(a.processingEnv),m=(0,i.defineOneWayResource)().defineEntity(a.processingEnv),v=(0,i.defineOneWayResource)().defineEntity(a.processingEnv),E=(0,i.defineComputedResource)().defineEntity(a.processingEnv);t.default=new o.Feature({id:"gitRevision",dependencies:[a.default.asEntity,s.default.asEntity],api:{gitService:o.Service.withType().defineEntity(a.processingEnv).allowRemoteAccess(),gitDetector:o.Service.withType().defineEntity(a.processingEnv).allowRemoteAccess(),gitFetcher:o.Service.withType().defineEntity(a.processingEnv).allowRemoteAccess(),gitFetcherOption:new o.Config({fetchInterval:6e5,enabled:!0}),gitSyncRepoService:o.Service.withType().defineEntity(a.processingEnv).allowRemoteAccess(),gitHeadResourceManager:d,gitHeadResourceManagerMain:d.defineConsumer(l.mainEnv),gitRepoStatusResourceManager:c,gitRepoStatusResourceManagerMain:c.defineConsumer(l.mainEnv),gitFileStatusResourceManager:u,gitFileStatusResourceManagerMain:u.defineConsumer(l.mainEnv),gitBranchListResourceManager:p,gitBranchListResourceManagerMain:p.defineConsumer(l.mainEnv),gitMergeStateResourceManager:m,gitMergeStateResourceManagerMain:m.defineConsumer(l.mainEnv),gitSyncRepoResourceManager:v,gitSyncRepoResourceManagerMain:v.defineConsumer(l.mainEnv),gitTrackingBranchResourceManager:E,gitTrackingBranchResourceManagerMain:E.defineConsumer(l.mainEnv),gitConflictsService:o.Service.withType().defineEntity(a.processingEnv).allowRemoteAccess(),gitEventEmitter:o.Service.withType().defineEntity(a.processingEnv),gitMonitoringService:o.Service.withType().defineEntity(a.processingEnv).allowRemoteAccess()}})},3486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=r(5163);n.__exportStar(r(20137),t);var o=r(20137);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.__importDefault(o).default}})},72975:(e,t,r)=>{e.exports=r(3486)},26427:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=r(5163);var o=r(16894);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.__importDefault(o).default}}),n.__exportStar(r(16894),t)},16894:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RECOMPUTE_DEMO_LIST_MARK=t.COMPUTE_DEMO_LIST_MARK=void 0;const n=r(5163),o=r(93849),i=r(5689),s=n.__importStar(r(2206)),a=n.__importDefault(r(94400)),l=n.__importDefault(r(91821)),d=n.__importDefault(r(58729)),c=n.__importDefault(r(72975)),u=n.__importDefault(r(89111)),p=n.__importDefault(r(32562)),m=r(32510),v=n.__importDefault(r(64229)),E=n.__importDefault(r(93104)),f=r(3092);t.COMPUTE_DEMO_LIST_MARK="COMPUTE_DEMO_LIST_MARK",t.RECOMPUTE_DEMO_LIST_MARK="RECOMPUTE_DEMO_LIST_MARK";const g=(0,m.defineComputedResource)().defineEntity(s.processingEnv),y=(0,m.defineTwoWayResource)().defineEntity(s.processingEnv),w=(0,m.defineComputedResource)().defineEntity(s.processingEnv);t.default=new o.Feature({id:"simulationCapabilities",dependencies:[s.default.asEntity,c.default.asEntity,l.default.asEntity,a.default.asEntity,u.default.asEntity,p.default.asEntity,v.default.asEntity,d.default.asEntity,E.default.asEntity],api:{demoListManager:g,demoListManagerMain:g.defineConsumer(i.mainEnv),simulationService:o.Service.withType().defineEntity(i.mainEnv),simulationProcessingService:o.Service.withType().defineEntity(s.processingEnv).allowRemoteAccess(),demoErrorManager:y,demoErrorManagerMain:y.defineConsumer(i.mainEnv),environmentPropsManager:w,environmentPropsManagerMain:w.defineConsumer(i.mainEnv)}}).setup(o.Universal,(({},{simpleAST:{simpleASTPlugin:e}})=>{e.register(f.jsxFunctionPlugin),e.register(f.jsxFilePlugin),e.register(f.jsxOwnerPlugin)}))},98192:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5163);n.__exportStar(r(62344),t),n.__exportStar(r(80545),t),n.__exportStar(r(80489),t)},80489:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simulationToJSX=void 0,t.simulationToJSX=(e,t)=>{const{Board:r}=t;return e.createElement(r,null)}},62344:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimulationSetup=void 0;const n=r(3092);class o{async addStylesheet(e){await new Promise(((t,r)=>{const n=document.createElement("link");n.addEventListener("error",(()=>{r(new Error(`Failed to load stylesheet ${e}`))})),n.addEventListener("load",t),n.rel="stylesheet",n.href=e,document.head.appendChild(n)}))}async addScript(e){await new Promise(((t,r)=>{const n=document.createElement("script");n.addEventListener("error",(()=>{r(new Error(`Failed to load script ${e}`))})),n.addEventListener("load",t),n.src=e,document.head.appendChild(n)}))}}t.SimulationSetup=class{performFor(e,t){if(this.demoId&&!(0,n.isSameDemoId)(this.demoId,e))throw new Error("Unable to perform simulation setup, because it was previously performed for a different simulation. Page reload is required.");return this.setupFinishedPromise||(this.demoId=e,this.setupFinishedPromise=(async e=>{if(!e.setup)return;const t=Array.isArray(e.setup)?e.setup:[e.setup],r=new o;await Promise.all(t.map((e=>e(r))))})(t)),this.setupFinishedPromise}}},80545:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importSimulation=void 0;const n=r(91570),o=r(3092);t.importSimulation=(e,t,r)=>{if(!(0,n.isRecord)(e))return(0,o.setDemoError)(r,o.DemoErrorType.FormatError,`Couldn't get exports of the board file ${t}`),null;const i=e.default;return(0,n.isRecord)(i)?i.name?i.Board?i:((0,o.setDemoError)(r,o.DemoErrorType.FormatError,`Board in '${t}' is missing a Board param`),null):((0,o.setDemoError)(r,o.DemoErrorType.FormatError,`Board in '${t}' is missing a name`),null):((0,o.setDemoError)(r,o.DemoErrorType.FormatError,`Default export of the board file ${t} is not an object`),null)}},93673:(e,t,r)=>{e.exports=r(26427)},41385:(e,t,r)=>{e.exports=r(98192)},98066:(e,t,r)=>{e.exports=r(3092)},59320:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simulationElementRects=t.simulationPreviewDataManager=t.EXCLUDE_EDITING_TRANSFOTMERS_QUERY_FLAG=t.previewEnv=void 0;const n=r(5163),o=r(93849),i=n.__importStar(r(32510)),s=r(5689),a=n.__importDefault(r(93104)),l=n.__importDefault(r(25447)),d=n.__importDefault(r(93208)),c=n.__importDefault(r(1529)),u=n.__importStar(r(2206)),p=n.__importDefault(r(93673)),m=n.__importDefault(r(44479));t.previewEnv=new o.Environment("preview","iframe","multi"),t.EXCLUDE_EDITING_TRANSFOTMERS_QUERY_FLAG="excludeEditingTransformers";const v=o.Service.withType().defineEntity(t.previewEnv),E=(0,i.defineTwoWayResource)().defineEntity(s.mainEnv);t.simulationPreviewDataManager=(0,i.defineOneWayResource)().defineEntity(u.processingEnv),t.simulationElementRects=(0,i.defineOneWayResource)().defineEntity(t.previewEnv),t.default=new o.Feature({id:"simulationPreview",dependencies:[a.default.asEntity,o.COM.asEntity,d.default.asEntity,u.default.asEntity,l.default.asEntity,i.default.asEntity,p.default.asEntity,c.default.asEntity,m.default.asEntity],api:{simulationWindowController:v.allowRemoteAccess((0,o.declareComEmitter)("addCanvasIsEmptyListener","removeCanvasIsEmptyListener")),localSimulationWindowController:v,previewController:o.Service.withType().defineEntity(t.previewEnv).allowRemoteAccess((0,o.declareComEmitter)("subscribe","unsubscribe")),previewRenderers:o.MapSlot.withType().defineEntity(t.previewEnv),injectedPreviewLibraries:o.MapSlot.withType().defineEntity(t.previewEnv),demoErrorManager:p.default.api.demoErrorManager.defineConsumer(t.previewEnv),consoleResourceManager:E,consoleResourceManagerPreview:E.defineConsumer(t.previewEnv),boardGlobalSetupConfig:u.default.api.pluggableProjectConfig.entry(null,"boardGlobalSetup"),previewConfiguration:u.default.api.pluggableProjectConfig.entry({environmentVariables:{}},"previewConfiguration"),globalPreviewData:o.Slot.withType().defineEntity(u.processingEnv),simulationElementRects:t.simulationElementRects,onModuleSystemReady:o.Service.withType().defineEntity(t.previewEnv),simulationPreviewDataManager:t.simulationPreviewDataManager,simulationPreviewData:o.Service.withType().defineEntity(t.previewEnv),simulationId:o.Service.withType().defineEntity(t.previewEnv),runtimeEnvVars:o.OrderedSlot.withType().defineEntity(t.previewEnv)}})},23926:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5163),o=n.__importDefault(r(34406)),i=r(66249),s=r(73654),a=r(93849),l=n.__importDefault(r(78435)),d=r(60814),c=r(96435),u=r(98066),p=r(2542),m=r(41385),v=n.__importStar(r(59320)),E=r(75013),f=r(80673),g=r(24100),y=r(30259),w=n.__importDefault(r(72321)),h=r(2206),_=r(20049),M=r(25173),S=r(98804),R=r(91570),C=r(52870);v.default.setup(v.previewEnv,(({run:e,onDispose:t,consoleResourceManager:r,previewRenderers:n,simulationPreviewDataManager:b,simulationElementRects:P,boardGlobalSetupConfig:T,previewConfiguration:D,injectedPreviewLibraries:O,runtimeEnvVars:I},{codeExecution:{executionResourceFactory:L,resolver:x,dependencyResourceFactory:A},compilation:{compiledFilesManager:j},simulationCapabilities:{demoErrorManager:F},COM:{communication:N},project:{pluggableProjectConfig:k,projectService:W}})=>{const U=(0,C.isMainWindow)(),B=new URLSearchParams(window.parent.location.search.slice(1)).get(v.EXCLUDE_EDITING_TRANSFOTMERS_QUERY_FLAG),V=!!B&&"true"===B,q=k.consume({}),$=j.consume({manipulator:d.stringManipulator}),K=A.consume({manipulator:p.dependencyManipulator}),G=L.consume({results:[$,K]}),H=F.consume({}),J=r.consume({resourceConstructor:y.ConsoleResource});t((0,M.blockNativeSaveAs)());const X=q.get(h.PROJECT_CONFIG_NAME,v.previewEnv);let Y=!1;const z=new m.SimulationSetup,Q=P.provide({handler:{provide:()=>({value:{}})},resourceConstructor:d.JSONResource}),Z={},ee=Q.get(Z);t((()=>ee.release(Z)));const te=new E.SimulationWindowController,re=b.consume({resourceConstructor:d.JSONResource}).get(N.getEnvironmentId(),v.previewEnv),ne=new g.SimulationPreviewController(re,n),oe=ne.getSimulationId(),ie=N.getEnvironmentId();U||t((0,S.captureConsole)(J,ie)),O.register("path",s.win32);const se=new _.UncaughtErrorHandler({demoErrorRM:H,consoleRM:J,previewEnvironmentId:ie,isMainWindow:U}),ae=(0,R.setupSubscribers)(),le={async renderExport(){se.setDemoId(oe),await X.ready;const e=X.isValid()?X.get(T):null,{filePath:r}=oe,n=[],v=await W.getProjectPath(),E=s.win32.isAbsolute(v)&&!s.posix.isAbsolute(v)?s.win32.join(v,"package.json"):s.posix.join(v,"package.json");if(e){const{resolvedRequest:t}=await x.resolveFromFile(E,e);if(!t)throw new Error(`global simulation setup file doesn't exist at ${e}`);n.push(t)}const g=n[0]?$.get((0,p.compiledFileId)(n[0],V),this):null,y=G.get({entries:[...n,r,"react","react-dom"],excludeEditingTransformers:V}),{environmentVariables:h}=X.get(D),_={};for(const e of I)_[e.key]=e.value;const M=(0,c.createBaseCjsModuleSystem)({dirname:s.win32.dirname,readFileSync(e){const t=y.getResult($,(0,p.compiledFileId)(e,V));if(!t)throw new Error(`Cannot find compiled file ${e}`);return t.getLatest()},resolveFrom(e,t,r){if(r){const e=y.getResult(K,r);if(e)return e.getLatest()[t]}},globals:{process:{...o.default,env:{...o.default.env,...h,..._}},Buffer:i.Buffer}}),S=async()=>{const n={},o=H.get(oe,n),i=U?null:J.get(ie,n);if(await Promise.all([null==g?void 0:g.ready,o.ready,null==i?void 0:i.ready,y.ready]),!y.isValid())return void(0,u.setDemoError)(o,u.DemoErrorType.CompilationError,y.getStatus().message||"Compilation failed");ae.internals.notify(M);const{beforeEntry:s,afterEntry:a}=y.getMetaData();let c,p=!1,v=!1;s.forEach((e=>M.requireModule(e)));for(const[e,t]of O)M.loadedModules.set(e,{filename:e,id:e,exports:t});try{const{resolvedRequest:s}=await x.resolveFromFile(r,"react");if("string"!=typeof s)throw new Error(`cannot resolve "react" for ${r}`);const y=M.requireModule(s),{resolvedRequest:h}=await x.resolveFromFile(r,"react-dom");if("string"!=typeof h)throw new Error(`cannot resolve "react-dom" for ${r}`);c=M.requireModule(h),window.React=y,window.ReactDOM=c,(null==g?void 0:g.isValid())&&!Y&&(Y=!0,M.requireModule((await x.resolveFromFile(E,e)).resolvedRequest));const _=(0,m.importSimulation)(M.requireModule(r),r,o);if(a.forEach((e=>M.requireModule(e))),_){(0,u.clearDemoError)(o,u.DemoErrorType.FormatError),(0,u.clearDemoError)(o,u.DemoErrorType.CompilationError);const{canvas:e,cleanup:r}=function(e,t){const r=t.getStage();if(!r){const r=e.setupStage();return t.setStage(r),r}return r}(_,te),n=new ResizeObserver((()=>{const e=te.getStageDimensions(),t=ee.getLatest();(0,l.default)(t,e)||ee.applyChange((0,d.fullChange)({canvas:e.canvas,window:e.window}))}));n.observe(document.body),n.observe(e),t((()=>{r(),n.disconnect()})),p=!0,null==i||i.clear(),null==i||i.sendMessage(f.CodeExecutionMessageType.previewRenderStart),_.environmentProps&&te.updateEnvironmentProperties(_.environmentProps,f.ENVIRONMENT_PROPERTIES_KEYS),await z.performFor(oe,_),_.render?await _.render(e):c.render((0,m.simulationToJSX)(y,_),e),(0,u.clearDemoError)(o,u.DemoErrorType.RuntimeError),v=!0}}catch(e){console.error(e),(0,u.setDemoError)(o,p?u.DemoErrorType.RuntimeError:u.DemoErrorType.CompilationError,(0,R.stringifyErrorStack)(e))}finally{const e=te.getStage();c&&e&&!v&&c.unmountComponentAtNode(e.canvas),w.default.mark("preview-finished-loading"),null==i||i.release(n),o.release(n)}};y.unsubscribeAll(!1),y.subscribe((e=>{const t=new Set;for(const r of[...e.changed])r.getId().filePath&&(t.add(r.getId().filePath),M.loadedModules.delete(r.getId().filePath));C(t),S().catch(a.reportError)}));const C=e=>{const t=new Set;for(const r of y.getResults())if(K.isResourceOfType(r)){const n=r.getLatest();Object.entries(n).find((([t,n])=>n&&e.has(n)&&M.loadedModules.has(r.getId())))&&(M.loadedModules.delete(r.getId()),t.add(r.getId()))}t.size&&C(t)};await S()}},de="compiled";return n.register(de,le),e((async()=>{const e={},t=H.get(oe,e);await Promise.all([X.ready,t.ready]),ne.setRenderer(de),ne.renderSimulation().catch((e=>{(0,u.setDemoError)(t,u.DemoErrorType.CompilationError,(0,R.stringifyErrorStack)(e)),(0,a.reportError)(e)})).finally((()=>t.release(e)))})),{simulationElementRects:Q,localSimulationWindowController:te,simulationWindowController:te,previewController:ne,demoErrorManager:H,consoleResourceManagerPreview:J,onModuleSystemReady:ae,simulationPreviewData:re,simulationId:oe}}))},25173:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.blockNativeSaveAs=void 0,t.blockNativeSaveAs=function(){const e=e=>(e=>(e.ctrlKey||e.metaKey)&&"s"===e.key)(e)&&e.preventDefault();return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}},98804:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.captureConsole=void 0;const n=r(91832),o=r(91570);function i(e){if("string"==typeof e)return e;if(e instanceof Error)return(0,o.stringifyErrorStack)(e);try{return JSON.stringify(e,null,4)}catch(t){return String(e)}}function s(e){return e.map(i).join(" ")}t.captureConsole=function(e,t){const{log:r,error:o,info:i,warn:a}=console,l={},d=e.get(t,l);return console.log=async(...e)=>{await d.ready,d.sendMessage(n.CodeExecutionMessageType.consoleLog,s(e)),r(...e)},console.error=async(...e)=>{await d.ready,d.sendMessage(n.CodeExecutionMessageType.consoleError,s(e)),o(...e)},console.info=async(...e)=>{await d.ready,d.sendMessage(n.CodeExecutionMessageType.consoleInfo,s(e)),i(...e)},console.warn=async(...e)=>{await d.ready,d.sendMessage(n.CodeExecutionMessageType.consoleWarn,s(e)),a(...e)},()=>{console.log=r,console.error=o,console.info=i,console.warn=a,d.release(l)}}},21636:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.content=void 0,t.content={unknownRuntimeError:"Something went wrong while rendering your component. Check the console for more information."}},30259:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleResource=void 0;const n=r(60814);class o extends n.Resource{sendMessage(e,t,r){this.applyChange({kind:"add",path:["messages"],value:{type:e,message:t,additionalInfo:r}})}clear(){this.applyChange({kind:"replace",path:["messages"],value:[]})}}t.ConsoleResource=o},24100:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimulationPreviewController=void 0;const n=r(93849);t.SimulationPreviewController=class{constructor(e,t){this.previewData=e,this.renderers=t,this.events=new n.EventEmitter;const r=new URLSearchParams(window.location.search),o=r.get("exportName"),i=r.get("filePath");if(!o||!i)throw new Error("cannot init preview without providing simulation and component");this.simulationId={componentTypeRef:o,filePath:i},e.subscribe((()=>{this.renderSimulation().catch(n.reportError)}))}getSimulationId(){return this.simulationId}setRenderer(e){this.rendererType=e}async renderSimulation(){this.events.emit("event",{type:"beforeRender"}),this.previewData.isReady()||await this.previewData.ready;try{const e=this.renderers.get(this.rendererType);if(!e)throw new Error(`Unable to find renderer ${this.rendererType} for the preview`);await e.renderExport()}finally{this.events.emit("event",{type:"afterRender"})}}subscribe(e){this.events.subscribe("event",e)}unsubscribe(e){this.events.unsubscribe("event",e)}}},75013:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimulationWindowController=void 0;const n=r(80673);t.SimulationWindowController=class{constructor(){this.environmentProperties={},this.canvasIsEmptyListeners=new Set,this.generateStylesheet(),this.createBaseElement()}setStage(e){this.stage=e,this.stage.canvas.classList.add(n.SIMULATION_CANVAS_CLASS_NAME),this.observeCanvasIsEmpty()}getStage(){return this.stage}getStageDimensions(){return this.stage?{window:document.body.getBoundingClientRect(),canvas:this.stage.canvas.getBoundingClientRect()}:{}}isCanvasEmpty(){var e;return!(null===(e=this.stage)||void 0===e?void 0:e.canvas)||""===this.stage.canvas.innerHTML}setWindowInlineStyleRule(e,t){document.body.style.setProperty(e,t)}updateEnvironmentProperties(e,t=[]){var r,n;const o={};for(const r of t)o[r]=e[r];this.environmentProperties={...this.environmentProperties,...e,...o},null===(r=this.stage)||void 0===r||r.updateCanvas(this.environmentProperties),null===(n=this.stage)||void 0===n||n.updateWindow(this.environmentProperties)}createBaseElement(){const e=document.head.querySelector("base");if(!e||"_blank"!==e.target){const e=document.createElement("base");e.target="_blank",document.head.appendChild(e)}}generateStylesheet(){const e=`<style>\n            html {\n                height: 100%;\n            }\n\n            body {\n                height: 100%;\n                margin: 0;\n                box-sizing: border-box;\n                scrollbar-width: none;\n                -ms-overflow-style: none;\n                overflow: auto;\n                display: flex;\n            }\n\n            body::-webkit-scrollbar {\n                display: none;\n            }\n\n            .${n.SIMULATION_CANVAS_CLASS_NAME} {}\n            </style>`;document.head.insertAdjacentHTML("beforeend",e)}addCanvasIsEmptyListener(e){this.canvasIsEmptyListeners.add(e)}removeCanvasIsEmptyListener(e){this.canvasIsEmptyListeners.delete(e)}observeCanvasIsEmpty(){var e;if(null===(e=this.stage)||void 0===e?void 0:e.canvas){let e=this.isCanvasEmpty();const t=new MutationObserver((()=>{var t;if(null===(t=this.stage)||void 0===t?void 0:t.canvas){const t=this.isCanvasEmpty();t!==e&&(e=t,this.canvasIsEmptyListeners.forEach((e=>e(t))))}}));t.observe(this.stage.canvas,{childList:!0})}}}},20049:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UncaughtErrorHandler=void 0;const n=r(91570),o=r(98066),i=r(91832),s=r(21636);t.UncaughtErrorHandler=class{constructor(e){this.handleErrorEvent=e=>{const t=(0,n.stringifyErrorStack)(e.error)||s.content.unknownRuntimeError;this.addErrorToSimulation(t).catch(n.noop)},this.handlePromiseRejectionEvent=e=>{const t=(0,n.toError)(e.reason).message||s.content.unknownRuntimeError;this.addErrorToSimulation(t).catch(n.noop),this.addErrorToConsoleResourceIfNeeded(t).catch(n.noop)},this.demoErrorRM=e.demoErrorRM,this.consoleRM=e.consoleRM,this.previewEnvironmentId=e.previewEnvironmentId,this.isMainWindow=e.isMainWindow,window.addEventListener("error",this.handleErrorEvent),window.addEventListener("unhandledrejection",this.handlePromiseRejectionEvent)}setDemoId(e){this.demoId=e}async addErrorToSimulation(e){if(this.demoId){const t=await this.demoErrorRM.getReady(this.demoId);(0,o.setDemoError)(t,o.DemoErrorType.RuntimeError,e)}}async addErrorToConsoleResourceIfNeeded(e){this.isMainWindow||(await this.consoleRM.getReady(this.previewEnvironmentId)).sendMessage(i.CodeExecutionMessageType.consoleError,e)}}},80673:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ENVIRONMENT_PROPERTIES_KEYS=t.CodeExecutionMessageType=t.SIMULATION_CANVAS_CLASS_NAME=void 0,t.SIMULATION_CANVAS_CLASS_NAME="simulationCanvas",(r=t.CodeExecutionMessageType||(t.CodeExecutionMessageType={}))[r.consoleError=0]="consoleError",r[r.consoleWarn=1]="consoleWarn",r[r.consoleLog=2]="consoleLog",r[r.consoleInfo=3]="consoleInfo",r[r.previewRenderStart=4]="previewRenderStart",t.ENVIRONMENT_PROPERTIES_KEYS=["windowHeight","windowWidth","windowBackgroundColor","canvasHeight","canvasWidth","canvasBackgroundColor","canvasMargin","canvasPadding"]},91832:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5163);n.__exportStar(r(31705),t),n.__exportStar(r(80673),t)},31705:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}}]);