(self.webpackChunk_wixc3_component_playground=self.webpackChunk_wixc3_component_playground||[]).push([[8162],{83897:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>o,cssStates:()=>l,keyframes:()=>a,namespace:()=>n,st:()=>i,stVars:()=>r,style:()=>u,vars:()=>c});const n="o138",o={root:"s817",treeItemContainer:"s882",treeIcon:"s883",treeItemLabel:"s815",treeItemSubtitle:"s816",defaultExportIndicator:"s884",componentsListItemShimmer:"s885",descriptionShimmer:"s886"},a={},r={treeIconGap:"0.5em",treeIconWidth:"1em"},c={},l=s.stc.bind(null,n),u=s.sts.bind(null,n),i=u},49243:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>o,cssStates:()=>l,keyframes:()=>a,namespace:()=>n,st:()=>i,stVars:()=>r,style:()=>u,vars:()=>c});const n="o161",o={root:"s1004",listContainer:"s1007",rescanButton:"s1006"},a={},r={},c={},l=s.stc.bind(null,n),u=s.sts.bind(null,n),i=u},8451:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>o,cssStates:()=>l,keyframes:()=>a,namespace:()=>n,st:()=>i,stVars:()=>r,style:()=>u,vars:()=>c});const n="o117",o={root:"s818",treeItemLabel:"s815",treeItemSubtitle:"s816"},a={},r={},c={},l=s.stc.bind(null,n),u=s.sts.bind(null,n),i=u},22814:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>o,cssStates:()=>l,keyframes:()=>a,namespace:()=>n,st:()=>i,stVars:()=>r,style:()=>u,vars:()=>c});const n="o81",o={root:"s643",searchInput:"s645",treeContainer:"s646",componentsList:"s648",scrollBarVertical:"s647"},a={},r={},c={},l=s.stc.bind(null,n),u=s.sts.bind(null,n),i=u},68118:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>o,cssStates:()=>l,keyframes:()=>a,namespace:()=>n,st:()=>i,stVars:()=>r,style:()=>u,vars:()=>c});const n="o353",o={root:"s1544"},a={},r={},c={},l=s.stc.bind(null,n),u=s.sts.bind(null,n),i=u},27736:(e,t,s)=>{"use strict";s.r(t),s.d(t,{classes:()=>o,cssStates:()=>l,keyframes:()=>a,namespace:()=>n,st:()=>i,stVars:()=>r,style:()=>u,vars:()=>c});const n="o429",o={root:"s1789",dark:"s1569"},a={},r={},c={},l=s.stc.bind(null,n),u=s.sts.bind(null,n),i=u},34909:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COMPONENTS_SIDEBAR_PANEL_TYPE=void 0;const n=s(5163),o=s(93849),a=n.__importDefault(s(2206)),r=n.__importDefault(s(91821)),c=n.__importDefault(s(71815)),l=n.__importDefault(s(93208)),u=s(5689);t.COMPONENTS_SIDEBAR_PANEL_TYPE="componentsPanel",t.default=new o.Feature({id:t.COMPONENTS_SIDEBAR_PANEL_TYPE,dependencies:[a.default.asEntity,r.default.asEntity,l.default.asEntity,c.default.asEntity],api:{componentsPanelHeaderSlot:o.Slot.withType().defineEntity(u.mainEnv)}})},40334:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(5163),o=n.__importStar(s(87363)),a=s(5689),r=n.__importStar(s(34909)),c=s(83135),l=s(99322),u=s(42428),i=s(49560);r.default.setup(a.mainEnv,(({componentsPanelHeaderSlot:e},{gui:{sideBarPanelFactory:t,panelStore:s},project:{getProjectPath:n},typescriptAssets:{assetsMain:a,openAssetsMain:m},fileComponents:{demoComponentLocationsManagerMain:d}})=>{const p=()=>{const t=(0,o.useContext)(c.SideBarContext);return(0,o.useEffect)((()=>{const e=({oldState:e,newState:s})=>{s.focusedTab.id===l.HOME_TAB_ID&&s.focusedTab.id!==e.focusedTab.id&&t.setActiveTab(r.COMPONENTS_SIDEBAR_PANEL_TYPE)};return s.subscribe(e),()=>s.unsubscribe(e)}),[t]),o.default.createElement(i.ComponentsPanelContainer,{simulatedComponents:d,assets:a,openAssets:m,scanForComponents:(0,u.useScanComponents)(),componentsPanelHeaderItems:(0,c.useSlot)(e),getProjectPath:n})};t.register({id:r.COMPONENTS_SIDEBAR_PANEL_TYPE,label:"Components",factory:()=>o.default.createElement(p,null)})}))},12057:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFilePathFromComponentRef=t.getFileNameFromComponentRef=t.ComponentsListItem=void 0;const n=s(5163),o=s(38819),a=s(39906),r=s(27736),c=s(70268),l=n.__importStar(s(87363)),u=s(83897);t.ComponentsListItem=l.default.memo((({item:e,isSelected:s,isLoading:n,isSimulated:r=!1,relativeToProject:m})=>{const d=(0,l.useRef)(null);return(0,l.useEffect)((()=>{var e;s&&(null===(e=d.current)||void 0===e||e.scrollIntoView({block:"nearest",inline:"nearest"}))}),[d,s]),l.default.createElement(o.ListViewItemRoot,{className:(0,u.style)(u.classes.root,{selected:s,loading:n})},n&&i,!n&&l.default.createElement(c.Tooltip,{content:m((0,t.getFilePathFromComponentRef)(e.componentRef))},l.default.createElement("div",{ref:d,className:u.classes.treeItemContainer},l.default.createElement("i",{className:(0,u.style)(u.classes.treeIcon,{simulated:r})},l.default.createElement(a.ThemedComponentIcon,null)),l.default.createElement("div",{className:u.classes.treeItemLabel},e.label),l.default.createElement("div",{className:u.classes.treeItemSubtitle},(0,t.getFileNameFromComponentRef)(e.componentRef)))))})),t.ComponentsListItem.displayName="ComponentsListItem",t.getFileNameFromComponentRef=e=>(0,t.getFilePathFromComponentRef)(e).replace(/^.*[\\/]/,""),t.getFilePathFromComponentRef=e=>{const[t]=e.split("#");return t};const i=l.default.createElement("div",{className:u.classes.componentsListItemShimmer},l.default.createElement(c.Shimmer.Rect,{className:r.classes.dark}),l.default.createElement(c.Shimmer.Rect,{className:r.classes.dark}),l.default.createElement(c.Shimmer.Rect,{className:(0,u.style)(r.classes.dark,u.classes.descriptionShimmer)}))},57573:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentsList=void 0;const n=s(5163).__importStar(s(87363)),o=s(73654),a=s(69202),r=s(91570),c=s(42428),l=s(98066),u=s(38819),i=s(63372),m=s(70268),d=s(99322),p=s(83135),f=s(12057),C=s(30921),b=s(28709),_=s(49243),y=e=>e;t.ComponentsList=(0,n.memo)((({components:e,className:t,isLoading:s=!1,scanForComponents:v,projectPath:S,componentListRef:g,showInitialScanForComponents:P,showRescanForComponents:I})=>{const{filePath:N,exportName:h}=(0,p.useQueryParams)(["filePath","exportName"]),E=(0,n.useRef)(null),R=(0,n.useRef)(null);let M;if(S){const{relative:e}=(0,r.isWindowsStyleAbsolutePath)(S)?o.win32:o.posix;M=t=>e(S,t)}else M=y;const O=(0,n.useMemo)((()=>({filePath:N,exportName:h,isSimulated:"string"==typeof N&&"string"==typeof h&&!!e.simulated[(0,l.getComponentRef)(N,h)]})),[e.simulated,h,N]),{track:L}=(0,n.useContext)(p.AnalyticsContext),T=(0,n.useRef)(null),j=(0,n.useRef)(null),A=(0,n.useCallback)((e=>{(0,p.navigateToPanel)({type:d.HOME_PANEL_ID,props:{filePath:e.filePath,exportName:e.exportName},keepExistingParams:!1})}),[]),w=(0,n.useRef)(null),V=(0,n.useRef)(null);(0,n.useImperativeHandle)(g,(()=>({selectCurrentItemOfSimulatedComponents(){const e=T.current;if(e){const t=e.getCurrentDataItem();t&&A(t)}},selectCurrentItemOfAllComponents(){const e=j.current;if(e){const t=e.getCurrentDataItem();t&&A(t)}},getSimulatedListView:()=>T.current,getAllListView:()=>j.current,resetScroll(){var e,t;null===(e=w.current)||void 0===e||e.resetScroll(),null===(t=V.current)||void 0===t||t.resetScroll()}})));const x=Object.entries(e.all).sort(((e,t)=>e[1].label.localeCompare(t[1].label))).map((([e,{filePath:t,exportName:s,label:n}])=>({componentRef:e,filePath:t,exportName:s,label:n,itemType:b.TreeItemType.Component}))),k=(0,u.listViewCreateDataSource)(x,{idFunction:e=>e.componentRef}),D=Object.entries(e.simulated).sort(((e,t)=>e[1].label.localeCompare(t[1].label))).map((([e,{filePath:t,exportName:s,label:n}])=>({componentRef:e,filePath:t,exportName:s,label:n,itemType:b.TreeItemType.Component}))),F=(0,u.listViewCreateDataSource)(D,{idFunction:e=>e.componentRef}),B=Object.keys(e.simulated).length,H=Object.keys(e.all).length,G=(0,n.useMemo)((()=>{const o=e=>{e.nativeEvent.code===a.KeyCodes.Enter&&u.ListViewDOM.handleListViewItemKeyboardEvent(e,(e=>{A(e.dataItem)}))},r=e=>{u.ListViewDOM.handleListViewItemMouseEvent(e,(e=>{A(e.dataItem),L("selected component")}))};return[{hidden:0===B||!s&&0===B,id:"simulated",title:C.content.simulatedComponents(B,s),children:n.default.createElement("div",{className:_.classes.listContainer,ref:E},n.default.createElement(u.ListView,{ref:T,renderItem:({dataItem:e})=>{const t=e.filePath===O.filePath&&e.exportName===O.exportName&&O.isSimulated;return n.default.createElement(f.ComponentsListItem,{item:e,isSelected:t,isLoading:s,isSimulated:!0,relativeToProject:M})},onClick:r,onKeyDown:o,className:t},F))},{id:"all",title:C.content.allComponents(H,s),children:n.default.createElement("div",{className:_.classes.listContainer,ref:R},P?n.default.createElement(p.EmptyStateView,{title:C.content.scanComponentsTitle,description:C.content.scanComponentsDescription,onActionClick:v,actionContent:c.content.scanComponents}):n.default.createElement(n.default.Fragment,null,I&&n.default.createElement(m.Button,{className:(0,_.st)(i.classes.linkButton,_.classes.rescanButton),onClick:v},c.content.rescanComponents),n.default.createElement(u.ListView,{ref:j,renderItem:({dataItem:t})=>{const o=t.filePath===O.filePath&&t.exportName===O.exportName&&!O.isSimulated;return n.default.createElement(f.ComponentsListItem,{item:t,isSelected:o,isLoading:s,isSimulated:!!e.simulated[(0,l.getComponentRef)(t.filePath,t.exportName)],relativeToProject:M})},onClick:r,onKeyDown:o,className:t},k)))}]}),[k,t,e,s,H,B,M,v,O,P,I,F,L,A]),{open:Y,close:K}=(0,p.useResizerCurtain)();return n.default.createElement(m.DualAccordionSection,{openResizerCurtain:Y,closeResizerCurtain:K,className:_.classes.root,sections:G,firstScrollViewRef:w,secondScrollViewRef:V})})),t.ComponentsList.displayName="ComponentsList"},49560:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentsPanelContainer=void 0;const n=s(5163).__importStar(s(87363)),o=s(96231),a=s(27941),r=s(98066),c=s(9240),l={progress:0,results:{}};t.ComponentsPanelContainer=n.default.memo((({scanForComponents:e,componentsPanelHeaderItems:t,assets:s,getProjectPath:u,simulatedComponents:i,openAssets:m})=>{const d=u(),{openTsAssets:p,simulatedComponentsRes:f}=(0,a.useResources)({openTsAssets:{resourceManager:m,defaultValue:void 0,id:{}},simulatedComponentsRes:{resourceManager:i,defaultValue:{},id:d}}),C=p.value&&p.value.includes(d),b=C?s.get(d,s):void 0,_=(0,a.useResource)(b,l),y=(0,n.useMemo)((()=>Object.entries(f.value).reduce(((e,[t,s])=>{for(const{exportName:n,symbolName:o}of s)e[(0,r.getComponentRef)(t,n)]={exportName:n,filePath:t,label:o||n,symbolName:o};return e}),{})),[f.value]),v=(0,n.useMemo)((()=>Object.entries(_.results).reduce(((e,[t,s])=>{for(const[n,{tags:o,symbolName:a}]of Object.entries(s)){const s="default"===a?(0,c.deriveComponentNameFromPath)(t):a||n;o.includes("component")&&(e[(0,r.getComponentRef)(t,n)]={exportName:n,filePath:t,label:s,symbolName:a})}return e}),{})),[_.results]),S=(0,n.useMemo)((()=>({all:v,simulated:y})),[v,y]);return n.default.createElement(o.ComponentsPanel,{showInitialScanForComponents:!C,components:S,projectPath:d,scanForComponents:e,componentsPanelHeaderItems:t})})),t.ComponentsPanelContainer.displayName="ComponentsPanelContainer"},96231:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentsPanel=t.ITEM_LOADING_PREFIX=t.NUMBER_OF_LOADING_ITEMS=void 0;const n=s(5163),o=n.__importStar(s(87363)),a=s(57573),r=s(84161),c=s(93849),l=s(38819),u=s(69202),i=s(83135),m=s(70268),d=n.__importDefault(s(72321)),p=s(22814);function f(e,t){const s={all:{},simulated:{}};for(let n=0;n<e;n++){const e={exportName:"",filePath:"",symbolName:"",label:""};s.all[`${t}${n}`]=e,s.simulated[`${t}${n}`]=e}return s}function C(e,t){var s,n,o;const a={};for(const r of Object.keys(e)){const c=e[r],l=t.toLowerCase(),u=null===(s=c.filePath)||void 0===s?void 0:s.split(/\/|\\/),i=u?u[u.length-1]:void 0;((null==i?void 0:i.toLowerCase().includes(l))||(null===(n=c.exportName)||void 0===n?void 0:n.toLowerCase().includes(l))||(null===(o=c.symbolName)||void 0===o?void 0:o.toLowerCase().includes(l)))&&(a[r]=c)}return a}s(8451),t.NUMBER_OF_LOADING_ITEMS=15,t.ITEM_LOADING_PREFIX="loading-component",t.ComponentsPanel=o.default.memo((({scanForComponents:e,components:s,projectPath:n,showInitialScanForComponents:b,componentsPanelHeaderItems:_})=>{const y=(0,o.useRef)(null),[v,S]=(0,o.useState)(""),{track:g}=(0,o.useContext)(i.AnalyticsContext);d.default.mark("components-panel-render");const P=(0,o.useCallback)((()=>{S("")}),[S]),I=(0,o.useRef)(null),N=(0,o.useMemo)((()=>s?((e,t)=>t?{simulated:C(e.simulated,t),all:C(e.all,t)}:e)(s,v):{simulated:{},all:{}}),[s,v]),h=(0,o.useCallback)((e=>{try{const t=(0,r.assertNotNullable)(I.current);if(t.resetScroll(),e.nativeEvent.code===u.KeyCodes.Enter)t.selectCurrentItemOfSimulatedComponents();else{const s=t.getSimulatedListView();s&&l.ListViewDOM.delegateKeyboardNavigationEvent(s,e)}}catch(e){(0,c.reportError)(e)}}),[]),E=void 0!==s&&""!==n;return o.default.createElement("div",{className:(0,p.style)(p.classes.root)},o.default.createElement(m.SearchInput,{className:p.classes.searchInput,placeholder:"Search Components",onChange:e=>{g("searched component"),S(e.target.value)},onKeyDown:E?h:void 0,onClear:P,value:v}),_.map(((e,t)=>o.default.createElement(e,{key:t}))),o.default.createElement("div",{className:(0,p.style)(p.classes.treeContainer),ref:y},E?o.default.createElement(a.ComponentsList,{className:p.classes.componentsList,components:N,scanForComponents:e,projectPath:n,showInitialScanForComponents:b,showRescanForComponents:!b,componentListRef:I}):o.default.createElement(a.ComponentsList,{isLoading:!0,components:f(t.NUMBER_OF_LOADING_ITEMS,t.ITEM_LOADING_PREFIX)})))})),t.ComponentsPanel.displayName="ComponentsPanel"},28709:(e,t)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),t.TreeItemType=void 0,(s=t.TreeItemType||(t.TreeItemType={}))[s.Component=0]="Component",s[s.Simulation=1]="Simulation"},30921:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.content=void 0,t.content={simulatedComponents:(e,t)=>"With Boards "+(t||!e?"":`(${e})`),allComponents:(e,t)=>"All Components "+(t||!e?"":`(${e})`),scanComponentsTitle:"Project Components",scanComponentsDescription:"Click to scan for more components."}},2603:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SCAN_COMPONENTS_DIALOG_TYPE=void 0,t.SCAN_COMPONENTS_DIALOG_TYPE="scanning-components"},18573:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.content=void 0,t.content={scanComponentsDescription:"We are scanning for components in your project. Please wait...",scanComponentsProgress:"Scanning for components",toast:{noComponents:"No components were found during this scan. Add a component to your project and try again."},scanComponents:"Scan for components",rescanComponents:"Rescan components"}},90114:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useComponentName=t.useScanComponents=void 0;var n=s(17553);Object.defineProperty(t,"useScanComponents",{enumerable:!0,get:function(){return n.useScanComponents}});var o=s(2684);Object.defineProperty(t,"useComponentName",{enumerable:!0,get:function(){return o.useComponentName}})},2684:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useComponentName=void 0;const n=s(16042),o=s(9029),a=s(27941),r=s(9240);t.useComponentName=(e,t)=>{var s,c;const l=(0,n.useVisibility)(),{fileComponents:{componentsManagerMain:u}}=(0,o.useMainContext)();return null!==(c=null===(s=(0,a.useResourceValue)({resourceManager:u,resourceId:{filePath:e,exportName:t},enabled:l}))||void 0===s?void 0:s.name)&&void 0!==c?c:(0,r.getComponentName)(e,t)}},17553:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useScanComponents=void 0;const n=s(9029),o=s(2603);t.useScanComponents=function(){const{project:{getProjectPath:e},gui:{panelStore:t},typescriptAssets:{assetsMain:s,assetsReevaluateService:a}}=(0,n.useMainContext)();return async()=>{const n=e();s.getIfReady(n)?await a.reevaluate(n):s.get(n,s),t.openOverlay({id:o.SCAN_COMPONENTS_DIALOG_TYPE,panelType:o.SCAN_COMPONENTS_DIALOG_TYPE})}}},67561:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(5163);n.__exportStar(s(2603),t),n.__exportStar(s(18573),t),n.__exportStar(s(90114),t)},42428:(e,t,s)=>{e.exports=s(67561)},83135:(e,t,s)=>{e.exports=s(77467)},50520:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HOME_TAB_ID=t.HOME_PANEL_ID=void 0,t.HOME_PANEL_ID="home",t.HOME_TAB_ID="home-tab"},37844:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HomeScreenText=void 0,t.HomeScreenText={title:"Wix Component Studio",description:"Redefine the way designers and developers work together",itemsTitle:"Instantly preview, test & visually edit React components"}},86041:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(5163);n.__exportStar(s(37844),t),n.__exportStar(s(50520),t)},99322:(e,t,s)=>{e.exports=s(86041)},78432:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useResources=t.useResource=t.useResourceApplyChange=t.useResourceValidity=t.useResourceValue=t.useResourceState=t.useApplyChange=t.useValidity=t.useValue=t.useResourceSubscriber=t.useHoldResource=t.useResourceInstance=void 0;const n=s(87363),o=s(93849),a=s(60814),r=s(69202);function c({resource:e,defaultValue:t,enabled:s=!0}){const a=(0,r.useForceUpdate)(),c=(0,n.useRef)(!1),l=(0,r.useLatest)(s),u=(0,n.useCallback)((()=>{l.current&&!c.current&&a()}),[l,a]);return(0,n.useEffect)((()=>(e&&e.subscribe(u),(null==e?void 0:e.ready)&&e.ready.then(u).catch(o.reportError),()=>{null==e||e.unsubscribe(u)})),[u,e]),(0,n.useEffect)((()=>()=>{c.current=!0}),[]),function(e,t){return e&&e.isReady()&&e.isValid()?e.getLatest():t}(e,t)}function l({resource:e,enabled:t=!0}){const[s,o]=(0,n.useState)(),a=(0,n.useCallback)((()=>{if(t){const t=e&&e.isReady()?e.isValid():void 0;o(t)}}),[e,t]);return(0,n.useEffect)((()=>{var s;if(!e)return void(t&&o(void 0));let n=!1;const r=()=>{n||a()};return e.subscribe(r),r(),null===(s=e.ready)||void 0===s||s.then(r).catch(r),()=>{n=!0,e.unsubscribe(r)}}),[e,a,t]),s}function u(e){return(0,n.useCallback)((t=>{null==e||e.applyChange(t)}),[e])}function i(e){return!!e.ids}t.useResourceInstance=({resourceManager:e,resourceId:t,enabled:s=!0})=>{const o=(0,n.useMemo)((()=>({})),[]),a=(0,n.useRef)({resourceManager:e,resourceId:t}),r=(0,n.useMemo)((()=>{if(void 0===t)return;const{current:n}=a;return function(e,t,s){return e||t.resourceId!==s.resourceId||t.resourceManager!==s.resourceManager}(s,n,{resourceManager:e,resourceId:t})?e.get(t,o):n.resourceInstance}),[t,s,e,o]);return a.current={resourceManager:e,resourceId:t,resourceInstance:r},(0,n.useEffect)((()=>()=>null==r?void 0:r.release(o)),[r,o]),r},t.useHoldResource=e=>{(0,n.useEffect)((()=>{const t={};return e.use(t),()=>{e.release(t)}}),[e])},t.useResourceSubscriber=(e,t)=>{(0,n.useEffect)((()=>{const s=()=>t(e.getLatest());return e.subscribe(s),()=>e.unsubscribe(s)}),[t,e])},t.useValue=c,t.useValidity=l,t.useApplyChange=u,t.useResourceState=function({resource:e,enabled:t,defaultValue:s}){const o=c({resource:e,enabled:t,defaultValue:(null==e?void 0:e.getLatest())||s}),r=u(e),l=(0,n.useCallback)((e=>r((0,a.fullChange)(e))),[r]);return[o,l,e]},t.useResourceValue=function({resourceManager:e,resourceId:s,defaultValue:n,enabled:o=!0}){return c({resource:(0,t.useResourceInstance)({resourceManager:e,resourceId:s,enabled:o}),defaultValue:n,enabled:o})},t.useResourceValidity=function({resourceManager:e,resourceId:s,enabled:n=!0}){return l({resource:(0,t.useResourceInstance)({resourceManager:e,resourceId:s,enabled:n}),enabled:n})},t.useResourceApplyChange=function({resourceManager:e,resourceId:s}){return u((0,t.useResourceInstance)({resourceManager:e,resourceId:s}))},t.useResource=function(e,t){const[s,o]=(0,n.useState)(t);return(0,n.useEffect)((()=>{var s;let n=!1;if(!e)return;const a=()=>{n||(e.isReady()&&e.isValid()?o(e.getLatest()):o(t))};return e.subscribe(a),a(),null===(s=e.ready)||void 0===s||s.then(a).catch(a),()=>{n=!0,e.unsubscribe(a)}}),[e,t]),e&&e.isReady()?e.getLatest():s};const m=new WeakMap,d=e=>{const t=m.get(e);if(t)for(const s of Object.keys(t))for(const n of Object.keys(t[s]))t[s][n].resource.isReady()&&t[s][n].resource.release(e)},p=(e,t,s,n,o)=>{const a=t.getType();t.isReady()||o.push(t.ready),e[a]||(e[a]={}),e[a][t.getSerializedId()]={resource:t,field:s,isInnerRecord:n}},f={valid:!1,message:"Loading"},C=(e,t)=>{for(const s of Object.keys(e))if(t[s])for(const n of t[s])if(e[s][n])return!0;return!1};t.useResources=function(e,t=!0){const s=(e=>JSON.stringify(e,((e,t)=>t instanceof a.ResourceManager?t.getTypeName():t)))(e),[r]=(0,n.useState)({cleanupRequested:!1,enabled:t,hasChanges:!1,used:new Set});r.enabled=t;const[c,l]=(0,n.useState)(0),u=Object.keys(e),b=u.length?e[u[0]].resourceManager.getBatcher():void 0,_=m.get(r)||{},y=(0,n.useCallback)((e=>{if(!r.enabled)return;const t=C(_,e.changed),s=C(_,e.changedStatus);(t||s)&&l(Math.random())}),[_,r]);return m.has(r)||(m.set(r,_),b.subscribe(y)),(0,n.useMemo)((()=>{const t=[];r.enabled&&(b.batchAll((()=>{const s=new Set;for(const[n,o]of Object.entries(e))if(i(o))for(const e of o.ids){const a=o.resourceManager.get(e,r);s.add(a),p(_,a,n,!0,t)}else if(o.id){const e=o.resourceManager.get(o.id,r);s.add(e),p(_,e,n,!0,t)}for(const e of Object.values(_))for(const[t,n]of Object.entries(e))s.has(n.resource)||(n.resource.isReady()?(n.resource.release(r),delete e[t]):n.resource.ready.then((()=>{r.used.has(n.resource)||(n.resource.release(r),delete e[t])})).catch(o.reportError));r.used=s})),t.length&&r.enabled&&Promise.all(t).then((e=>{r.cleanupRequested?d(r):l(Math.random())})).catch((e=>{throw e})))}),[s,r,b,_]),(0,n.useEffect)((()=>()=>{d(r),b.unsubscribe(y),r.cleanupRequested=!0}),[r]),(0,n.useMemo)((()=>{return Object.keys(e).reduce(((s,n)=>{const o=e[n];if(i(o))s[n]={getResource:e=>t(n,e),getValue(e){const s=t(n,e);return s&&s.isValid()?s.getLatest():o.defaultValue},getStatus(e){const s=t(n,e);return s&&s.isReady()?s.getStatus():f}};else{const e=t(n,o.id);s[n]={value:e&&e.isValid()?e.getLatest():o.defaultValue,status:e?e.getStatus():f,resource:e}}return s}),{});function t(t,s){const n=e[t],o=i(n)?s:n.id;if(!o||!_[n.resourceManager.getTypeName()])return;const r=_[n.resourceManager.getTypeName()][(0,a.serializeId)(o)];return r&&r.resource&&r.resource.isReady()?r.resource:void 0}}),[c,t,s])}},40386:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(5163);n.__exportStar(s(78432),t),n.__exportStar(s(23496),t)},23496:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createJSONResource=void 0;const n=s(60814);t.createJSONResource=function(e){return new n.JSONResource("data",{provider:{provide:()=>({value:e})},resourceType:"state-resource",batcher:new n.Batcher})}},27941:(e,t,s)=>{e.exports=s(40386)},98066:(e,t,s)=>{e.exports=s(3092)},39906:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThemedComponentIcon=void 0,s(68118);var n=s(69202);Object.defineProperty(t,"ThemedComponentIcon",{enumerable:!0,get:function(){return n.ComponentIcon}})}}]);