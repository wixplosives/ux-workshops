(self.webpackChunk_wixc3_component_playground=self.webpackChunk_wixc3_component_playground||[]).push([[7087],{80134:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCompiledFileExtention=void 0;const o=i(5163),n=i(93849),r=o.__importStar(i(32510)),l=o.__importDefault(i(93208)),s=o.__importStar(i(2206)),a=o.__importDefault(i(19608));t.defaultCompiledFileExtention=".compiled";const u=s.default.api.pluggableProjectConfig.entry({compiledFilesExtention:t.defaultCompiledFileExtention},"compilation");t.default=new n.Feature({id:"compilation",dependencies:[l.default.asEntity,s.default.asEntity,r.default.asEntity,a.default.asEntity],api:{compilationSlot:n.Slot.withType().defineEntity(s.processingEnv),compilationStore:n.Service.withType().defineEntity(s.processingEnv).allowRemoteAccess(),compiledFilesManager:(0,r.defineComputedResource)().defineEntity(s.processingEnv),compilationConfig:u}})},58235:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i(5163),n=i(60814),r=o.__importDefault(i(80134)),l=i(64216),s=i(2206),a=i(40811);r.default.setup(s.processingEnv,(({compilationSlot:e,compiledFilesManager:t,compilationConfig:i},{project:{fileManager:o,pluggableProjectConfig:r,projectService:u},userApplicationServer:{serverRootSlot:p}})=>{const{compiledFilesExtention:d}=r.get(s.PROJECT_CONFIG_NAME).get(i),c=new l.CompilationStore(e,d),m=new a.CompilationResourceComputer(o,c),g=t.provide({handler:m,dependencies:[o],manipulator:n.stringManipulator});return p.register(u.getProjectPath()),{compilationStore:c,compiledFilesManager:g}}))},40811:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompilationResourceComputer=void 0;const o=i(5163),n=i(60814),r=o.__importDefault(i(72321));t.CompilationResourceComputer=class{constructor(e,t){this.fileManager=e,this.compilationStore=t}async compute(e){var t;const{filePath:i,outputLang:o}=e,n=l(i,o);r.default.mark(n.startId);const s=this.fileManager.get(i),a=new Set([s]);if(!s.isValid())return{value:"",dependencies:a,status:{valid:!1,message:s.getInvalidationMessage()}};const u={valid:!0},p=this.fileManager.get(i+this.compilationStore.getCompiledFilesExtention());if(p.isValid())return{value:p.getLatest(),dependencies:new Set([...a,p]),status:u};if(!this.compilationStore.isLanguageSupported(i,o))return{value:s.getLatest(),dependencies:a,status:u};const d=this.compilationStore.getCompiled(i,o,e.excludeEditingTransformers);try{const e=d instanceof Promise?await d:d,t="string"==typeof e?{content:e}:e;if(t.dependencies)for(const e of t.dependencies)a.add(this.fileManager.get(e));return r.default.mark(n.endId),r.default.measure(n.id,n.startId,n.endId),{value:t.content,dependencies:a,status:u}}catch(e){return{value:"",dependencies:a,status:{valid:!1,message:null!==(t=e)&&void 0!==t?t:`Compilation error while compiling file ${i}`}}}}async recompute(e,t,i,o){const r=await this.compute(e.getId());return{changes:r.value!==e.getLatest()?[(0,n.fullChange)(r.value)]:[],dependencies:r.dependencies,status:(0,n.getDefaultStatusHandling)(e.getSerializedId(),o)}}};const l=(e,t)=>{const i=`compile ${e} to ${t}`;return{startId:`start ${i}`,id:i,endId:`endId ${i}`}}},64216:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompilationStore=void 0;const o=i(80134);t.CompilationStore=class{constructor(e,t=o.defaultCompiledFileExtention){this.compilerDescriptors=e,this.compiledFilesExtention=t}getCompiler(e,t){return[...this.compilerDescriptors].reverse().find((i=>i.outputLanguage===t&&i.isApplicable(e)))}getCompilers(e){return[...this.compilerDescriptors].reverse().filter((t=>t.isApplicable(e)))}getCompiledFilesExtention(){return this.compiledFilesExtention}getOutputLanguages(e){return this.getCompilers(e).map((e=>e.outputLanguage))}isLanguageSupported(e,t){return!!this.getCompiler(e,t)}getLanguage(e){const t=this.getCompilers(e);return t.length?t[0].languageName:null}getCompiled(e,t,i){var o,n;return null!==(n=null===(o=this.getCompiler(e,t))||void 0===o?void 0:o.compile(e,i))&&void 0!==n?n:""}shouldPrecompile(e,t){var i,o,n;return null!==(n=null===(o=null===(i=this.getCompiler(e,t))||void 0===i?void 0:i.shouldPrecompile)||void 0===o?void 0:o.call(i,e))&&void 0!==n?n:Promise.resolve(!1)}}},43934:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const o=i(5163);o.__exportStar(i(31434),t);var n=i(31434);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.__importDefault(n).default}})},2206:(e,t,i)=>{e.exports=i(43934)},60814:(e,t,i)=>{e.exports=i(73858)},73837:function(e,t,i){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(89102);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(n).default}})},89102:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i(93849),n=i(2206);t.default=new o.Feature({id:"userApplicationServer",dependencies:[],api:{userApplicationServerInterface:o.Service.withType().defineEntity(n.processingEnv).allowRemoteAccess(),serverRootSlot:o.Slot.withType().defineEntity(n.processingEnv),applicationHandlerSlot:o.Slot.withType().defineEntity(n.processingEnv)},context:{serverInitializer:n.processingEnv.withContext()}})},19608:(e,t,i)=>{e.exports=i(73837)}}]);